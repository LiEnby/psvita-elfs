window.CodeMirror=function(){function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};for(var e in dc)!d.hasOwnProperty(e)&&dc.hasOwnProperty(e)&&(d[e]=dc[e]);m(d);e=this.display=b(c,"string"==typeof d.value?0:d.value.first);e.wrapper.CodeMirror=this;h(this);d.autofocus&&!ec&&da(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new fc};f(this);d.lineWrapping&&(this.display.wrapper.className+=
" CodeMirror-wrap");var g=d.value;"string"==typeof g&&(g=new ga(d.value,d.mode));y(this,Lc)(this,g);X&&setTimeout(ha(Ha,this,!0),20);Gd(this);var k;try{k=document.activeElement==e.input}catch(l){}k||d.autofocus&&!ec?setTimeout(ha(Ia,this),20):gc(this);y(this,function(){for(var a in Ua)if(Ua.propertyIsEnumerable(a))Ua[a](this,d[a],Mc);for(a=0;a<hc.length;++a)hc[a](this)})()}function b(a,b){var c={},d=c.input=A("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");
ja?d.style.width="1000px":d.setAttribute("wrap","off");gb&&(d.style.border="1px solid black");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");c.inputDiv=A("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");c.scrollbarH=A("div",[A("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");c.scrollbarV=A("div",[A("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");c.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler");c.lineDiv=A("div");
c.selectionDiv=A("div",null,null,"position: relative; z-index: 1");c.cursor=A("div","\u00a0","CodeMirror-cursor");c.otherCursor=A("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");c.measure=A("div",null,"CodeMirror-measure");c.lineSpace=A("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none");c.mover=A("div",[A("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative");c.sizer=A("div",[c.mover],"CodeMirror-sizer");c.heightForcer=
A("div",null,null,"position: absolute; height: "+hb+"px; width: 1px;");c.gutters=A("div",null,"CodeMirror-gutters");c.lineGutter=null;var e=A("div",[c.sizer,c.heightForcer,c.gutters],null,"position: relative; min-height: 100%");c.scroller=A("div",[e],"CodeMirror-scroll");c.scroller.setAttribute("tabIndex","-1");c.wrapper=A("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.scroller],"CodeMirror");Va&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0);a.appendChild?a.appendChild(c.wrapper):
a(c.wrapper);gb&&(d.style.width="0px");ja||(c.scroller.draggable=!0);ic?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):Va&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px");c.viewOffset=c.lastSizeC=0;c.showingFrom=c.showingTo=b;c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null;c.prevInput="";c.alignWidgets=!1;c.pollingFast=!1;c.poll=new fc;c.draggingText=!1;c.cachedCharWidth=c.cachedTextHeight=null;c.measureLineCache=[];c.measureLineCachePos=0;c.inaccurateSelection=
!1;c.maxLine=null;c.maxLineLength=0;c.maxLineChanged=!1;c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null;return c}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption);b.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});b.doc.frontier=b.doc.first;ca(b,100);b.state.modeGen++;b.curOp&&K(b)}function e(a){var b=xa(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/ib(a.display)-3);return function(e){return Ja(a.doc,e)?0:c?(Math.ceil(e.text.length/
d)||1)*b:b}}function d(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&oa(a,b)})}function f(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");W(a)}function g(a){h(a);K(a)}function h(a){var b=a.display.gutters,c=a.options.gutters;Db(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(A("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||
1)+"px")}b.style.display=d?"":"none"}function k(a,b){if(0==b.height)return 0;for(var c=b.text.length,d,e=b;d=Ka(e,-1);)d=d.find(),e=B(a,d.from.line),c+=d.from.ch-d.to.ch;for(e=b;d=jb(e);)d=d.find(),c-=e.text.length-d.from.ch,e=B(a,d.to.line),c+=e.text.length-d.to.ch;return c}function l(a){var b=a.display,c=a.doc;b.maxLine=B(c,c.first);b.maxLineLength=k(c,b.maxLine);b.maxLineChanged=!0;c.iter(function(a){var d=k(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function m(a){for(var b=!1,c=
0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function n(a,b){var c=b+(a.mover.offsetHeight-a.lineSpace.offsetHeight);a.sizer.style.minHeight=a.heightForcer.style.top=c+"px";var c=Math.max(c,a.scroller.scrollHeight),d=a.scroller.scrollWidth>a.scroller.clientWidth,e=c>a.scroller.clientHeight;e?(a.scrollbarV.style.display="block",a.scrollbarV.style.bottom=d?Eb(a.measure)+"px":
"0",a.scrollbarV.firstChild.style.height=c-a.scroller.clientHeight+a.scrollbarV.clientHeight+"px"):a.scrollbarV.style.display="";d?(a.scrollbarH.style.display="block",a.scrollbarH.style.right=e?Eb(a.measure)+"px":"0",a.scrollbarH.firstChild.style.width=a.scroller.scrollWidth-a.scroller.clientWidth+a.scrollbarH.clientWidth+"px"):a.scrollbarH.style.display="";d&&e?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=a.scrollbarFiller.style.width=Eb(a.measure)+"px"):a.scrollbarFiller.style.display=
"";Hd&&0===Eb(a.measure)&&(a.scrollbarV.style.minWidth=a.scrollbarH.style.minHeight=Id?"18px":"12px")}function p(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top);d=Math.floor(d-a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:Fb(b,d),to:Fb(b,a)}}function q(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=t(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=
f.nextSibling)if(f.alignable)for(var g=0,h=f.alignable;g<h.length;++g)h[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function s(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=r(a.options,b.first+b.size-1);a=a.display;if(b.length!=a.lineNumChars){var c=a.measure.appendChild(A("div",[A("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth,c=c.offsetWidth-d;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-
c);a.lineNumWidth=a.lineNumInnerWidth+c;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";return!0}return!1}function r(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function t(a){return T(a.scroller).left-T(a.sizer).left}function u(a,b,c){var d=a.display.showingFrom,e=a.display.showingTo;if(b=w(a,b,c))pa(a,"update",a),a.display.showingFrom==d&&a.display.showingTo==e||pa(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo);G(a);
n(a.display,a.doc.height);return b}function w(a,b,c){var d=a.display,e=a.doc;if(d.wrapper.clientWidth){var f=p(d,e,c);if(!(0==b.length&&f.from>d.showingFrom&&f.to<d.showingTo)){s(a)&&(b=[{from:e.first,to:e.first+e.size}]);var g=d.sizer.style.marginLeft=d.gutters.offsetWidth+"px";d.scrollbarH.style.left=a.options.fixedGutter?g:"0";var h=Infinity;if(a.options.lineNumbers)for(g=0;g<b.length;++g)if(b[g].diff){h=b[g].from;break}var g=e.first+e.size,k=Math.max(f.from-a.options.viewportMargin,e.first),f=
Math.min(g,f.to+a.options.viewportMargin);d.showingFrom<k&&20>k-d.showingFrom&&(k=Math.max(e.first,d.showingFrom));d.showingTo>f&&20>d.showingTo-f&&(f=Math.min(g,d.showingTo));if(kb)for(k=ea(Wa(e,B(e,k)));f<g&&Ja(e,B(e,f));)++f;var l=[{from:Math.max(d.showingFrom,e.first),to:Math.min(d.showingTo,g)}],l=l[0].from>=l[0].to?[]:E(l,b);if(kb)for(g=0;g<l.length;++g){b=l[g];for(var m;m=jb(B(e,b.to-1));)if(m=m.find().from.line,m>b.from)b.to=m;else{l.splice(g--,1);break}}for(g=m=0;g<l.length;++g)b=l[g],b.from<
k&&(b.from=k),b.to>f&&(b.to=f),b.from>=b.to?l.splice(g--,1):m+=b.to-b.from;if(m==f-k&&k==d.showingFrom&&f==d.showingTo)v(a);else{l.sort(function(a,b){return a.from-b.from});g=document.activeElement;m<0.7*(f-k)&&(d.lineDiv.style.display="none");N(a,k,f,l,h);d.lineDiv.style.display="";document.activeElement!=g&&g.offsetHeight&&g.focus();if(k!=d.showingFrom||f!=d.showingTo||d.lastSizeC!=d.wrapper.clientHeight)d.lastSizeC=d.wrapper.clientHeight;d.showingFrom=k;d.showingTo=f;ca(a,100);h=d.lineDiv.offsetTop;
for(k=d.lineDiv.firstChild;k;k=k.nextSibling)if(k.lineObj&&(Va?(l=k.offsetTop+k.offsetHeight,g=l-h,h=l):(g=T(k),g=g.bottom-g.top),l=k.lineObj.height-g,2>g&&(g=xa(d)),0.001<l||-0.001>l)&&(oa(k.lineObj,g),l=k.lineObj.widgets))for(g=0;g<l.length;++g)l[g].height=l[g].node.offsetHeight;v(a);p(d,e,c).to>f&&w(a,[],c);return!0}}}else d.showingFrom=d.showingTo=e.first,d.viewOffset=0}function v(a){var b=a.display.viewOffset=Xa(a,B(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function E(a,
b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,k=a.length;h<k;++h){var l=a[h];e.to<=l.from&&e.diff?f.push({from:l.from+g,to:l.to+g}):e.to<=l.from||e.from>=l.to?f.push(l):(e.from>l.from&&f.push({from:l.from,to:e.from}),e.to<l.to&&f.push({from:e.to+g,to:l.to+g}))}a=f}return a}function D(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:t(b),gutterTotalWidth:b.gutters.offsetWidth,
gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function N(a,b,c,d,e){function f(b){var c=b.nextSibling;ja&&Ya&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b);return c}var g=D(a),h=a.display,k=a.options.lineNumbers;d.length||ja&&a.display.currentWheelTarget||Db(h.lineDiv);var l=h.lineDiv,m=l.firstChild,n=d.shift(),p=b;for(a.doc.iter(b,c,function(b){n&&n.to==p&&(n=d.shift());if(Ja(a.doc,b)){if(0!=b.height&&oa(b,0),b.widgets&&m.previousSibling)for(var c=
0;c<b.widgets.length;++c)if(b.widgets[c].showIfHidden){var J=m.previousSibling;if(/pre/i.test(J.nodeName)){var aa=A("div",null,null,"position: relative");J.parentNode.replaceChild(aa,J);aa.appendChild(J);J=aa}aa=J.appendChild(A("div",[b.widgets[c].node],"CodeMirror-linewidget"));x(b.widgets[c],aa,J,g)}}else if(n&&n.from<=p&&n.to>p){for(;m.lineObj!=b;)m=f(m);k&&e<=p&&m.lineNumber&&Nc(m.lineNumber,r(a.options,p));m=m.nextSibling}else{if(b.widgets)for(var h=0,ka=m;ka&&20>h;++h,ka=ka.nextSibling)if(ka.lineObj==
b&&/div/i.test(ka.nodeName)){c=ka;break}var h=a,y=p,q=c,ka=jc(h,b),t=b.gutterMarkers,s=h.display;if(h.options.lineNumbers||t||b.bgClass||b.wrapClass||b.widgets){if(q){q.alignable=null;for(var u=!0,w=0,C=q.firstChild,K;C;C=K)if(K=C.nextSibling,/\bCodeMirror-linewidget\b/.test(C.className)){for(var Q=0,v=!0;Q<b.widgets.length;++Q){var H=b.widgets[Q],P=!1;H.above||(P=v,v=!1);if(H.node==C.firstChild){x(H,C,q,g);++w;P&&q.insertBefore(ka,C);break}}if(Q==b.widgets.length){u=!1;break}}else q.removeChild(C);
u&&w==b.widgets.length&&(J=q,q.className=b.wrapClass||"")}J||(J=A("div",null,b.wrapClass,"position: relative"),J.appendChild(ka));b.bgClass&&J.insertBefore(A("div",null,b.bgClass+" CodeMirror-linebackground"),J.firstChild);if(h.options.lineNumbers||t)if(aa=J.insertBefore(A("div",null,null,"position: absolute; left: "+(h.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px"),J.firstChild),h.options.fixedGutter&&(J.alignable||(J.alignable=[])).push(aa),!h.options.lineNumbers||t&&t["CodeMirror-linenumbers"]||
(J.lineNumber=aa.appendChild(A("div",r(h.options,y),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+s.lineNumInnerWidth+"px"))),t)for(Q=0;Q<h.options.gutters.length;++Q)H=h.options.gutters[Q],(y=t.hasOwnProperty(H)&&t[H])&&aa.appendChild(A("div",[y],"CodeMirror-gutter-elt","left: "+g.gutterLeft[H]+"px; width: "+g.gutterWidth[H]+"px"));Va&&(J.style.zIndex=2);if(b.widgets&&J!=q)for(Q=0,q=b.widgets;Q<q.length;++Q)H=q[Q],t=A("div",[H.node],"CodeMirror-linewidget"),
x(H,t,J,g),H.above?J.insertBefore(t,h.options.lineNumbers&&0!=b.height?aa:ka):J.appendChild(t),pa(H,"redraw")}else J=ka;if(J!=c)l.insertBefore(J,m);else{for(;m!=c;)m=f(m);m=m.nextSibling}J.lineObj=b}++p});m;)m=f(m)}function x(a,b,c,d){a.noHScroll&&((c.alignable||(c.alignable=[])).push(b),c=d.wrapperWidth,b.style.left=d.fixedPos+"px",a.coverGutter||(c-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=c+"px");a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",
a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function G(a){var b=a.display,c=O(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting){var d=a.display,e=$(a,a.doc.sel.head,"div");d.cursor.style.left=e.left+"px";d.cursor.style.top=e.top+"px";d.cursor.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px";d.cursor.style.display="";e.other?(d.otherCursor.style.display="",d.otherCursor.style.left=e.other.left+"px",d.otherCursor.style.top=e.other.top+"px",d.otherCursor.style.height=
0.85*(e.other.bottom-e.other.top)+"px"):d.otherCursor.style.display="none"}else b.cursor.style.display=b.otherCursor.style.display="none";c?b.selectionDiv.style.display="none":C(a);a=$(a,a.doc.sel.head,"div");c=T(b.wrapper);d=T(b.lineDiv);b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+d.top-c.top))+"px";b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+d.left-c.left))+"px"}function C(a){function b(a,c,d,e){0>c&&(c=0);g.appendChild(A("div",null,"CodeMirror-selected",
"position: absolute; left: "+a+"px; top: "+c+"px; width: "+(null==d?h-a:d)+"px; height: "+(e-c)+"px"))}function c(d,f,g,aa){var Bb=B(e,d),l=Bb.text.length,Cb=aa?Infinity:-Infinity;Jd(qa(Bb),f||0,null==g?l:g,function(c,e,ia){var m=Ca(a,z(d,"rtl"==ia?e-1:c),"div",Bb);ia=Ca(a,z(d,"rtl"==ia?c:e-1),"div",Bb);var ya=m.left,n=ia.right;3<ia.top-m.top&&(b(ya,m.top,null,m.bottom),ya=k,m.bottom<ia.top&&b(ya,m.bottom,null,ia.top));null==g&&e==l&&(n=h);null==f&&0==c&&(ya=k);Cb=aa?Math.min(ia.top,Cb):Math.max(ia.bottom,
Cb);ya<k+1&&(ya=k);b(ya,ia.top,n-ya,ia.bottom)});return Cb}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),h=d.lineSpace.offsetWidth,k=ra(a.display.measure,A("pre",null,null,"text-align: left")).appendChild(A("span","x")).offsetLeft;if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{for(var l=B(e,f.from.line),m=l,n=[f.from.line,f.from.ch],p;m=jb(m);){m=m.find();n.push(m.from.ch,m.to.line,m.to.ch);if(m.to.line==f.to.line){n.push(f.to.ch);p=!0;break}m=B(e,m.to.line)}if(p)for(f=
0;f<n.length;f+=3)c(n[f],n[f+1],n[f+2]);else n=B(e,f.to.line),l=f.from.ch?c(f.from.line,f.from.ch,null,!1):Xa(a,l)-d.viewOffset,f=f.to.ch?c(f.to.line,Ka(n,-1)?null:0,f.to.ch,!0):Xa(a,n)-d.viewOffset,l<f&&b(k,l,null,f)}ra(d.selectionDiv,g);d.selectionDiv.style.display=""}function P(a){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="";b.blinker=setInterval(function(){b.cursor.offsetHeight&&(b.cursor.style.visibility=b.otherCursor.style.visibility=
(c=!c)?"":"hidden")},a.options.cursorBlinkRate)}function ca(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,ha(Ga,a))}function Ga(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.showingTo)){var c=+new Date+a.options.workTime,d=Za(b.mode,sa(a,b.frontier)),e=[],f;b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var h=g.styles;g.styles=Oc(a,g,d);for(var k=!h||
h.length!=g.styles.length,l=0;!k&&l<h.length;++l)k=h[l]!=g.styles[l];k&&(f&&f.end==b.frontier?f.end++:e.push(f={start:b.frontier,end:b.frontier+1}));g.stateAfter=Za(b.mode,d)}else Pc(a,g,d),g.stateAfter=0==b.frontier%5?Za(b.mode,d):null;++b.frontier;if(+new Date>c)return ca(a,a.options.workDelay),!0});e.length&&y(a,function(){for(var a=0;a<e.length;++a)K(this,e[a].start,e[a].end)})()}}function V(a,b){for(var c,d,e=a.doc,f=b,g=b-100;f>g;--f){if(f<=e.first)return e.first;var h=B(e,f-1);if(h.stateAfter)return f;
h=$a(h.text,null,a.options.tabSize);if(null==d||c>h)d=f-1,c=h}return d}function sa(a,b){var c=a.doc,d=a.display;if(!c.mode.startState)return!0;var e=V(a,b),f=e>c.first&&B(c,e-1).stateAfter,f=f?Za(c.mode,f):Qc(c.mode);c.iter(e,b,function(g){Pc(a,g,f);g.stateAfter=e==b-1||0==e%5||e>=d.showingFrom&&e<d.showingTo?Za(c.mode,f):null;++e});return f}function na(a,b,c,d){var e=-1;d=d||ma(a,b);for(a=c;;a+=e){var f=d[a];if(f)break;0>e&&0==a&&(e=1)}return{left:a<c?f.right:f.left,right:a>c?f.left:f.right,top:f.top,
bottom:f.bottom}}function Fa(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e.measure}}function ma(a,b){var c=Fa(a,b);if(!c){var d=a.display,e=Rc(b.text.length),f=jc(a,b,e);if(X&&!Va&&!a.options.lineWrapping&&100<f.childNodes.length){for(var g=document.createDocumentFragment(),h=f.childNodes.length,c=0,k=Math.ceil(h/10);c<k;++c){for(var l=
A("div",null,null,"display: inline-block"),m=0;10>m&&h;++m)l.appendChild(f.firstChild),--h;g.appendChild(l)}f.appendChild(g)}ra(d.measure,f);k=T(d.lineDiv);g=[];h=Rc(b.text.length);l=f.offsetHeight;La&&d.measure.first!=f&&ra(d.measure,f);for(c=0;c<e.length;++c)if(d=e[c]){for(var f=T(d),n=Math.max(0,f.top-k.top),p=Math.min(f.bottom-k.top,l),m=0;m<g.length;m+=2){var r=g[m],q=g[m+1];if(!(r>p||q<n)&&(r<=n&&q>=p||n<=r&&p>=q||Math.min(p,q)-Math.max(n,r)>=p-n>>1)){g[m]=Math.min(n,r);g[m+1]=Math.max(p,q);
break}}m==g.length&&g.push(n,p);n=f.right;d.measureRight&&(n=T(d.measureRight).left);h[c]={left:f.left-k.left,right:n-k.left,top:m}}for(c=0;c<h.length;++c)if(d=h[c])e=d.top,d.top=g[e],d.bottom=g[e+1];c=h;e=a.display.measureLineCache;m={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};16==e.length?e[++a.display.measureLineCachePos%16]=m:e.push(m)}return c}function W(a){a.display.measureLineCache.length=a.display.measureLineCachePos=
0;a.display.cachedCharWidth=a.display.cachedTextHeight=null;a.display.maxLineChanged=!0;a.display.lineNumChars=null}function fa(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Gb(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Xa(a,b);"local"!=d&&(b-=a.display.viewOffset);"page"==d&&(a=T(a.display.lineSpace),b+=a.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop),a=a.left+(window.pageXOffset||(document.documentElement||
document.body).scrollLeft),c.left+=a,c.right+=a);c.top+=b;c.bottom+=b;return c}function Ca(a,b,c,d){d||(d=B(a.doc,b.line));return fa(a,d,na(a,d,b.ch),c)}function $(a,b,c,d,e){function f(b,g){var J=na(a,d,b,e);g?J.left=J.right:J.right=J.left;return fa(a,d,J,c)}d=d||B(a.doc,b.line);e||(e=ma(a,d));var g=qa(d);b=b.ch;if(!g)return f(b);for(var h,k,l=g[0].level,m=0;m<g.length;++m){var n=g[m],p=n.level%2,r;if(n.from<b&&n.to>b)return f(b,p);var q=p?n.from:n.to;(p?n.to:n.from)==b?(n=m&&n.level<(r=g[m-1]).level?
f(r.level%2?r.from:r.to-1,!0):f(p&&n.from!=n.to?b-1:b),p==l?h=n:k=n):q==b&&(r=m<g.length-1&&g[m+1],p||!r||r.from!=r.to)&&(n=r&&n.level<r.level?f(r.level%2?r.to-1:r.from):f(p?b:b-1,!0),p==l?h=n:k=n)}l&&!b&&(k=f(g[0].to-1));if(!h)return k;k&&(h.other=k);return h}function Ea(a,b,c){a=new z(a,b);c&&(a.outside=!0);return a}function Da(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Ea(d.first,0,!0);var e=Fb(d,c),f=d.first+d.size-1;if(e>f)return Ea(d.first+d.size-1,B(d,f).text.length,!0);for(0>
b&&(b=0);;){var f=B(d,e),e=Ta(a,f,e,b,c),g=(f=jb(f))&&f.find();if(f&&e.ch>=g.from.ch)e=g.to.line;else return e}}function Ta(a,b,c,d,e){function f(d){d=$(a,z(c,d),"line",b,l);h=!0;if(g>d.bottom)return d.left-k;if(g<d.top)return d.left+k;h=!1;return d.left}var g=e-Xa(a,b),h=!1,k=2*a.display.wrapper.clientWidth,l=ma(a,b),m=qa(b),n=b.text.length,p=Hb(b),r=Ib(b),q=f(p);e=h;var y=f(r),t=h;if(d>y)return Ea(c,r,t);for(;;){if(m?r==p||r==kc(b,p,1):1>=r-p){for(p=(d=d-q<y-d)?p:r;lc.test(b.text.charAt(p));)++p;
e=Ea(c,p,d?e:t);e.after=d;return e}var s=Math.ceil(n/2),u=p+s;if(m)for(var u=p,C=0;C<s;++C)u=kc(b,u,1);C=f(u);if(C>d){r=u;y=C;if(t=h)y+=1E3;n-=s}else p=u,q=C,e=h,n=s}}function xa(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Ma){Ma=A("pre");for(var b=0;49>b;++b)Ma.appendChild(document.createTextNode("x")),Ma.appendChild(A("br"));Ma.appendChild(document.createTextNode("x"))}ra(a.measure,Ma);b=Ma.offsetHeight/50;3<b&&(a.cachedTextHeight=b);Db(a.measure);return b||1}function ib(a){if(null!=
a.cachedCharWidth)return a.cachedCharWidth;var b=A("span","x"),c=A("pre",[b]);ra(a.measure,c);b=b.offsetWidth;2<b&&(a.cachedCharWidth=b);return b||10}function M(a){a.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Kd};Jb++||(za=[])}function Aa(a){var b=a.curOp,c=a.doc,d=a.display;a.curOp=null;b.updateMaxLine&&l(a);if(d.maxLineChanged&&!a.options.lineWrapping){var e;e=d.maxLine;var f=!1;if(e.markedSpans)for(var g=0;g<
e.markedSpans;++g){var h=e.markedSpans[g];!h.collapsed||null!=h.to&&h.to!=e.text.length||(f=!0)}(f=!f&&Fa(a,e))?e=na(a,e,e.text.length,f).right:(e=jc(a,e),f=e.appendChild(Kb(a.display.measure)),ra(a.display.measure,e),e=T(f).right-T(a.display.lineDiv).left);d.sizer.style.minWidth=Math.max(0,e+3+hb)+"px";d.maxLineChanged=!1;e=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);e<c.scrollLeft&&!b.updateScrollPos&&ab(a,Math.min(d.scroller.scrollLeft,e),!0)}var k,m;b.updateScrollPos?
k=b.updateScrollPos:b.selectionChanged&&d.scroller.clientHeight&&(k=$(a,c.sel.head),k=mc(a,k.left,k.top,k.left,k.bottom));if(b.changes.length||k&&null!=k.scrollTop)m=u(a,b.changes,k&&k.scrollTop),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop);!m&&b.selectionChanged&&G(a);if(b.updateScrollPos)d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=k.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=k.scrollLeft,q(a);else if(k&&(c=Sc(a,a.doc.sel.head),
a.state.focused&&(d=a.display,k=T(d.sizer),m=null,e=a.display.lineSpace.offsetTop,0>c.top+e+k.top?m=!0:c.bottom+e+k.top>(window.innerHeight||document.documentElement.clientHeight)&&(m=!1),null!=m&&!Ld))){if(k="none"==d.cursor.style.display)d.cursor.style.display="",d.cursor.style.left=c.left+"px",d.cursor.style.top=c.top-d.viewOffset+"px";d.cursor.scrollIntoView(m);k&&(d.cursor.style.display="none")}b.selectionChanged&&P(a);a.state.focused&&b.updateInput&&Ha(a,b.userSelChange);c=b.maybeHiddenMarkers;
d=b.maybeUnhiddenMarkers;if(c)for(m=0;m<c.length;++m)c[m].lines.length||ba(c[m],"hide");if(d)for(m=0;m<d.length;++m)d[m].lines.length&&ba(d[m],"unhide");var n;--Jb||(n=za,za=null);b.textChanged&&ba(a,"change",a,b.textChanged);b.selectionChanged&&ba(a,"cursorActivity",a);if(n)for(m=0;m<n.length;++m)n[m]()}function y(a,b){return function(){var c=a||this,d=!c.curOp;d&&M(c);try{var e=b.apply(c,arguments)}finally{d&&Aa(c)}return e}}function H(a){return function(){var b=this.cm&&!this.cm.curOp,c;b&&M(this.cm);
try{c=a.apply(this,arguments)}finally{b&&Aa(this.cm)}return c}}function Q(a,b){var c=!a.curOp,d;c&&M(a);try{d=b()}finally{c&&Aa(a)}return d}function K(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);a.curOp.changes.push({from:b,to:c,diff:d})}function Lb(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){nc(a);a.state.focused&&Lb(a)})}function lb(a){function b(){nc(a)||c?(a.display.pollingFast=!1,Lb(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=
!0;a.display.poll.set(20,b)}function nc(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||Md(b)||mb(a))return!1;var f=b.value;if(f==c&&O(e.from,e.to))return!1;if(X&&f&&0===b.selectionStart)return Ha(a,!0),!1;var g=!a.curOp;g&&M(a);e.shift=!1;for(var h=0,k=Math.min(c.length,f.length);h<k&&c[h]==f[h];)++h;k=e.from;e=e.to;h<c.length?k=z(k.line,k.ch-(c.length-h)):a.state.overwrite&&O(k,e)&&!a.state.pasteIncoming&&(e=z(e.line,Math.min(B(d,e.line).text.length,e.ch+(f.length-
h))));c=a.curOp.updateInput;bb(a.doc,{from:k,to:e,text:Na(f.slice(h)),origin:a.state.pasteIncoming?"paste":"+input"},"end");a.curOp.updateInput=c;1E3<f.length?b.value=a.display.prevInput="":a.display.prevInput=f;g&&Aa(a);a.state.pasteIncoming=!1;return!0}function Ha(a,b){var c,d,e=a.doc;O(e.sel.from,e.sel.to)?b&&(a.display.prevInput=a.display.input.value=""):(a.display.prevInput="",c=Tc&&(100<e.sel.to.line-e.sel.from.line||1E3<(d=a.getSelection()).length),a.display.input.value=c?"-":d||a.getSelection(),
a.state.focused&&Uc(a.display.input));a.display.inaccurateSelection=c}function da(a){"nocursor"==a.options.readOnly||ec&&document.activeElement==a.display.input||a.display.input.focus()}function mb(a){return a.options.readOnly||a.doc.cantEdit}function Gd(a){function b(){a.state.focused&&setTimeout(ha(da,a),0)}function c(){g.cachedCharWidth=g.cachedTextHeight=null;W(a);Q(a,ha(K,a))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5E3):ta(window,"resize",
c)}function e(b){a.options.onDragEvent&&a.options.onDragEvent(a,nb(b))||Mb(b)}function f(){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Uc(g.input))}var g=a.display;I(g.scroller,"mousedown",y(a,Nd));I(g.scroller,"dblclick",y(a,U));I(g.lineSpace,"selectstart",function(a){cb(g,a)||U(a)});oc||I(g.scroller,"contextmenu",function(b){Vc(a,b)});I(g.scroller,"scroll",function(){g.scroller.clientHeight&&(ob(a,g.scroller.scrollTop),ab(a,g.scroller.scrollLeft,
!0),ba(a,"scroll",a))});I(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&ob(a,g.scrollbarV.scrollTop)});I(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&ab(a,g.scrollbarH.scrollLeft)});I(g.scroller,"mousewheel",function(b){Wc(a,b)});I(g.scroller,"DOMMouseScroll",function(b){Wc(a,b)});I(g.scrollbarH,"mousedown",b);I(g.scrollbarV,"mousedown",b);I(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0});I(window,"resize",c);setTimeout(d,5E3);I(g.input,"keyup",
y(a,function(b){a.options.onKeyEvent&&a.options.onKeyEvent(a,nb(b))||16!=b.keyCode||(a.doc.sel.shift=!1)}));I(g.input,"input",ha(lb,a));I(g.input,"keydown",y(a,Xc));I(g.input,"keypress",y(a,Od));I(g.input,"focus",ha(Ia,a));I(g.input,"blur",ha(gc,a));a.options.dragDrop&&(I(g.scroller,"dragstart",function(b){var c=a;if(!cb(c.display,b)){var d=c.getSelection();b.dataTransfer.setData("Text",d);b.dataTransfer.setDragImage&&(d=A("img",null,null,"position: fixed; left: 0; top: 0;"),ua&&(d.width=d.height=
1,c.display.wrapper.appendChild(d),d._top=d.offsetTop),pc&&(c.display.dragImg?d=c.display.dragImg:(c.display.dragImg=d,d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c.display.wrapper.appendChild(d))),b.dataTransfer.setDragImage(d,0,0),ua&&d.parentNode.removeChild(d))}}),I(g.scroller,"dragenter",e),I(g.scroller,"dragover",e),I(g.scroller,"drop",y(a,Pd)));I(g.scroller,"paste",function(b){cb(g,b)||(da(a),lb(a))});I(g.input,"paste",function(){a.state.pasteIncoming=
!0;lb(a)});I(g.input,"cut",f);I(g.input,"copy",f);ic&&I(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur();da(a)})}function cb(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||/\bCodeMirror-(?:line)?widget\b/.test(c.className)||c.parentNode==a.sizer&&c!=a.mover)return!0}function pb(a,b,c){var d=a.display;if(!c&&(c=b.target||b.srcElement,c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller))return null;
var e,f,d=T(d.lineSpace);try{e=b.clientX,f=b.clientY}catch(g){return null}return Da(a,e-d.left,f-d.top)}function Nd(a){function b(a){if("single"==m)Y(e.doc,F(g,k),a);else if(r=F(g,r),q=F(g,q),"double"==m){var c=Yc(B(g,a.line).text,a);S(a,r)?Y(e.doc,c.from,q):Y(e.doc,r,c.to)}else"triple"==m&&(S(a,r)?Y(e.doc,q,F(g,z(a.line,0))):Y(e.doc,r,F(g,z(a.line+1,0))))}function c(a){var d=++s,R=pb(e,a,!0);if(R)if(O(R,n)){var h=a.clientY<t.top?-20:a.clientY>t.bottom?20:0;h&&setTimeout(y(e,function(){s==d&&(f.scroller.scrollTop+=
h,c(a))}),50)}else{e.state.focused||Ia(e);n=R;b(R);var k=p(f,g);(R.line>=k.to||R.line<k.from)&&setTimeout(y(e,function(){s==d&&c(a)}),150)}}function d(a){s=Infinity;var c=pb(e,a);c&&b(c);U(a);da(e);ta(document,"mousemove",u);ta(document,"mouseup",C)}var e=this,f=e.display,g=e.doc,h=g.sel;h.shift=a.shiftKey;if(cb(f,a))ja||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=!0},100));else if(!Qd(e,a)){var k=pb(e,a);switch(Zc(a)){case 3:oc&&Vc.call(e,e,a);return;case 2:k&&Y(e.doc,k);
setTimeout(ha(da,e),20);U(a);return}if(k){e.state.focused||Ia(e);var l=+new Date,m="single";Nb&&Nb.time>l-400&&O(Nb.pos,k)?(m="triple",U(a),setTimeout(ha(da,e),20),Rd(e,k.line)):Ob&&Ob.time>l-400&&O(Ob.pos,k)?(m="double",Nb={time:l,pos:k},U(a),l=Yc(B(g,k.line).text,k),Y(e.doc,l.from,l.to)):Ob={time:l,pos:k};var n=k;if(!e.options.dragDrop||!Sd||mb(e)||O(h.from,h.to)||S(k,h.from)||S(h.to,k)||"single"!=m){U(a);"single"==m&&Y(e.doc,F(g,k));var r=h.from,q=h.to,t=T(f.wrapper),s=0,u=y(e,function(a){X||Zc(a)?
c(a):d(a)}),C=y(e,d);I(document,"mousemove",u);I(document,"mouseup",C)}else{var w=y(e,function(b){ja&&(f.scroller.draggable=!1);e.state.draggingText=!1;ta(document,"mouseup",w);ta(f.scroller,"drop",w);10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(U(b),Y(e.doc,k),da(e))});ja&&(f.scroller.draggable=!0);e.state.draggingText=w;f.scroller.dragDrop&&f.scroller.dragDrop();I(document,"mouseup",w);I(f.scroller,"drop",w)}}else(a.target||a.srcElement)==f.scroller&&U(a)}}function Pd(a){var b=
this;if(!(cb(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,nb(a)))){U(a);var c=pb(b,a,!0),d=a.dataTransfer.files;if(c&&!mb(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var R=new FileReader;R.onload=function(){f[d]=R.result;++g==e&&(c=F(b.doc,c),bb(b.doc,{from:c,to:c,text:Na(f.join("\n")),origin:"paste"},"around"))};R.readAsText(a)};for(var h=0;h<e;++h)a(d[h],h)}else if(!b.state.draggingText||S(c,b.doc.sel.from)||S(b.doc.sel.to,c))try{if(f=
a.dataTransfer.getData("Text")){var h=b.doc.sel.from,k=b.doc.sel.to;Ba(b.doc,c,c);b.state.draggingText&&Oa(b.doc,"",h,k,"paste");b.replaceSelection(f,null,"paste");da(b);Ia(b)}}catch(l){}else b.state.draggingText(a),setTimeout(ha(da,b),20)}}function Qd(a,b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(f){return!1}if(d>=Math.floor(T(c.gutters).right))return!1;U(b);if(!db(a,"gutterClick"))return!0;var g=T(c.lineDiv);if(e>g.bottom)return!0;e-=g.top-c.viewOffset;for(g=0;g<a.options.gutters.length;++g){var h=
c.gutters.childNodes[g];if(h&&T(h).right>=d){c=Fb(a.doc,e);pa(a,"gutterClick",a,c,a.options.gutters[g],b);break}}return!0}function ob(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,eb||u(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),eb&&u(a,[]))}function ab(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),
a.doc.scrollLeft=b,q(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function Wc(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);if(d&&Ya&&ja)for(var e=b.target;e!=g;e=e.parentNode)if(e.lineObj){a.display.currentWheelTarget=e;break}var f=a.display,g=f.scroller;if(!c||eb||ua||
null==la){if(d&&null!=la){var e=d*la,h=a.doc.scrollTop,k=h+f.wrapper.clientHeight;0>e?h=Math.max(0,h+e-50):k=Math.min(a.doc.height,k+e+50);u(a,[],{top:h,bottom:k})}20>Pb&&(null==f.wheelStartX?(f.wheelStartX=g.scrollLeft,f.wheelStartY=g.scrollTop,f.wheelDX=c,f.wheelDY=d,setTimeout(function(){if(null!=f.wheelStartX){var a=g.scrollLeft-f.wheelStartX,b=g.scrollTop-f.wheelStartY,a=b&&f.wheelDY&&b/f.wheelDY||a&&f.wheelDX&&a/f.wheelDX;f.wheelStartX=f.wheelStartY=null;a&&(la=(la*Pb+a)/(Pb+1),++Pb)}},200)):
(f.wheelDX+=c,f.wheelDY+=d))}else d&&ob(a,Math.max(0,Math.min(g.scrollTop+d*la,g.scrollHeight-g.clientHeight))),ab(a,Math.max(0,Math.min(g.scrollLeft+c*la,g.scrollWidth-g.clientWidth))),U(b),f.wheelStartX=null}function Qb(a,b,c){if("string"==typeof b&&(b=qc[b],!b))return!1;a.display.pollingFast&&nc(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{mb(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=$c}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function ad(a){var b=
a.state.keyMaps.slice(0);b.push(a.options.keyMap);a.options.extraKeys&&b.unshift(a.options.extraKeys);return b}function bd(a,b){var c=rc(a.options.keyMap),d=c.auto;clearTimeout(cd);d&&!dd(b)&&(cd=setTimeout(function(){rc(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d)},50));var e=ed(b,!0),f=!1;if(!e)return!1;f=ad(a);f=b.shiftKey?qb("Shift-"+e,f,function(b){return Qb(a,b,!0)})||qb(e,f,function(b){if("string"==typeof b&&/^go[A-Z]/.test(b))return Qb(a,b)}):qb(e,f,function(b){return Qb(a,
b)});"stop"==f&&(f=!1);f&&(U(b),P(a),La&&(b.oldKeyCode=b.keyCode,b.keyCode=0));return f}function Td(a,b,c){if(c=qb("'"+c+"'",ad(a),function(b){return Qb(a,b,!0)}))U(b),P(a);return c}function Xc(a){this.state.focused||Ia(this);X&&27==a.keyCode&&(a.returnValue=!1);if(!this.options.onKeyEvent||!this.options.onKeyEvent(this,nb(a))){var b=a.keyCode;this.doc.sel.shift=16==b||a.shiftKey;var c=bd(this,a);ua&&(sc=c?b:null,!c&&88==b&&!Tc&&(Ya?a.metaKey:a.ctrlKey)&&this.replaceSelection(""))}}function Od(a){var b=
this;if(!b.options.onKeyEvent||!b.options.onKeyEvent(b,nb(a))){var c=a.keyCode,d=a.charCode;ua&&c==sc?(sc=null,U(a)):(ua&&(!a.which||10>a.which)||ic)&&bd(b,a)||(c=String.fromCharCode(null==d?c:d),this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!mb(this)&&-1<this.doc.mode.electricChars.indexOf(c)&&setTimeout(y(b,function(){Rb(b,b.doc.sel.to.line,"smart")}),75),Td(b,a,c)||lb(b))}}function Ia(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(ba(a,"focus",a),a.state.focused=
!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),Ha(a,!0)),Lb(a),P(a))}function gc(a){a.state.focused&&(ba(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused",""));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Vc(a,b){function c(){d.inputDiv.style.position="relative";d.input.style.cssText=h;La&&(d.scrollbarV.scrollTop=
d.scroller.scrollTop=g);Lb(a);if(null!=d.input.selectionStart&&(!X||La)){clearTimeout(tc);var b=d.input.value=" "+(O(e.from,e.to)?"":d.input.value),f=0;d.prevInput=" ";d.input.selectionStart=1;d.input.selectionEnd=b.length;var J=function(){" "==d.prevInput&&0==d.input.selectionStart?y(a,qc.selectAll)(a):10>f++?tc=setTimeout(J,500):Ha(a)};tc=setTimeout(J,200)}}var d=a.display,e=a.doc.sel;if(!cb(d,b)){var f=pb(a,b),g=d.scroller.scrollTop;if(f&&!ua){(O(e.from,e.to)||S(f,e.from)||!S(f,e.to))&&y(a,Ba)(a.doc,
f,f);var h=d.input.style.cssText;d.inputDiv.style.position="absolute";d.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";da(a);Ha(a,!0);O(e.from,e.to)&&(d.input.value=d.prevInput=" ");if(oc){Mb(b);var k=function(){ta(window,"mouseup",k);setTimeout(c,20)};I(window,"mouseup",k)}else setTimeout(c,
50)}}}function uc(a){return z(a.from.line+a.text.length-1,Z(a.text).length+(1==a.text.length?a.from.ch:0))}function fd(a,b,c){if(!S(b.from,c))return F(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d)return b=c.line-d,d=a.first+a.size-1,b>d?z(d,B(a,d).text.length):Sb(c,B(a,b).text.length);if(c.line==b.to.line+d)return Sb(c,Z(b.text).length+(1==b.text.length?b.from.ch:0)+B(a,b.to.line).text.length-b.to.ch);a=c.line-b.from.line;return Sb(c,b.text[a].length+(a?0:b.from.ch))}function vc(a,
b,c){if(c&&"object"==typeof c)return{anchor:fd(a,b,c.anchor),head:fd(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=uc(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};c=function(a){if(S(a,b.from))return a;if(!S(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;a.line==b.to.line&&(e+=d.ch-b.to.ch);return z(c,e)};return{anchor:c(a.sel.anchor),head:c(a.sel.head)}}function Ud(a,b){var c={canceled:!1,from:b.from,to:b.to,
text:b.text,origin:b.origin,update:function(b,c,d,e){b&&(this.from=F(a,b));c&&(this.to=F(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)},cancel:function(){this.canceled=!0}};ba(a,"beforeChange",a,c);a.cm&&ba(a.cm,"beforeChange",a.cm,c);return c.canceled?null:{from:c.from,to:c.to,text:c.text,origin:c.origin}}function bb(a,b,c,d){if(a.cm){if(!a.cm.curOp)return y(a.cm,bb)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(db(a,"beforeChange")||a.cm&&db(a.cm,"beforeChange"))if(b=Ud(a,b),!b)return;if(d=
gd&&!d&&Vd(a,b.from,b.to)){for(var e=d.length-1;1<=e;--e)wc(a,{from:d[e].from,to:d[e].to,text:[""]});d.length&&wc(a,{from:d[0].from,to:d[0].to,text:b.text},c)}else wc(a,b,c)}function wc(a,b,c){c=vc(a,b,c);Wd(a,b,c,a.cm?a.cm.curOp.id:NaN);rb(a,b,c,xc(a,b));var d=[];fb(a,function(a,c){c||-1!=va(d,a.history)||(hd(a.history,b),d.push(a.history));rb(a,b,null,xc(a,b))})}function id(a,b){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){c.dirtyCounter+="undo"==b?-1:1;var e={changes:[],anchorBefore:d.anchorAfter,
headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore};("undo"==b?c.undone:c.done).push(e);for(c=d.changes.length-1;0<=c;--c){var f=d.changes[c];f.origin=b;e.changes.push(yc(a,f));var g=c?vc(a,f,null):{anchor:d.anchorBefore,head:d.headBefore};rb(a,f,g,jd(a,f));var h=[];fb(a,function(a,b){b||-1!=va(h,a.history)||(hd(a.history,f),h.push(a.history));rb(a,f,null,jd(a,f))})}}}function kd(a,b){function c(a){return z(a.line+b,a.ch)}a.first+=b;a.cm&&K(a.cm,a.first,a.first,b);a.sel.head=
c(a.sel.head);a.sel.anchor=c(a.sel.anchor);a.sel.from=c(a.sel.from);a.sel.to=c(a.sel.to)}function rb(a,b,c,d){if(a.cm&&!a.cm.curOp)return y(a.cm,rb)(a,b,c,d);if(b.to.line<a.first)kd(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);kd(a,e);b={from:z(a.first,0),to:z(b.to.line+e,b.to.ch),text:[Z(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:z(e,B(a,e).text.length),text:[b.text[0]],
origin:b.origin});b.removed=zc(a,b.from,b.to);c||(c=vc(a,b,null));a.cm?Xd(a.cm,b,d,c):Ac(a,b,d,c)}}function Xd(a,b,c,d){var f=a.doc,g=a.display,h=b.from,l=b.to,m=!1,n=h.line;a.options.lineWrapping||(n=ea(Wa(f,B(f,h.line))),f.iter(n,l.line+1,function(a){if(a==g.maxLine)return m=!0}));Ac(f,b,c,d,e(a));a.options.lineWrapping||(f.iter(n,h.line+b.text.length,function(a){var b=k(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,m=!1)}),m&&(a.curOp.updateMaxLine=!0));f.frontier=
Math.min(f.frontier,h.line);ca(a,400);K(a,h.line,l.line+1,b.text.length-(l.line-h.line)-1);if(db(a,"change"))if(b={from:h,to:l,text:b.text,removed:b.removed,origin:b.origin},a.curOp.textChanged){for(a=a.curOp.textChanged;a.next;a=a.next);a.next=b}else a.curOp.textChanged=b}function Oa(a,b,c,d,e){d||(d=c);if(S(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=Na(b));bb(a,{from:c,to:d,text:b,origin:e},null)}function z(a,b){if(!(this instanceof z))return new z(a,b);this.line=a;this.ch=b}function O(a,b){return a.line==
b.line&&a.ch==b.ch}function S(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Pa(a){return z(a.line,a.ch)}function F(a,b){if(b.line<a.first)return z(a.first,0);var c=a.first+a.size-1;return b.line>c?z(c,B(a,c).text.length):Sb(b,B(a,b.line).text.length)}function Sb(a,b){var c=a.ch;return null==c||c>b?z(a.line,b):0>c?z(a.line,0):a}function Qa(a,b){return b>=a.first&&b<a.first+a.size}function Y(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=S(b,e);f!=S(c,e)?(e=b,
b=c):f!=S(b,c)&&(b=c)}Ba(a,e,b,d)}else Ba(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function Ba(a,b,c,d,e){if(!e&&db(a,"beforeSelectionChange")||a.cm&&db(a.cm,"beforeSelectionChange"))b={anchor:b,head:c},ba(a,"beforeSelectionChange",a,b),a.cm&&ba(a.cm,"beforeSelectionChange",a.cm,b),b.anchor=F(a,b.anchor),b.head=F(a,b.head),c=b.head,b=b.anchor;var f=a.sel;f.goalColumn=null;if(e||!O(b,f.anchor))b=Tb(a,b,d,"push"!=e);if(e||!O(c,f.head))c=Tb(a,c,d,"push"!=e);O(f.anchor,b)&&O(f.head,c)||(f.anchor=
b,f.head=c,d=S(c,b),f.from=d?c:b,f.to=d?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0),pa(a,"cursorActivity",a))}function ld(a){Ba(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function Tb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=B(a,f.line),k;if(h.markedSpans){for(var l=0;l<h.markedSpans.length;++l){var m=h.markedSpans[l],n=m.marker;if((null==m.from||(n.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(n.inclusiveRight?m.to>=f.ch:m.to>f.ch)))if(d&&n.clearOnEnter)(k||
(k=[])).push(n);else if(n.atomic){l=n.find()[0>g?"from":"to"];if(O(l,f)&&(l.ch+=g,0>l.ch?l=l.line>a.first?F(a,z(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?z(l.line+1,0):null),!l)){if(e){if(!d)return Tb(a,b,c,!0);a.cantEdit=!0;return z(a.first,0)}e=!0;l=b;g=-g}f=l;continue a}}if(k)for(l=0;l<k.length;++l)k[l].clear()}return f}}function Sc(a,b,c){for(null==c&&(c=0);;){var d=!1,e=$(a,b),f=mc(a,e.left,e.top-c,e.left,e.bottom+c),g=a.doc.scrollTop,h=a.doc.scrollLeft;null!=f.scrollTop&&
(ob(a,f.scrollTop),1<Math.abs(a.doc.scrollTop-g)&&(d=!0));null!=f.scrollLeft&&(ab(a,f.scrollLeft),1<Math.abs(a.doc.scrollLeft-h)&&(d=!0));if(!d)return e}}function md(a,b,c,d,e){b=mc(a,b,c,d,e);null!=b.scrollTop&&ob(a,b.scrollTop);null!=b.scrollLeft&&ab(a,b.scrollLeft)}function mc(a,b,c,d,e){var f=a.display,g=f.lineSpace.offsetTop;c+=g;e+=g;var h=f.scroller.clientHeight-hb,k=f.scroller.scrollTop,l={};a=a.doc.height+(f.mover.offsetHeight-f.lineSpace.offsetHeight);var m=c<g+10,g=e+g>a-10;c<k?l.scrollTop=
m?0:Math.max(0,c):e>k+h&&(l.scrollTop=(g?a:e)-h);c=f.scroller.clientWidth-hb;e=f.scroller.scrollLeft;b+=f.gutters.offsetWidth;d+=f.gutters.offsetWidth;f=f.gutters.offsetWidth;h=b<f+10;b<e+f||h?(h&&(b=0),l.scrollLeft=Math.max(0,b-10-f)):d>c+e-3&&(l.scrollLeft=d+10-c);return l}function Bc(a,b,c){a.curOp.updateScrollPos={scrollLeft:b,scrollTop:c}}function nd(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop});a=a.display.scroller;d.scrollTop=
Math.max(0,Math.min(a.scrollHeight-a.clientHeight,d.scrollTop+c));d.scrollLeft=Math.max(0,Math.min(a.scrollWidth-a.clientWidth,d.scrollLeft+b))}function Rb(a,b,c,d){var e=a.doc;c||(c="add");if("smart"==c)if(a.doc.mode.indent)var f=sa(a,b);else c="prev";var g=a.options.tabSize,h=B(e,b),k=$a(h.text,null,g),l=h.text.match(/^\s*/)[0],m;if("smart"==c&&(m=a.doc.mode.indent(f,h.text.slice(l.length),h.text),m==$c)){if(!d)return;c="prev"}"prev"==c?m=b>e.first?$a(B(e,b-1).text,null,g):0:"add"==c?m=k+a.options.indentUnit:
"subtract"==c&&(m=k-a.options.indentUnit);m=Math.max(0,m);c="";d=0;if(a.options.indentWithTabs)for(e=Math.floor(m/g);e;--e)d+=g,c+="\t";d<m&&(c+=od(m-d));c!=l&&Oa(a.doc,c,z(b,0),z(b,l.length),"+input");h.stateAfter=null}function Ub(a,b,c){var d=b,e=b,f=a.doc;"number"==typeof b?e=B(f,Math.max(f.first,Math.min(b,f.first+f.size-1))):d=ea(b);if(null!=d&&c(e,d))K(a,d,d+1);else return null;return e}function Cc(a,b,c,d,e){function f(b){var d=(e?kc:pd)(k,h,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+
a.size?b=l=!1:(g=b,b=k=B(a,b));if(b)h=e?(0>c?Ib:Hb)(k):0>c?k.text.length:0;else return l=!1}else h=d;return!0}var g=b.line,h=b.ch,k=B(a,g),l=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){b=null;d="group"==d;for(var m=!0;!(0>c)||f(!m);m=!1){var n=k.text.charAt(h)||"\n",n=Vb(n)?"w":d?/\s/.test(n)?null:"p":null;if(b&&b!=n){0>c&&(c=1,f());break}n&&(b=n);if(0<c&&!f(!m))break}}b=Tb(a,z(g,h),c,!0);l||(b.hitSide=!0);return b}function qd(a,b,c,d){var e=a.doc,f=b.left,g;"page"==
d?(d=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(d-(0>c?1.5:0.5)*xa(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){var h=Da(a,f,g);if(!h.outside)break;if(0>c?0>=g:g>=e.height){h.hitSide=!0;break}g+=5*c}return h}function Yc(a,b){var c=b.ch,d=b.ch;if(a){!1===b.after||d==a.length?--c:++d;for(var e=a.charAt(c),e=Vb(e)?Vb:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Vb(a)};0<c&&e(a.charAt(c-
1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:z(b.line,c),to:z(b.line,d)}}function Rd(a,b){Y(a.doc,z(b,0),F(a.doc,z(b+1,0)))}function L(b,c,d,e){a.defaults[b]=c;d&&(Ua[b]=e?function(a,b,c){c!=Mc&&d(a,b,c)}:d)}function Za(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function Qc(a,b,c){return a.startState?a.startState(b,c):!0}function rc(a){return"string"==typeof a?wa[a]:a}function qb(a,
b,c){function d(b){b=rc(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(var e=0,f=b.length;e<f;++e){var g=d(b[e]);if(g)return g}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return f}}function dd(a){a=Ra[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function ed(a,b){var c=Ra[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&
(c="Alt-"+c);if(rd?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(rd?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c}function sb(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lastColumnPos=this.lastColumnValue=0}function Sa(a,b){this.lines=[];this.type=b;this.doc=a}function tb(a,b,c,d,e){if(d&&d.shared)return Yd(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return y(a.cm,tb)(a,b,c,d,e);var f=new Sa(a,e);if("range"==e&&!S(b,c))return f;d&&Wb(d,f);f.replacedWith&&(f.collapsed=!0,f.replacedWith=
A("span",[f.replacedWith],"CodeMirror-widget"));f.collapsed&&(kb=!0);var g=b.line,h=0,k,l,m=a.cm,n;a.iter(g,c.line+1,function(d){m&&f.collapsed&&!m.options.lineWrapping&&Wa(a,d)==m.display.maxLine&&(n=!0);var e={from:null,to:null,marker:f};h+=d.text.length;g==b.line&&(e.from=b.ch,h-=b.ch);g==c.line&&(e.to=c.ch,h-=d.text.length-c.ch);f.collapsed&&(g==c.line&&(l=Ka(d,c.ch)),g==b.line?k=Ka(d,b.ch):oa(d,0));d.markedSpans=d.markedSpans?d.markedSpans.concat([e]):[e];e.marker.attachLine(d);++g});f.collapsed&&
a.iter(b.line,c.line+1,function(b){Ja(a,b)&&oa(b,0)});f.readOnly&&(gd=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());if(f.collapsed){if(k!=l)throw Error("Inserting collapsed marker overlapping an existing one");f.size=h;f.atomic=!0}m&&(n&&(m.curOp.updateMaxLine=!0),(f.className||f.startStyle||f.endStyle||f.collapsed)&&K(m,b.line,c.line+1),f.atomic&&ld(m));return f}function ub(a,b){this.markers=a;this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,I(a[c],"clear",
function(){d.clear()})}function Yd(a,b,c,d,e){d=Wb(d);d.shared=!1;var f=[tb(a,b,c,d,e)],g=f[0],h=d.replacedWith;fb(a,function(a){h&&(d.replacedWith=h.cloneNode(!0));f.push(tb(a,F(a,b),F(a,c),d,e));for(var R=0;R<a.linked.length;++R)if(a.linked[R].isParent)return;g=Z(f)});return new ub(f,g)}function vb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function xc(a,b){var c=Qa(a,b.from.line)&&B(a,b.from.line).markedSpans,d=Qa(a,b.to.line)&&B(a,b.to.line).markedSpans;if(!c&&!d)return null;
var e=b.from.ch,f=b.to.ch,g=O(b.from,b.to);if(c)for(var h=0,k;h<c.length;++h){var l=c[h],m=l.marker;if(null==l.from||(m.inclusiveLeft?l.from<=e:l.from<e)||"bookmark"==m.type&&!(l.from!=e||g&&l.marker.insertLeft)){var n=null==l.to||(m.inclusiveRight?l.to>=e:l.to>e);(k||(k=[])).push({from:l.from,to:n?null:l.to,marker:m})}}c=k;if(d)for(var h=0,p;h<d.length;++h)if(k=d[h],l=k.marker,null==k.to||(l.inclusiveRight?k.to>=f:k.to>f)||"bookmark"==l.type&&k.from==f&&(!g||k.marker.insertLeft))m=null==k.from||
(l.inclusiveLeft?k.from<=f:k.from<f),(p||(p=[])).push({from:m?null:k.from-f,to:null==k.to?null:k.to-f,marker:l});d=p;g=1==b.text.length;p=Z(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(h=c[f],null==h.to)(k=vb(d,h.marker),k)?g&&(h.to=null==k.to?null:k.to+p):h.to=e;if(d)for(f=0;f<d.length;++f)h=d[f],null!=h.to&&(h.to+=p),null==h.from?(k=vb(c,h.marker),k||(h.from=p,g&&(c||(c=[])).push(h))):(h.from+=p,g&&(c||(c=[])).push(h));e=[c];if(!g){var g=b.text.length-2,r;if(0<g&&c)for(f=0;f<c.length;++f)null==
c[f].to&&(r||(r=[])).push({from:null,to:null,marker:c[f].marker});for(f=0;f<g;++f)e.push(r);e.push(d)}return e}function jd(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(Zd(c[d]));c=e}else c=null;d=xc(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var h=0;a:for(;h<g.length;++h){for(var k=g[h],l=0;l<f.length;++l)if(f[l].marker==k.marker)continue a;f.push(k)}}else g&&(c[e]=g)}return c}function Vd(a,b,c){var d=null;a.iter(b.line,c.line+
1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=va(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(),f=0;f<a.length;++f){var g=a[f];if(!S(g.to,e.from)&&!S(e.to,g.from)){var h=[f,1];(S(g.from,e.from)||!c.inclusiveLeft&&O(g.from,e.from))&&h.push({from:g.from,to:e.from});(S(e.to,g.to)||!c.inclusiveRight&&O(g.to,e.to))&&h.push({from:e.to,to:g.to});a.splice.apply(a,
h);f+=h.length-1}}}return a}function Ka(a,b){var c=kb&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!d||d.width<e.marker.width)&&(d=e.marker);return d}function jb(a){return Ka(a,a.text.length+1)}function Wa(a,b){for(var c;c=Ka(b,-1);)b=B(a,c.find().from.line);return b}function Ja(a,b){var c=kb&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||0==d.from&&d.marker.inclusiveLeft&&
Dc(a,b,d)))return!0}function Dc(a,b,c){if(null==c.to)return b=c.marker.find().to,b=B(a,b.line),Dc(a,b,vb(b.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&d.from==c.to&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Dc(a,b,d))return!0}function sd(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function td(a,b){if(b){for(var c=
0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function ud(a){return function(){var b=!this.cm.curOp;b&&M(this.cm);try{var c=a.apply(this,arguments)}finally{b&&Aa(this.cm)}return c}}function Gb(a){if(null!=a.height)return a.height;a.node.parentNode&&1==a.node.parentNode.nodeType||ra(a.cm.display.measure,A("div",[a.node],null,"position: relative"));return a.height=a.node.offsetHeight}function $d(a,b,c,d){var e=new Ec(a,c,d);e.noHScroll&&(a.display.alignWidgets=!0);Ub(a,b,function(b){(b.widgets||
(b.widgets=[])).push(e);e.line=b;if(!Ja(a.doc,b)||e.showIfHidden){var c=Xa(a,b)<a.display.scroller.scrollTop;oa(b,b.height+Gb(e));c&&nd(a,0,e.height)}return!0});return e}function wb(a,b,c){a={text:a};td(a,b);a.height=c?c(a):1;return a}function vd(a,b,c,d,e){var f=c.flattenSpans;null==f&&(f=a.options.flattenSpans);var g="",h=null;a=new sb(b,a.options.tabSize);for(""==b&&c.blankLine&&c.blankLine(d);!a.eol();){var k=c.token(a,d);5E3<a.pos&&(f=!1,a.pos=Math.min(b.length,a.start+5E4),k=null);var l=a.current();
a.start=a.pos;f&&h==k?g+=l:(g&&e(g,h),g=l,h=k)}g&&e(g,h)}function Oc(a,b,c){var d=[a.state.modeGen];vd(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(c=0;c<a.state.overlays.length;++c){var e=a.state.overlays[c],f=1;vd(a,b.text,e.mode,!0,function(a,b){for(var c=f,g=a.length;g;){var h=d[f],R=h.length;R<=g?g-=R:(d.splice(f,1,h.slice(0,g),d[f+1],h.slice(g)),g=0);f+=2}if(b)if(e.opaque)d.splice(c,f-c,a,b),f=c+2;else for(;c<f;c+=2)h=d[c+1],d[c+1]=h?h+" "+b:b})}return d}function Pc(a,b,c){var d=a.doc.mode;
a=new sb(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!a.eol()&&5E3>=a.pos;)d.token(a,c),a.start=a.pos}function wd(a){return a?xd[a]||(xd[a]="cm-"+a.replace(/ +/g," cm-")):null}function jc(a,b,c){for(var d,e=b,f,g,h=!0;d=Ka(e,-1);)h=!1,e=B(a.doc,d.find().from.line),f||(f=e);d={pre:A("pre"),col:0,pos:0,display:!c,measure:null,addedOne:!1,cm:a};e.textClass&&(d.pre.className=e.textClass);do{d.measure=e==b&&c;d.pos=0;d.addToken=d.measure?ae:yd;(X||ja)&&a.getOption("lineWrapping")&&
(d.addToken=be(d.addToken));c&&g&&e!=b&&!d.addedOne&&(c[0]=d.pre.appendChild(Kb(a.display.measure)),d.addedOne=!0);var k=e;g=d;var l=e;l.styles&&l.styles[0]==a.state.modeGen||(l.styles=Oc(a,l,l.stateAfter=sa(a,ea(l))));a:{var m=k,l=l.styles;if(k=m.markedSpans)for(var m=m.text.length,n=0,p=1,r="",q=void 0,y=0,t=void 0,s=void 0,u=void 0,C=void 0;;){if(y==n){for(var t=s=u="",C=null,y=Infinity,w=null,Q=0;Q<k.length;++Q){var H=k[Q],K=H.marker;H.from<=n&&(null==H.to||H.to>n)?(null!=H.to&&y>H.to&&(y=H.to,
s=""),K.className&&(t+=" "+K.className),K.startStyle&&H.from==n&&(u+=" "+K.startStyle),K.endStyle&&H.to==y&&(s+=" "+K.endStyle),K.collapsed&&(!C||C.marker.width<K.width)&&(C=H)):H.from>n&&y>H.from&&(y=H.from);"bookmark"==K.type&&H.from==n&&K.replacedWith&&(w=K.replacedWith)}if(C&&(C.from||0)==n&&(zd(g,(null==C.to?m:C.to)-n,null!=C.from&&C.marker.replacedWith),null==C.to)){l=C.marker.find();break a}w&&!C&&zd(g,0,w)}if(n>=m)break;for(w=Math.min(m,y);;){if(r){Q=n+r.length;C||(H=Q>w?r.slice(0,w-n):r,
g.addToken(g,H,q?q+t:t,u,n+H.length==y?s:""));if(Q>=w){r=r.slice(w-n);n=w;break}n=Q;u=""}r=l[p++];q=wd(l[p++])}}else for(var p=1;p<l.length;p+=2)g.addToken(g,l[p],wd(l[p+1]));l=void 0}g=e==f;l&&(e=B(a.doc,l.to.line),h=!1)}while(l);c&&!d.addedOne&&(c[0]=d.pre.appendChild(h?A("span","\u00a0"):Kb(a.display.measure)));d.pre.firstChild||Ja(a.doc,b)||d.pre.appendChild(document.createTextNode("\u00a0"));var v;c&&X&&(v=qa(e))&&(f=v.length-1,v[f].from==v[f].to&&--f,e=v[f],v=v[f-1],e.from+1==e.to&&v&&e.level<
v.level&&(c=c[d.pos-1])&&c.parentNode.insertBefore(c.measureRight=Kb(a.display.measure),c.nextSibling));ba(a,"renderLine",a,b,d.pre);return d.pre}function yd(a,b,c,d,e){if(b){if(Fc.test(b))for(var f=document.createDocumentFragment(),g=0;;){Fc.lastIndex=g;var h=Fc.exec(b),k=h?h.index-g:b.length-g;k&&(f.appendChild(document.createTextNode(b.slice(g,g+k))),a.col+=k);if(!h)break;g+=k+1;"\t"==h[0]?(h=a.cm.options.tabSize,h-=a.col%h,f.appendChild(A("span",od(h),"cm-tab")),a.col+=h):(k=A("span","\u2022",
"cm-invalidchar"),k.title="\\u"+h[0].charCodeAt(0).toString(16),f.appendChild(k),a.col+=1)}else{a.col+=b.length;var f=document.createTextNode(b)}if(c||d||e||a.measure)return b=c||"",d&&(b+=d),e&&(b+=e),a.pre.appendChild(A("span",[f],b));a.pre.appendChild(f)}}function ae(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var h=b.charAt(g),k=0==g;"\ud800"<=h&&"\udbff">h&&g<b.length-1?(h=b.slice(g,g+2),++g):g&&f&&Xb.test(b.slice(g-1,g+1))&&a.pre.appendChild(A("wbr"));k=a.measure[a.pos]=
yd(a,h,c,k&&d,g==b.length-1&&e);X&&f&&" "==h&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(k.style.whiteSpace="normal");a.pos+=h.length}b.length&&(a.addedOne=!0)}function be(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,d,e,f,g){return a(c,d.replace(/ {3,}/,b),e,f,g)}}function zd(a,b,c){c&&(a.display||(c=c.cloneNode(!0)),a.pre.appendChild(c),a.measure&&b&&(a.measure[a.pos]=c,a.addedOne=!0));a.pos+=b}function Ac(a,
b,c,d,e){function f(a,c,d){var g=e;a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);sd(a);td(a,d);c=g?g(a):1;c!=a.height&&oa(a,c);pa(a,"change",a,b)}var g=b.from,h=b.to,k=b.text,l=B(a,g.line),m=B(a,h.line),n=Z(k),p=c?c[k.length-1]:null,r=h.line-g.line;if(0==g.ch&&0==h.ch&&""==n){for(var q=0,y=k.length-1,t=[];q<y;++q)t.push(wb(k[q],c?c[q]:null,e));f(m,m.text,p);r&&a.remove(g.line,r);t.length&&a.insert(g.line,t)}else if(l==m)if(1==k.length)f(l,l.text.slice(0,
g.ch)+n+l.text.slice(h.ch),p);else{t=[];q=1;for(y=k.length-1;q<y;++q)t.push(wb(k[q],c?c[q]:null,e));t.push(wb(n+l.text.slice(h.ch),p,e));f(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null);a.insert(g.line+1,t)}else if(1==k.length)f(l,l.text.slice(0,g.ch)+k[0]+m.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,r);else{f(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null);f(m,n+m.text.slice(h.ch),p);q=1;y=k.length-1;for(t=[];q<y;++q)t.push(wb(k[q],c?c[q]:null,e));1<r&&a.remove(g.line+1,r-1);a.insert(g.line+1,t)}pa(a,"change",
a,b);Ba(a,d.anchor,d.head,null,!0)}function Yb(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function xb(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function fb(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var R=f&&h.sharedHist;if(!c||R)b(h.doc,R),d(h.doc,a,R)}}}
d(a,null,!0)}function Lc(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;d(a);c(a);a.options.lineWrapping||l(a);a.options.mode=b.modeOption;K(a)}function B(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function zc(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function Gc(a,b,c){var d=[];
a.iter(b,c,function(a){d.push(a.text)});return d}function oa(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function ea(a){if(null==a.parent)return null;var b=a.parent;a=va(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Fb(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<
e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function Xa(a,b){b=Wa(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;else c+=f.height}for(f=d.parent;f;d=f,f=d.parent)for(e=0;e<f.children.length;++e){var g=f.children[e];if(g==d)break;else c+=g.height}return c}function qa(a){var b=a.order;null==b&&(b=a.order=ce(a.text));return b}function Zb(){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function Ad(a,
b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function yc(a,b){var c={from:b.from,to:uc(b),text:zc(a,b.from,b.to)};Ad(a,c,b.from.line,b.to.line+1);fb(a,function(a){Ad(a,c,b.from.line,b.to.line+1)},!0);return c}function Wd(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Z(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&e.lastTime>
f-600||"*"==b.origin.charAt(0)))){var h=Z(g.changes);O(b.from,b.to)&&O(b.from,h.to)?h.to=uc(b):g.changes.push(yc(a,b));g.anchorAfter=c.anchor;g.headAfter=c.head}else{g={changes:[yc(a,b)],anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head};for(e.done.push(g);e.done.length>e.undoDepth;)e.done.shift();0>e.dirtyCounter?e.dirtyCounter=NaN:e.dirtyCounter++}e.lastTime=f;e.lastOp=d;e.lastOrigin=b.origin}function Zd(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?
c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function $b(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(e=0;e<f.length;++e){var h=f[e],k;g.push({from:h.from,to:h.to,text:h.text});if(b)for(var l in h)(k=l.match(/^spans_(\d+)$/))&&-1<va(b,Number(k[1]))&&(Z(g)[l]=h[l],delete h[l])}}return d}function ac(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=
b,a.ch=0)}function Bd(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,h=0;h<f.changes.length;++h){var k=f.changes[h];f.copied||(k.from=Pa(k.from),k.to=Pa(k.to));if(c<k.from.line)k.from.line+=d,k.to.line+=d;else if(b<=k.to.line){g=!1;break}}f.copied||(f.anchorBefore=Pa(f.anchorBefore),f.headBefore=Pa(f.headBefore),f.anchorAfter=Pa(f.anchorAfter),f.readAfter=Pa(f.headAfter),f.copied=!0);g?(ac(f.anchorBefore),ac(f.headBefore),ac(f.anchorAfter),ac(f.headAfter)):(a.splice(0,e+1),e=0)}}function hd(a,
b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Bd(a.done,c,d,e);Bd(a.undone,c,d,e)}function de(){Mb(this)}function nb(a){a.stop||(a.stop=de);return a}function U(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Cd(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Mb(a){U(a);Cd(a)}function Zc(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Ya&&a.ctrlKey&&1==b&&(b=3);return b}function I(a,b,c){a.addEventListener?a.addEventListener(b,
c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))}function ta(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}}function ba(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function pa(a,b){function c(a){return function(){a.apply(null,
e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);za||(++Jb,za=[],setTimeout(ee,0));for(var f=0;f<d.length;++f)za.push(c(d[f]))}}function ee(){--Jb;var a=za;za=null;for(var b=0;b<a.length;++b)a[b]()}function db(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function fc(){this.id=null}function $a(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function od(a){for(;bc.length<=
a;)bc.push(Z(bc)+" ");return bc[a]}function Z(a){return a[a.length-1]}function Uc(a){gb?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function va(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function Wb(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function Rc(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}function ha(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,
b)}}function Vb(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||fe.test(a))}function Dd(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function A(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)Nc(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Db(a){if(X)for(;a.firstChild;)a.removeChild(a.firstChild);else a.innerHTML="";return a}function ra(a,b){return Db(a).appendChild(b)}function Nc(a,
b){La?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function T(a){return a.getBoundingClientRect()}function Eb(a){if(null!=cc)return cc;var b=A("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");ra(a,b);b.offsetWidth&&(cc=b.offsetHeight-b.clientHeight);return cc||0}function Kb(a){if(null==Hc){var b=A("span","\u200b");ra(a,A("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Hc=1>=b.offsetWidth&&2<b.offsetHeight&&!Va)}return Hc?A("span",
"\u200b"):A("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Jd(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=0;e<a.length;++e){var f=a[e];(f.from<c&&f.to>b||b==c&&f.to==b)&&d(Math.max(f.from,b),Math.min(f.to,c),1==f.level?"rtl":"ltr")}}function Ic(a){return a.level%2?a.to:a.from}function Jc(a){return a.level%2?a.from:a.to}function Hb(a){return(a=qa(a))?Ic(a[0]):0}function Ib(a){var b=qa(a);return b?Jc(Z(b)):a.text.length}function Ed(a,b){var c=B(a.doc,b),d=Wa(a.doc,
c);d!=c&&(b=ea(d));d=(c=qa(d))?c[0].level%2?Ib(d):Hb(d):0;return z(b,d)}function ge(a,b){for(var c,d;c=jb(d=B(a.doc,b));)b=c.find().to.line;d=(c=qa(d))?c[0].level%2?Hb(d):Ib(d):d.text.length;return z(b,d)}function kc(a,b,c,d){var e=qa(a);if(!e)return pd(a,b,c,d);d=d?function(b,c){do b+=c;while(0<b&&lc.test(a.text.charAt(b)));return b}:function(a,b){return a+b};for(var f=e[0].level,g=0;g<e.length;++g){var h=e[g],k=h.level%2==f;if(h.from<b&&h.to>b||k&&(h.from==b||h.to==b))break}for(b=d(b,h.level%2?
-c:c);null!=b;)if(h.level%2==f)if(b<h.from||b>h.to)b=(h=e[g+=c])&&(0<c==h.level%2?d(h.to,-1):d(h.from,1));else break;else if(b==Ic(h))b=(h=e[--g])&&Jc(h);else if(b==Jc(h))b=(h=e[++g])&&Ic(h);else break;return 0>b||b>a.text.length?null:b}function pd(a,b,c,d){b+=c;if(d)for(;0<b&&lc.test(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var eb=/gecko\/\d/i.test(navigator.userAgent),X=/MSIE \d/.test(navigator.userAgent),Va=X&&(null==document.documentMode||8>document.documentMode),La=X&&(null==
document.documentMode||9>document.documentMode),ja=/WebKit\//.test(navigator.userAgent),he=ja&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ie=/Chrome\//.test(navigator.userAgent),ua=/Opera\//.test(navigator.userAgent),pc=/Apple Computer/.test(navigator.vendor),ic=/KHTML\//.test(navigator.userAgent),Hd=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Id=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Ld=/PhantomJS/.test(navigator.userAgent),gb=/AppleWebKit/.test(navigator.userAgent)&&
/Mobile\/\w+/.test(navigator.userAgent),ec=gb||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Ya=gb||/Mac/.test(navigator.platform),je=/windows/i.test(navigator.platform),yb=ua&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);yb&&(yb=Number(yb[1]));var rd=Ya&&(he||ua&&(null==yb||12.11>yb)),oc=eb||X&&!La,gd=!1,kb=!1,Ma,Kd=0,Ob,Nb,Pb=0,la=null;X?la=-0.53:eb?la=15:ie?la=-0.7:pc&&(la=-1/3);var cd,sc=null,tc;a.Pos=z;a.prototype={focus:function(){window.focus();da(this);
Ia(this);lb(this)},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Ua.hasOwnProperty(a)&&y(this,Ua[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a){this.state.keyMaps.push(a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(("string"==typeof a?b[c].name:b[c])==a)return b.splice(c,1),!0},addOverlay:y(null,function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");
this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque});this.state.modeGen++;K(this)}),removeOverlay:y(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c)if(b[c].modeSpec==a){b.splice(c,1);this.state.modeGen++;K(this);break}}),indentLine:y(null,function(a,b,c){"string"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");Qa(this.doc,a)&&Rb(this,a,b,c)}),indentSelection:y(null,function(a){var b=this.doc.sel;if(O(b.from,b.to))return Rb(this,b.from.line,
a);for(var c=b.to.line-(b.to.ch?0:1),b=b.from.line;b<=c;++b)Rb(this,b,a)}),getTokenAt:function(a){var b=this.doc;a=F(b,a);for(var c=sa(this,a.line),d=this.doc.mode,b=B(b,a.line),b=new sb(b.text,this.options.tabSize);b.pos<a.ch&&!b.eol();){b.start=b.pos;var e=d.token(b,c)}return{start:b.start,end:b.pos,string:b.current(),className:e||null,type:e||null,state:c}},getStateAfter:function(a){var b=this.doc;a=Math.max(b.first,Math.min(null==a?b.first+b.size-1:a,b.first+b.size-1));return sa(this,a+1)},cursorCoords:function(a,
b){var c;c=this.doc.sel;c=null==a?c.head:"object"==typeof a?F(this.doc,a):a?c.from:c.to;return $(this,c,b||"page")},charCoords:function(a,b){return Ca(this,F(this.doc,a),b||"page")},coordsChar:function(a,b){var c=b||"page";if("div"!=c){var d=a.left,e=a.top;"page"==c&&(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,e-=window.pageYOffset||(document.documentElement||document.body).scrollTop);var f=T(this.display.lineSpace),d=d-f.left,e=e-f.top;"local"!=c&&c||(c=T(this.display.wrapper),
d-=c.left,e-=c.top);a={left:d,top:e}}return Da(this,a.left,a.top)},defaultTextHeight:function(){return xa(this.display)},defaultCharWidth:function(){return ib(this.display)},setGutterMarker:y(null,function(a,b,c){return Ub(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&Dd(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:y(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,K(b,d,d+1),Dd(c.gutterMarkers)&&
(c.gutterMarkers=null));++d})}),addLineClass:y(null,function(a,b,c){return Ub(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(RegExp("\\b"+c+"\\b").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:y(null,function(a,b,c){return Ub(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.replace(RegExp("^"+c+"\\b\\s*|\\s*\\b"+c+"\\b"),"");if(f==e)return!1;
a[d]=f||null}else return!1;return!0})}),addLineWidget:y(null,function(a,b,c){return $d(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!Qa(this.doc,a))return null;var b=a;a=B(this.doc,a);if(!a)return null}else if(b=ea(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,
to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=$(this,F(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var k=Math.max(f.wrapper.clientHeight,this.doc.height),l=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>l&&(h=l-b.offsetWidth)}b.style.top=
g+f.lineSpace.offsetTop+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&md(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:y(null,Xc),execCommand:function(a){return qc[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=F(this.doc,a);f<b&&(a=Cc(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:y(null,function(a,
b){var c=this.doc.sel,c=c.shift||c.extend||O(c.from,c.to)?Cc(this.doc,c.head,a,b,this.options.rtlMoveVisually):0>a?c.from:c.to;Y(this.doc,c,c,a)}),deleteH:y(null,function(a,b){var c=this.doc.sel;O(c.from,c.to)?Oa(this.doc,"",c.from,Cc(this.doc,c.head,a,b,!1),"+delete"):Oa(this.doc,"",c.from,c.to,"+delete");this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=F(this.doc,a);f<b&&(a=$(this,a,"div"),null==d?d=a.left:a.left=d,a=qd(this,a,e,c),!a.hitSide);++f);
return a},moveV:y(null,function(a,b){var c=this.doc.sel,d=$(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var e=qd(this,d,a,b);"page"==b&&nd(this,0,Ca(this,e,"div").top-d.top);Y(this.doc,e,e,a);c.goalColumn=d.left}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},
scrollTo:y(null,function(a,b){Bc(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=hb;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:function(a,b){"number"==typeof a&&(a=z(a,0));a&&null==a.line?md(this,a.left,a.top-b,a.right,a.bottom+b):(a=a?F(this.doc,a):this.doc.sel.head,Sc(this,a,b))},setSize:function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?
a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.refresh()},on:function(a,b){I(this,a,b)},off:function(a,b){ta(this,a,b)},operation:function(a){return Q(this,a)},refresh:y(null,function(){W(this);Bc(this,this.doc.scrollLeft,this.doc.scrollTop);K(this)}),swapDoc:y(null,function(a){var b=this.doc;b.cm=null;Lc(this,a);W(this);Bc(this,a.scrollLeft,a.scrollTop);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},
getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Ua=a.optionHandlers={},dc=a.defaults={},Mc=a.Init={toString:function(){return"CodeMirror.Init"}};L("value","",function(a,b){a.setValue(b)},!0);L("mode",null,function(a,b){a.doc.modeOption=b;c(a)},!0);L("indentUnit",2,c,!0);L("indentWithTabs",!1);L("smartIndent",!0);L("tabSize",4,function(a){c(a);W(a);K(a)},!0);L("electricChars",!0);L("rtlMoveVisually",!je);L("theme","default",
function(a){f(a);g(a)},!0);L("keyMap","default",function(a){var b=wa[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")});L("extraKeys",null);L("onKeyEvent",null);L("onDragEvent",null);L("lineWrapping",!1,function(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),l(a));
d(a);K(a);W(a);setTimeout(function(){n(a.display,a.doc.height)},100)},!0);L("gutters",[],function(a){m(a.options);g(a)},!0);L("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?t(a.display)+"px":"0";a.refresh()},!0);L("lineNumbers",!1,function(a){m(a.options);g(a)},!0);L("firstLineNumber",1,g,!0);L("lineNumberFormatter",function(a){return a},g,!0);L("showCursorWhenSelecting",!1,G,!0);L("readOnly",!1,function(a,b){"nocursor"==b?(gc(a),a.display.input.blur()):b||Ha(a,!0)});L("dragDrop",!0);
L("cursorBlinkRate",530);L("cursorHeight",1);L("workTime",100);L("workDelay",100);L("flattenSpans",!0);L("pollInterval",100);L("undoDepth",40,function(a,b){a.doc.history.undoDepth=b});L("viewportMargin",10,function(a){a.refresh()},!0);L("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});L("autofocus",null);var Fd=a.modes={},Kc=a.mimeModes={};a.defineMode=function(b,c){a.defaults.mode||"null"==b||(a.defaults.mode=b);if(2<arguments.length){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}Fd[b]=
c};a.defineMIME=function(a,b){Kc[a]=b};a.resolveMode=function(b){if("string"==typeof b&&Kc.hasOwnProperty(b))b=Kc[b];else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}};a.getMode=function(b,c){c=a.resolveMode(c);var d=Fd[c.name];if(!d)return a.getMode(b,"text/plain");d=d(b,c);if(zb.hasOwnProperty(c.name)){var e=zb[c.name],f;for(f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=
e[f])}d.name=c.name;return d};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var zb=a.modeExtensions={};a.extendMode=function(a,b){var c=zb.hasOwnProperty(a)?zb[a]:zb[a]={};Wb(b,c)};a.defineExtension=function(b,c){a.prototype[b]=c};a.defineOption=L;var hc=[];a.defineInitHook=function(a){hc.push(a)};a.copyState=Za;a.startState=Qc;a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);b=c.state;a=c.mode}return c||{mode:a,state:b}};
var qc=a.commands={selectAll:function(a){a.setSelection(z(a.firstLine(),0),z(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!O(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:z(b.line),"+delete"):a.replaceRange("",b,z(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",z(b,0),z(b),"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(z(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(z(a.lastLine()))},
goLineStart:function(a){a.extendSelection(Ed(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=Ed(a,b.line),d=a.getLineHandle(c.line),e=qa(d);e&&0!=e[0].level?a.extendSelection(c):(d=Math.max(0,d.text.search(/\S/)),a.extendSelection(z(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d)))},goLineEnd:function(a){a.extendSelection(ge(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+
100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,
"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},
indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),z(b.line,b.ch-1),z(b.line,b.ch+1))},newlineAndIndent:function(a){y(a,function(){a.replaceSelection("\n","end","+input");a.indentLine(a.getCursor().line,
null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},wa=a.keyMap={};wa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};wa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart",
"Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};wa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo",
"Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};
wa["default"]=Ya?wa.macDefault:wa.pcDefault;wa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};a.lookupKey=qb;a.isModifierKey=dd;a.keyName=ed;a.fromTextArea=function(b,
c){function d(){b.value=m.getValue()}c||(c={});c.value=b.value;!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex);!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder);if(null==c.autofocus){var e=document.body;try{e=document.activeElement}catch(f){}c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(I(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var g=b.form,h=g.submit;try{var k=g.submit=function(){d();g.submit=h;g.submit();g.submit=k}}catch(l){}}b.style.display=
"none";var m=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);m.save=d;m.getTextArea=function(){return b};m.toTextArea=function(){d();b.parentNode.removeChild(m.getWrapperElement());b.style.display="";b.form&&(ta(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=h))};return m};sb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},
eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<
this.start&&(this.lastColumnValue=$a(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue},indentation:function(){return $a(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==
b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)}};a.StringStream=sb;a.TextMarker=Sa;Sa.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&M(a);for(var c=null,d=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=vb(f.markedSpans,this);null!=g.to&&(d=ea(f));for(var h=f,l=f.markedSpans,m=g,n=void 0,p=0;p<l.length;++p)l[p]!=m&&(n||(n=[])).push(l[p]);h.markedSpans=n;null!=g.from?c=ea(f):this.collapsed&&!Ja(this.doc,
f)&&a&&oa(f,xa(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=Wa(a.doc,this.lines[e]),g=k(a.doc,f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&K(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&ld(a));b&&Aa(a);pa(this,"clear")}};Sa.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],
e=vb(d.markedSpans,this);if(null!=e.from||null!=e.to)d=ea(d),null!=e.from&&(a=z(d,e.from)),null!=e.to&&(b=z(d,e.to))}return"bookmark"==this.type?a:a&&{from:a,to:b}};Sa.prototype.getOptions=function(a){var b=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,clearOnEnter:this.clearOnEnter,replacedWith:a?b&&b.cloneNode(!0):b,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}};
Sa.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=va(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Sa.prototype.detachLine=function(a){this.lines.splice(va(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};a.SharedTextMarker=ub;ub.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();pa(this,"clear")}};ub.prototype.find=function(){return this.primary.find()};ub.prototype.getOptions=function(a){a=this.primary.getOptions(a);a.shared=!0;return a};var Ec=a.LineWidget=function(a,b,c){for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};Ec.prototype.clear=ud(function(){var a=this.line.widgets,b=ea(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=
null);oa(this.line,Math.max(0,this.line.height-Gb(this)));K(this.cm,b,b+1)}});Ec.prototype.changed=ud(function(){var a=this.height;this.height=null;if(a=Gb(this)-a)oa(this.line,this.line.height+a),a=ea(this.line),K(this.cm,a,a+1)});var xd={},Fc=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;Yb.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;sd(f);pa(e,"delete")}this.lines.splice(a,
b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};xb.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,
e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(c=[],this.collapse(c),this.children=[new Yb(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertInner(a,
b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new Yb(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new xb(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=va(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new xb(a.children),c.parent=a,a.children=[c,b],a=c;
b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){g=Math.min(b,g-a);if(f.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};var ke=0,ga=a.Doc=function(a,b,c){if(!(this instanceof ga))return new ga(a,b,c);null==c&&(c=0);xb.call(this,[new Yb([wb("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.history=Zb();this.frontier=c;c=z(c,0);
this.sel={from:c,to:c,head:c,anchor:c,shift:!1,extend:!1,goalColumn:null};this.id=++ke;this.modeOption=b;"string"==typeof a&&(a=Na(a));Ac(this,{from:c,to:c,text:a},null,{head:c,anchor:c})};ga.prototype=function(a,b){function c(){}c.prototype=a;var d=new c;b&&Wb(b,d);return d}(xb.prototype,{iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,
b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Gc(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:function(a){var b=z(this.first,0),c=this.first+this.size-1;bb(this,{from:b,to:z(c,B(this,c).text.length),text:Na(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=F(this,b);c=c?F(this,c):b;Oa(this,a,b,c,d)},getRange:function(a,b,c){a=zc(this,F(this,a),F(this,b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&
a.text},setLine:function(a,b){Qa(this,a)&&Oa(this,b,z(a,0),F(this,z(a)))},removeLine:function(a){Qa(this,a)&&Oa(this,"",z(a,0),F(this,z(a+1,0)))},getLineHandle:function(a){if(Qa(this,a))return B(this,a)},getLineNumber:function(a){return ea(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return F(this,a)},getCursor:function(a){var b=this.sel;return Pa(null==a||"head"==a?b.head:"anchor"==a?b.anchor:
"end"==a||!1===a?b.to:b.from)},somethingSelected:function(){return!O(this.sel.head,this.sel.anchor)},setCursor:H(function(a,b,c){a=F(this,"number"==typeof a?z(a,b||0):a);c?Y(this,a):Ba(this,a,a)}),setSelection:H(function(a,b){Ba(this,F(this,a),F(this,b||a))}),extendSelection:H(function(a,b){Y(this,F(this,a),b&&F(this,b))}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){bb(this,{from:this.sel.from,to:this.sel.to,text:Na(a),origin:c},b||
"around")},undo:H(function(){id(this,"undo")}),redo:H(function(){id(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=Zb()},markClean:function(){this.history.dirtyCounter=0;this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return 0==this.history.dirtyCounter},getHistory:function(){return{done:$b(this.history.done),undone:$b(this.history.undone)}},
setHistory:function(a){var b=this.history=Zb();b.done=a.done.slice(0);b.undone=a.undone.slice(0)},markText:function(a,b,c){return tb(this,F(this,a),F(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft};a=F(this,a);return tb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=F(this,a);var b=[],c=B(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||
e.marker)}return b},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return F(this,z(c,b))},indexFromPos:function(a){a=F(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new ga(Gc(this,
this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn};a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new ga(Gc(this,
b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];return b},unlinkDoc:function(b){b instanceof a&&(b=b.doc);if(this.linked)for(var c=0;c<this.linked.length;++c)if(this.linked[c].doc==b){this.linked.splice(c,1);b.unlinkDoc(this);break}if(b.history==this.history){var d=[b.id];fb(b,function(a){d.push(a.id)},!0);b.history=Zb();b.history.done=$b(this.history.done,
d);b.history.undone=$b(this.history.undone,d)}},iterLinkedDocs:function(a){fb(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});ga.prototype.eachLine=ga.prototype.iter;var le=["iter","insert","remove","copy","getEditor"],Ab;for(Ab in ga.prototype)ga.prototype.hasOwnProperty(Ab)&&0>va(le,Ab)&&(a.prototype[Ab]=function(a){return function(){return a.apply(this.doc,arguments)}}(ga.prototype[Ab]));a.e_stop=Mb;a.e_preventDefault=U;a.e_stopPropagation=Cd;var za,Jb=0;a.on=
I;a.off=ta;a.signal=ba;var hb=30,$c=a.Pass={toString:function(){return"CodeMirror.Pass"}};fc.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};a.countColumn=$a;var bc=[""],fe=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,lc=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;a.replaceGetRect=
function(a){T=a};var Sd=function(){if(La)return!1;var a=A("div");return"draggable"in a||"dragDrop"in a}(),Xb=/^$/;eb?Xb=/$'/:pc&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?Xb=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:ja&&(Xb=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var cc,Hc,Na=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?
(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=Na;var Md=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Tc=function(){var a=A("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),Ra={3:"Enter",
8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",
63272:"Delete"};a.keyNames=Ra;(function(){for(var a=0;10>a;a++)Ra[a+48]=String(a);for(a=65;90>=a;a++)Ra[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Ra[a+111]=Ra[a+63235]="F"+a})();var ce=function(){function a(d){return 255>=d?b.charAt(d):1424<=d&&1524>=d?"R":1536<=d&&1791>=d?c.charAt(d-1536):1792<=d&&2220>=d?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",
c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/;return function(b){if(!d.test(b))return!1;for(var c=b.length,k=[],l=0,m;l<c;++l)k.push(a(b.charCodeAt(l)));for(var l=0,n="L";l<c;++l)m=k[l],"m"==m?k[l]=n:
n=m;l=0;for(n="L";l<c;++l)m=k[l],"1"==m&&"r"==n?k[l]="n":f.test(m)&&(n=m,"r"==m&&(k[l]="R"));l=1;for(n=k[0];l<c-1;++l)m=k[l],"+"==m&&"1"==n&&"1"==k[l+1]?k[l]="1":","!=m||n!=k[l+1]||"1"!=n&&"n"!=n||(k[l]=n),n=m;for(l=0;l<c;++l)if(m=k[l],","==m)k[l]="N";else if("%"==m){for(n=l+1;n<c&&"%"==k[n];++n);var p=l&&"!"==k[l-1]||n<c-1&&"1"==k[n]?"1":"N";for(m=l;m<n;++m)k[m]=p;l=n-1}l=0;for(n="L";l<c;++l)m=k[l],"L"==n&&"1"==m?k[l]="L":f.test(m)&&(n=m);for(l=0;l<c;++l)if(e.test(k[l])){for(n=l+1;n<c&&e.test(k[n]);++n);
m="L"==(n<c-1?k[n]:"L");p="L"==(l?k[l-1]:"L")||m?"L":"R";for(m=l;m<n;++m)k[m]=p;l=n-1}for(var n=[],r,l=0;l<c;)if(g.test(k[l])){m=l;for(++l;l<c&&g.test(k[l]);++l);n.push({from:m,to:l,level:0})}else{var q=l,p=n.length;for(++l;l<c&&"L"!=k[l];++l);for(m=q;m<l;)if(h.test(k[m])){q<m&&n.splice(p,0,{from:q,to:m,level:1});q=m;for(++m;m<l&&h.test(k[m]);++m);n.splice(p,0,{from:q,to:m,level:2});q=m}else++m;q<l&&n.splice(p,0,{from:q,to:l,level:1})}1==n[0].level&&(r=b.match(/^\s+/))&&(n[0].from=r[0].length,n.unshift({from:0,
to:r[0].length,level:0}));1==Z(n).level&&(r=b.match(/\s+$/))&&(Z(n).to-=r[0].length,n.push({from:c-r[0].length,to:c,level:0}));n[0].level!=Z(n).level&&n.push({from:c,to:c,level:n[0].level});return n}}();a.version="3.1 +";return a}();
CodeMirror.defineMode("css",function(a){function b(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=!0;return b}function c(a,b){l=b;return a}function e(a,b){var e=a.next();if("@"==e)return a.eatWhile(/[\w\\\-]/),c("def",a.current());if("/"==e&&a.eat("*"))return b.tokenize=d,d(a,b);if("<"==e&&a.eat("!"))return b.tokenize=f,f(a,b);if("="==e)c(null,"compare");else if("~"!=e&&"|"!=e||!a.eat("=")){if('"'==e||"'"==e)return b.tokenize=g(e),b.tokenize(a,b);if("#"==e)return a.eatWhile(/[\w\\\-]/),c("atom","hash");
if("!"==e)return a.match(/^\s*\w*/),c("keyword","important");if(/\d/.test(e))return a.eatWhile(/[\w.%]/),c("number","unit");if("-"===e){if(/\d/.test(a.peek()))return a.eatWhile(/[\w.%]/),c("number","unit");if(a.match(/^[^-]+-/))return c("meta","meta")}else{if(/[,+>*\/]/.test(e))return c(null,"select-op");if("."==e&&a.match(/^-?[_a-z][_a-z0-9-]*/i))return c("qualifier","qualifier");if(":"==e)return c("operator",e);if(/[;{}\[\]\(\)]/.test(e))return c(null,e);"u"==e&&a.match("rl(")?(a.backUp(1),b.tokenize=
h):a.eatWhile(/[\w\\\-]/);return c("property","variable")}}else return c(null,"compare")}function d(a,b){for(var d=!1,f;null!=(f=a.next());){if(d&&"/"==f){b.tokenize=e;break}d="*"==f}return c("comment","comment")}function f(a,b){for(var d=0,f;null!=(f=a.next());){if(2<=d&&">"==f){b.tokenize=e;break}d="-"==f?d+1:0}return c("comment","comment")}function g(a,b){return function(d,f){for(var g=!1,h;null!=(h=d.next())&&(h!=a||g);)g=!g&&"\\"==h;g||(b&&d.backUp(1),f.tokenize=e);return c("string","string")}}
function h(a,b){a.next();a.match(/\s*[\"\']/,!1)?b.tokenize=e:b.tokenize=g(")",!0);return c(null,"(")}var k=a.indentUnit,l,m=b("all aural braille handheld print projection screen tty tv embossed".split(" ")),n=b("width min-width max-width height min-height max-height device-width min-device-width max-device-width device-height min-device-height max-device-height aspect-ratio min-aspect-ratio max-aspect-ratio device-aspect-ratio min-device-aspect-ratio max-device-aspect-ratio color min-color max-color color-index min-color-index max-color-index monochrome min-monochrome max-monochrome resolution min-resolution max-resolution scan grid".split(" ")),
p=b("align-content align-items align-self alignment-adjust alignment-baseline anchor-point animation animation-delay animation-direction animation-duration animation-iteration-count animation-name animation-play-state animation-timing-function appearance azimuth backface-visibility background background-attachment background-clip background-color background-image background-origin background-position background-repeat background-size baseline-shift binding bleed bookmark-label bookmark-level bookmark-state bookmark-target border border-bottom border-bottom-color border-bottom-left-radius border-bottom-right-radius border-bottom-style border-bottom-width border-collapse border-color border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-left border-left-color border-left-style border-left-width border-radius border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-left-radius border-top-right-radius border-top-style border-top-width border-width bottom box-decoration-break box-shadow box-sizing break-after break-before break-inside caption-side clear clip color color-profile column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width column-span column-width columns content counter-increment counter-reset crop cue cue-after cue-before cursor direction display dominant-baseline drop-initial-after-adjust drop-initial-after-align drop-initial-before-adjust drop-initial-before-align drop-initial-size drop-initial-value elevation empty-cells fit fit-position flex flex-basis flex-direction flex-flow flex-grow flex-shrink flex-wrap float float-offset font font-feature-settings font-family font-kerning font-language-override font-size font-size-adjust font-stretch font-style font-synthesis font-variant font-variant-alternates font-variant-caps font-variant-east-asian font-variant-ligatures font-variant-numeric font-variant-position font-weight grid-cell grid-column grid-column-align grid-column-sizing grid-column-span grid-columns grid-flow grid-row grid-row-align grid-row-sizing grid-row-span grid-rows grid-template hanging-punctuation height hyphens icon image-orientation image-rendering image-resolution inline-box-align justify-content left letter-spacing line-break line-height line-stacking line-stacking-ruby line-stacking-shift line-stacking-strategy list-style list-style-image list-style-position list-style-type margin margin-bottom margin-left margin-right margin-top marker-offset marks marquee-direction marquee-loop marquee-play-count marquee-speed marquee-style max-height max-width min-height min-width move-to nav-down nav-index nav-left nav-right nav-up opacity order orphans outline outline-color outline-offset outline-style outline-width overflow overflow-style overflow-wrap overflow-x overflow-y padding padding-bottom padding-left padding-right padding-top page page-break-after page-break-before page-break-inside page-policy pause pause-after pause-before perspective perspective-origin pitch pitch-range play-during position presentation-level punctuation-trim quotes rendering-intent resize rest rest-after rest-before richness right rotation rotation-point ruby-align ruby-overhang ruby-position ruby-span size speak speak-as speak-header speak-numeral speak-punctuation speech-rate stress string-set tab-size table-layout target target-name target-new target-position text-align text-align-last text-decoration text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-height text-indent text-justify text-outline text-shadow text-space-collapse text-transform text-underline-position text-wrap top transform transform-origin transform-style transition transition-delay transition-duration transition-property transition-timing-function unicode-bidi vertical-align visibility voice-balance voice-duration voice-family voice-pitch voice-range voice-rate voice-stress voice-volume volume white-space widows width word-break word-spacing word-wrap z-index".split(" ")),
q=b("black silver gray white maroon red purple fuchsia green lime olive yellow navy blue teal aqua".split(" ")),s=b("above absolute activeborder activecaption afar after-white-space ahead alias all all-scroll alternate always amharic amharic-abegede antialiased appworkspace arabic-indic armenian asterisks auto avoid background backwards baseline below bidi-override binary bengali blink block block-axis bold bolder border border-box both bottom break-all break-word button button-bevel buttonface buttonhighlight buttonshadow buttontext cambodian capitalize caps-lock-indicator caption captiontext caret cell center checkbox circle cjk-earthly-branch cjk-heavenly-stem cjk-ideographic clear clip close-quote col-resize collapse compact condensed contain content content-box context-menu continuous copy cover crop cross crosshair currentcolor cursive dashed decimal decimal-leading-zero default default-button destination-atop destination-in destination-out destination-over devanagari disc discard document dot-dash dot-dot-dash dotted double down e-resize ease ease-in ease-in-out ease-out element ellipsis embed end ethiopic ethiopic-abegede ethiopic-abegede-am-et ethiopic-abegede-gez ethiopic-abegede-ti-er ethiopic-abegede-ti-et ethiopic-halehame-aa-er ethiopic-halehame-aa-et ethiopic-halehame-am-et ethiopic-halehame-gez ethiopic-halehame-om-et ethiopic-halehame-sid-et ethiopic-halehame-so-et ethiopic-halehame-ti-er ethiopic-halehame-ti-et ethiopic-halehame-tig ew-resize expanded extra-condensed extra-expanded fantasy fast fill fixed flat footnotes forwards from geometricPrecision georgian graytext groove gujarati gurmukhi hand hangul hangul-consonant hebrew help hidden hide higher highlight highlighttext hiragana hiragana-iroha horizontal hsl hsla icon ignore inactiveborder inactivecaption inactivecaptiontext infinite infobackground infotext inherit initial inline inline-axis inline-block inline-table inset inside intrinsic invert italic justify kannada katakana katakana-iroha khmer landscape lao large larger left level lighter line-through linear lines list-item listbox listitem local logical loud lower lower-alpha lower-armenian lower-greek lower-hexadecimal lower-latin lower-norwegian lower-roman lowercase ltr malayalam match media-controls-background media-current-time-display media-fullscreen-button media-mute-button media-play-button media-return-to-realtime-button media-rewind-button media-seek-back-button media-seek-forward-button media-slider media-sliderthumb media-time-remaining-display media-volume-slider media-volume-slider-container media-volume-sliderthumb medium menu menulist menulist-button menulist-text menulist-textfield menutext message-box middle min-intrinsic mix mongolian monospace move multiple myanmar n-resize narrower navy ne-resize nesw-resize no-close-quote no-drop no-open-quote no-repeat none normal not-allowed nowrap ns-resize nw-resize nwse-resize oblique octal open-quote optimizeLegibility optimizeSpeed oriya oromo outset outside overlay overline padding padding-box painted paused persian plus-darker plus-lighter pointer portrait pre pre-line pre-wrap preserve-3d progress push-button radio read-only read-write read-write-plaintext-only relative repeat repeat-x repeat-y reset reverse rgb rgba ridge right round row-resize rtl run-in running s-resize sans-serif scroll scrollbar se-resize searchfield searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration semi-condensed semi-expanded separate serif show sidama single skip-white-space slide slider-horizontal slider-vertical sliderthumb-horizontal sliderthumb-vertical slow small small-caps small-caption smaller solid somali source-atop source-in source-out source-over space square square-button start static status-bar stretch stroke sub subpixel-antialiased super sw-resize table table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group telugu text text-bottom text-top textarea textfield thai thick thin threeddarkshadow threedface threedhighlight threedlightshadow threedshadow tibetan tigre tigrinya-er tigrinya-er-abegede tigrinya-et tigrinya-et-abegede to top transparent ultra-condensed ultra-expanded underline up upper-alpha upper-armenian upper-greek upper-hexadecimal upper-latin upper-norwegian upper-roman uppercase urdu url vertical vertical-text visible visibleFill visiblePainted visibleStroke visual w-resize wait wave white wider window windowframe windowtext x-large x-small xor xx-large xx-small yellow".split(" "));
return{startState:function(a){return{tokenize:e,baseIndent:a||0,stack:[]}},token:function(a,b){if(b.tokenize==e&&a.eatSpace())return null;var c=b.tokenize(a,b),d=b.stack[b.stack.length-1];"property"==c?"propertyValue"==d?c=s[a.current()]?"string-2":q[a.current()]?"keyword":"variable-2":"rule"==d?p[a.current()]||(c+=" error"):d&&"@media{"!=d?"@media"==d?c=m[a.current()]?"attribute":/^(only|not)$/i.test(a.current())?"keyword":"and"==a.current().toLowerCase()?"error":n[a.current()]?"error":"attribute error":
"@mediaType"==d?m[a.current()]?c="attribute":"and"==a.current().toLowerCase()?c="operator":(/^(only|not)$/i.test(a.current())||a.current(),c="error"):"@mediaType("==d?p[a.current()]||(c=m[a.current()]?"error":"and"==a.current().toLowerCase()?"operator":/^(only|not)$/i.test(a.current())?"error":c+" error"):c="error":c="tag":"atom"==c?d&&"@media{"!=d?"propertyValue"==d?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a.current())||(c+=" error"):c="error":c="builtin":"@media"==d&&"{"==l&&(c="error");"{"==l?
"@media"==d||"@mediaType"==d?(b.stack.pop(),b.stack[b.stack.length-1]="@media{"):b.stack.push("rule"):"}"==l?(b.stack.pop(),"propertyValue"==d&&b.stack.pop()):"@media"==l?b.stack.push("@media"):"@media"==d&&/\b(keyword|attribute)\b/.test(c)?b.stack.push("@mediaType"):"@mediaType"==d&&","==a.current()?b.stack.pop():"@mediaType"==d&&"("==l?b.stack.push("@mediaType("):"@mediaType("==d&&")"==l?b.stack.pop():"rule"==d&&":"==l?b.stack.push("propertyValue"):"propertyValue"==d&&";"==l&&b.stack.pop();return c},
indent:function(a,b){var c=a.stack.length;/^\}/.test(b)&&(c-="propertyValue"==a.stack[a.stack.length-1]?2:1);return a.baseIndent+c*k},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");
CodeMirror.defineMode("javascript",function(a,b){function c(a,b){for(var c=!1,d;null!=(d=a.next());){if(d==b&&!c)return!1;c=!c&&"\\"==d}return c}function e(a,b,c){Ta=a;xa=c;return b}function d(a,b){var d=a.next();if('"'==d||"'"==d)return d=f(d),b.tokenize=d,d(a,b);if(/[\[\]{}\(\),;\:\.]/.test(d))return e(d);if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),e("number","number");if(/\d/.test(d)||"-"==d&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),e("number","number");if("/"==d){if(a.eat("*"))return d=
g,b.tokenize=d,d(a,b);if(a.eat("/"))return a.skipToEnd(),e("comment","comment");if("operator"==b.lastType||"keyword c"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType))return c(a,"/"),a.eatWhile(/[gimy]/),e("regexp","string-2");a.eatWhile(Da);return e("operator",null,a.current())}if("#"==d)return a.skipToEnd(),e("error","error");if(Da.test(d))return a.eatWhile(Da),e("operator",null,a.current());a.eatWhile(/[\w\$_]/);var d=a.current(),h=Ea.propertyIsEnumerable(d)&&Ea[d];return h&&"."!=b.lastType?e(h.type,
h.style,d):e("variable","variable",d)}function f(a){return function(b,f){c(b,a)||(f.tokenize=d);return e("string","string")}}function g(a,b){for(var c=!1,f;f=a.next();){if("/"==f&&c){b.tokenize=d;break}c="*"==f}return e("comment","comment")}function h(a,b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function k(){for(var a=arguments.length-1;0<=a;a--)M.cc.push(arguments[a])}function l(){k.apply(null,arguments);return!0}function m(a){function b(c){for(;c;c=
c.next)if(c.name==a)return!0;return!1}var c=M.state;c.context?(M.marked="def",b(c.localVars)||(c.localVars={name:a,next:c.localVars})):b(c.globalVars)||(c.globalVars={name:a,next:c.globalVars})}function n(){M.state.context={prev:M.state.context,vars:M.state.localVars};M.state.localVars=Aa}function p(){M.state.localVars=M.state.context.vars;M.state.context=M.state.context.prev}function q(a,b){var c=function(){var c=M.state;c.lexical=new h(c.indented,M.stream.column(),a,null,c.lexical,b)};c.lex=!0;
return c}function s(){var a=M.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function r(a){return function(b){return b==a?l():";"==a?k():l(arguments.callee)}}function t(a){return"var"==a?l(q("vardef"),ca,r(";"),s):"keyword a"==a?l(q("form"),u,t,s):"keyword b"==a?l(q("form"),t,s):"{"==a?l(q("}"),G,s):";"==a?l():"function"==a?l(ma):"for"==a?l(q("form"),r("("),q(")"),V,r(")"),s,t,s):"variable"==a?l(q("stat"),E):"switch"==a?l(q("form"),u,q("}","switch"),
r("{"),G,s,s):"case"==a?l(u,r(":")):"default"==a?l(r(":")):"catch"==a?l(q("form"),n,r("("),W,r(")"),t,s,p):k(q("stat"),u,r(";"),s)}function u(a){return ib.hasOwnProperty(a)?l(v):"function"==a?l(ma):"keyword c"==a?l(w):"("==a?l(q(")"),w,r(")"),s,v):"operator"==a?l(u):"["==a?l(q("]"),x(u,"]"),s,v):"{"==a?l(q("}"),x(N,"}"),s,v):l()}function w(a){return a.match(/[;\}\)\],]/)?k():k(u)}function v(a,b){if("operator"==a&&/\+\+|--/.test(b))return l(v);if("operator"==a&&"?"==b)return l(u,r(":"),u);if(";"!=
a){if("("==a)return l(q(")"),x(u,")"),s,v);if("."==a)return l(D,v);if("["==a)return l(q("]"),u,r("]"),s,v)}}function E(a){return":"==a?l(s,t):k(v,r(";"),s)}function D(a){if("variable"==a)return M.marked="property",l()}function N(a){"variable"==a&&(M.marked="property");if(ib.hasOwnProperty(a))return l(r(":"),u)}function x(a,b){function c(d){return","==d?l(a,c):d==b?l():l(r(b))}return function(d){return d==b?l():k(a,c)}}function G(a){return"}"==a?l():k(t,G)}function C(a){return":"==a?l(P):k()}function P(a){return"variable"==
a?(M.marked="variable-3",l()):k()}function ca(a,b){return"variable"==a?(m(b),$?l(C,Ga):l(Ga)):k()}function Ga(a,b){if("="==b)return l(u,Ga);if(","==a)return l(ca)}function V(a){return"var"==a?l(ca,r(";"),na):";"==a?l(na):"variable"==a?l(sa):l(na)}function sa(a,b){return"in"==b?l(u):l(v,na)}function na(a,b){return";"==a?l(Fa):"in"==b?l(u):l(u,r(";"),Fa)}function Fa(a){")"!=a&&l(u)}function ma(a,b){if("variable"==a)return m(b),l(ma);if("("==a)return l(q(")"),n,x(W,")"),s,t,p)}function W(a,b){if("variable"==
a)return m(b),$?l(C):l()}var fa=a.indentUnit,Ca=b.json,$=b.typescript,Ea=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},b={"if":b,"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),
"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f};if($){var c={type:"variable",style:"variable-3"},c={"interface":a("interface"),"class":a("class"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),"super":a("super"),string:c,number:c,bool:c,any:c},g;for(g in c)b[g]=c[g]}return b}(),Da=/[+\-*&%=<>!?|]/,Ta,xa,ib={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},M=
{state:null,column:null,marked:null,cc:null},Aa={name:"this",next:{name:"arguments"}};s.lex=!0;return{startState:function(a){return{tokenize:d,lastType:null,cc:[],lexical:new h((a||0)-fa,0,"block",!1),localVars:b.localVars,globalVars:b.globalVars,context:b.localVars&&{vars:b.localVars},indented:0}},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation());if(a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==Ta)return c;b.lastType=
Ta;a:{var d=Ta,e=xa,f=b.cc;M.state=b;M.stream=a;M.marked=null;M.cc=f;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((f.length?f.pop():Ca?u:t)(d,e)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(M.marked){c=M.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=!0;break b}d=void 0}if(d){c="variable-2";break a}break a}c=void 0}return c},indent:function(a,b){if(a.tokenize==g)return CodeMirror.Pass;if(a.tokenize!=d)return 0;var c=b&&b.charAt(0),e=a.lexical;
"stat"==e.type&&"}"==c&&(e=e.prev);var f=e.type,h=c==f;return"vardef"==f?e.indented+("operator"==a.lastType||","==a.lastType?4:0):"form"==f&&"{"==c?e.indented:"form"==f?e.indented+fa:"stat"==f?e.indented+("operator"==a.lastType||","==a.lastType?fa:0):"switch"!=e.info||h?e.align?e.column+(h?0:1):e.indented+(h?0:fa):e.indented+(/^(?:case|default)\b/.test(b)?fa:2*fa)},electricChars:":{}",jsonMode:Ca}});CodeMirror.defineMIME("text/javascript","javascript");
CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});
CodeMirror.defineMode("xml",function(a,b){function c(a,b){function c(d){b.tokenize=d;return d(a,b)}var d=a.next();if("<"==d){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(f("atom","]]\x3e")):null:a.match("--")?c(f("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(g(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=f("meta","?>"),"meta";d=a.eat("/");D="";for(var h;h=a.eat(/[^\s\u00a0=<>\"\'\/?]/);)D+=h;if(!D)return"error";N=d?"closeTag":"openTag";b.tokenize=
e;return"tag"}if("&"==d)return(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error";a.eatWhile(/[^&<]/);return null}function e(a,b){var e=a.next();if(">"==e||"/"==e&&a.eat(">"))return b.tokenize=c,N=">"==e?"endTag":"selfcloseTag","tag";if("="==e)return N="equals",null;if(/[\'\"]/.test(e))return b.tokenize=d(e),b.tokenize(a,b);a.eatWhile(/[^\s\u00a0=<>\"\']/);return"word"}function d(a){return function(b,c){for(;!b.eol();)if(b.next()==
a){c.tokenize=e;break}return"string"}}function f(a,b){return function(d,e){for(;!d.eol();){if(d.match(b)){e.tokenize=c;break}d.next()}return a}}function g(a){return function(b,d){for(var e;null!=(e=b.next());){if("<"==e)return d.tokenize=g(a+1),d.tokenize(b,d);if(">"==e)if(1==a){d.tokenize=c;break}else return d.tokenize=g(a-1),d.tokenize(b,d)}return"meta"}}function h(){for(var a=arguments.length-1;0<=a;a--)x.cc.push(arguments[a])}function k(){h.apply(null,arguments);return!0}function l(){x.context&&
(x.context=x.context.prev)}function m(a){return"openTag"==a?(x.tagName=D,k(s,n(x.startOfLine))):"closeTag"==a?(a=!1,x.context?x.context.tagName!=D&&(v.implicitlyClosed.hasOwnProperty(x.context.tagName.toLowerCase())&&l(),a=!x.context||x.context.tagName!=D):a=!0,a&&(G="error"),k(p(a))):k()}function n(a){return function(b){var c=x.tagName;x.tagName=null;if("selfcloseTag"==b||"endTag"==b&&v.autoSelfClosers.hasOwnProperty(c.toLowerCase()))return q(c.toLowerCase()),k();"endTag"==b&&(q(c.toLowerCase()),
b=v.doNotIndent.hasOwnProperty(c)||x.context&&x.context.noIndent,x.context={prev:x.context,tagName:c,indent:x.indented,startOfLine:a,noIndent:b});return k()}}function p(a){return function(b){a&&(G="error");if("endTag"==b)return l(),k();G="error";return k(arguments.callee)}}function q(a){for(var b;x.context;){b=x.context.tagName.toLowerCase();if(!v.contextGrabbers.hasOwnProperty(b)||!v.contextGrabbers[b].hasOwnProperty(a))break;l()}}function s(a){if("word"==a)return G="attribute",k(r,s);if("endTag"==
a||"selfcloseTag"==a)return h();G="error";return k(s)}function r(a){if("equals"==a)return k(t,s);v.allowMissing?"word"==a&&(G="attribute"):G="error";return"endTag"==a||"selfcloseTag"==a?h():k()}function t(a){if("string"==a)return k(u);if("word"==a&&v.allowUnquoted)return G="string",k();G="error";return"endTag"==a||"selfCloseTag"==a?h():k()}function u(a){return"string"==a?k(u):h()}var w=a.indentUnit,v=b.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,
input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,
ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},E=b.alignCDATA,D,N,x,G;return{startState:function(){return{tokenize:c,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(a,b){a.sol()&&(b.startOfLine=!0,b.indented=
a.indentation());if(a.eatSpace())return null;G=N=D=null;var c=b.tokenize(a,b);b.type=N;if((c||N)&&"comment"!=c)for(x=b;!(b.cc.pop()||m)(N||c););b.startOfLine=!1;return G||c},indent:function(a,b,d){var f=a.context;if(a.tokenize!=e&&a.tokenize!=c||f&&f.noIndent)return d?d.match(/^(\s*)/)[0].length:0;if(E&&/<!\[CDATA\[/.test(b))return 0;f&&/^<\//.test(b)&&(f=f.prev);for(;f&&!f.startOfLine;)f=f.prev;return f?f.indent+w:0},electricChars:"/",configuration:b.htmlMode?"html":"xml"}});
CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});
CodeMirror.defineMode("htmlmixed",function(a){function b(a,b){var c=f.token(a,b.htmlState);/(?:^|\s)tag(?:\s|$)/.test(c)&&">"==a.current()&&b.htmlState.context&&(/^script$/i.test(b.htmlState.context.tagName)?(b.token=e,b.localState=g.startState(f.indent(b.htmlState,""))):/^style$/i.test(b.htmlState.context.tagName)&&(b.token=d,b.localState=h.startState(f.indent(b.htmlState,""))));return c}function c(a,b,c){var d=a.current(),e=d.search(b);-1<e?a.backUp(d.length-e):d.match(/<\/?$/)&&(a.backUp(d.length),
a.match(b,!1)||a.match(d[0]));return c}function e(a,d){return a.match(/^<\/\s*script\s*>/i,!1)?(d.token=b,d.localState=null,b(a,d)):c(a,/<\/\s*script\s*>/,g.token(a,d.localState))}function d(a,d){return a.match(/^<\/\s*style\s*>/i,!1)?(d.token=b,d.localState=null,b(a,d)):c(a,/<\/\s*style\s*>/,h.token(a,d.localState))}var f=CodeMirror.getMode(a,{name:"xml",htmlMode:!0}),g=CodeMirror.getMode(a,"javascript"),h=CodeMirror.getMode(a,"css");return{startState:function(){var a=f.startState();return{token:b,
localState:null,mode:"html",htmlState:a}},copyState:function(a){if(a.localState)var b=CodeMirror.copyState(a.token==d?h:g,a.localState);return{token:a.token,localState:b,mode:a.mode,htmlState:CodeMirror.copyState(f,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,c){return a.token==b||/^\s*<\//.test(c)?f.indent(a.htmlState,c):a.token==e?g.indent(a.localState,c):h.indent(a.localState,c)},electricChars:"/{}:",innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.token==
b?f:a.token==e?g:h}}}},"xml","javascript","css");CodeMirror.defineMIME("text/html","htmlmixed");
(function(){function a(a){function b(c,e,f){if(c.text){var h=s?0:c.text.length-1,l=s?c.text.length:-1;for(null!=f&&(h=f+r);h!=l;h+=r)if(f=c.text.charAt(h),w.test(f)&&a.getTokenAt(d(e,h+1)).type==t){var m=g[f];if(">"==m.charAt(1)==s)u.push(f);else{if(u.pop()!=m.charAt(0))return{pos:h,match:!1};if(!u.length)return{pos:h,match:!0}}}}}var c=a.getCursor(),e=a.getLineHandle(c.line),f=c.ch-1,h=0<=f&&g[e.text.charAt(f)]||g[e.text.charAt(++f)];if(!h)return null;for(var s=">"==h.charAt(1),r=s?1:-1,t=a.getTokenAt(d(c.line,
f+1)).type,u=[e.text.charAt(f)],w=/[(){}[\]]/,h=c.line,v,E=s?Math.min(h+100,a.lineCount()):Math.max(-1,h-100);h!=E&&!(v=h==c.line?b(e,h,f):b(a.getLineHandle(h),h));h+=r);return{from:d(c.line,f),to:v&&d(h,v.pos),match:v&&v.match}}function b(b,c){var g=a(b);if(g&&!(b.getLine(g.from.line).length>f||g.to&&b.getLine(g.to.line).length>f)){var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",p=b.markText(g.from,d(g.from.line,g.from.ch+1),{className:h}),q=g.to&&b.markText(g.to,d(g.to.line,
g.to.ch+1),{className:h});e&&b.state.focused&&b.display.input.focus();g=function(){b.operation(function(){p.clear();q&&q.clear()})};if(c)setTimeout(g,800);else return g}}function c(a){a.operation(function(){h&&(h(),h=null);a.somethingSelected()||(h=b(a,!1))})}var e=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),d=CodeMirror.Pos,f=1E3,g={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},h=null;CodeMirror.defineOption("matchBrackets",!1,function(a,b){if(b)a.on("cursorActivity",
c);else a.off("cursorActivity",c)});CodeMirror.defineExtension("matchBrackets",function(){b(this,!0)});CodeMirror.defineExtension("findMatchingBracket",function(){return a(this)})})();
(function(){function a(a){for(var e={name:"autoCloseBrackets",Backspace:function(b){if(b.somethingSelected())return CodeMirror.Pass;var d=b.getCursor(),e=b.getLine(d.line);if(d.ch&&d.ch<e.length&&0==a.indexOf(e.slice(d.ch-1,d.ch+1))%2)b.replaceRange("",CodeMirror.Pos(d.line,d.ch-1),CodeMirror.Pos(d.line,d.ch+1));else return CodeMirror.Pass}},d=[],f=0;f<a.length;f+=2)(function(a,c){function f(a){var b=a.getCursor();if(a.getRange(b,CodeMirror.Pos(b.line,b.ch+1))!=c||a.somethingSelected())return CodeMirror.Pass;
a.execCommand("goCharRight")}a!=c&&d.push(c);e["'"+a+"'"]=function(e){if(e.somethingSelected()){var m=e.getSelection();e.replaceSelection(a+m+c)}else if(a!=c||f(e)==CodeMirror.Pass){var m=e.getCursor(),n=CodeMirror.Pos(m.line,m.ch+1),p=e.getLine(m.line),q=p.charAt(m.ch);if(p.length==m.ch||0<=d.indexOf(q)||b.test(q))e.replaceSelection(a+c,{head:n,anchor:n});else return CodeMirror.Pass}};a!=c&&(e["'"+c+"'"]=f)})(a.charAt(f),a.charAt(f+1));return e}var b=/\s/;CodeMirror.defineOption("autoCloseBrackets",
!1,function(b,e,d){d=d&&d!=CodeMirror.Init;e&&!d?b.addKeyMap(a("string"==typeof e?e:"()[]{}''\"\"")):!e&&d&&b.removeKeyMap("autoCloseBrackets")})})();
WebInspector.CodeMirrorTextEditor=function(a,b){WebInspector.View.call(this);this._delegate=b;this._url=a;this.registerRequiredCSS("cm/codemirror.css");this.registerRequiredCSS("cm/cmdevtools.css");this._codeMirror=window.CodeMirror(this.element,{lineNumbers:!0,gutters:["CodeMirror-linenumbers","breakpoints"],matchBrackets:!0,autoCloseBrackets:WebInspector.experimentsSettings.textEditorSmartBraces.isEnabled()});var c=WebInspector.settings.textEditorIndent.get();c===WebInspector.TextUtils.Indent.TabCharacter?
(this._codeMirror.setOption("indentWithTabs",!0),this._codeMirror.setOption("indentUnit",4)):(this._codeMirror.setOption("indentWithTabs",!1),this._codeMirror.setOption("indentUnit",c.length));this._tokenHighlighter=new WebInspector.CodeMirrorTextEditor.TokenHighlighter(this._codeMirror);this._blockIndentController=new WebInspector.CodeMirrorTextEditor.BlockIndentController(this._codeMirror);this._fixWordMovement=new WebInspector.CodeMirrorTextEditor.FixWordMovement(this._codeMirror);this._codeMirror.on("change",
this._change.bind(this));this._codeMirror.on("gutterClick",this._gutterClick.bind(this));this._codeMirror.on("cursorActivity",this._cursorActivity.bind(this));this._codeMirror.on("scroll",this._scroll.bind(this));this.element.addEventListener("contextmenu",this._contextMenu.bind(this));this._lastRange=this.range();this.element.firstChild.addStyleClass("source-code");this.element.addStyleClass("fill");this.markAsLayoutBoundary();this._elementToWidget=new Map;this._nestedUpdatesCounter=0;this.element.addEventListener("focus",
this._handleElementFocus.bind(this),!1);this.element.tabIndex=0};
WebInspector.CodeMirrorTextEditor.prototype={cursorPositionToCoordinates:function(a,b){if(a>=this._codeMirror.lineCount||b>this._codeMirror.getLine(a).length||0>a||0>b)return null;var c=this._codeMirror.cursorCoords(CodeMirror.Pos(a,b));return{x:c.left,y:c.top,height:c.bottom-c.top}},coordinatesToCursorPosition:function(a,b){var c=document.elementFromPoint(a,b);if(!c||!c.isSelfOrDescendant(this._codeMirror.getWrapperElement()))return null;c=this._codeMirror.getGutterElement().boxInWindow();if(a>=
c.x&&a<=c.x+c.width&&b>=c.y&&b<=c.y+c.height)return null;c=this._codeMirror.coordsChar({left:a,top:b});++c.ch;return this._toRange(c,c)},tokenAtTextPosition:function(a,b){if(0>a||a>=this._codeMirror.lineCount())return null;var c=this._codeMirror.getTokenAt(CodeMirror.Pos(a,b||1));return c&&c.type?c.type.startsWith("variable")||c.type.startsWith("property")?{startColumn:c.start,endColumn:c.end-1,type:"javascript-ident"}:null:null},copyRange:function(a){a=this._toPos(a);return this._codeMirror.getRange(a.start,
a.end)},isClean:function(){return this._codeMirror.isClean()},markClean:function(){this._codeMirror.markClean()},set mimeType(a){this._codeMirror.setOption("mode",a);switch(a){case "text/html":this._codeMirror.setOption("theme","web-inspector-html");break;case "text/css":this._codeMirror.setOption("theme","web-inspector-css");break;case "text/javascript":this._codeMirror.setOption("theme","web-inspector-js")}},setReadOnly:function(a){this._codeMirror.setOption("readOnly",a?"nocursor":!1)},readOnly:function(){return!!this._codeMirror.getOption("readOnly")},
removeHighlight:function(a){a.clear()},highlightRange:function(a,b){var c=this._toPos(a);++c.end.ch;return this._codeMirror.markText(c.start,c.end,{className:b,startStyle:b+"-start",endStyle:b+"-end"})},defaultFocusedElement:function(){return this.element},focus:function(){this._codeMirror.focus()},_handleElementFocus:function(){this._codeMirror.focus()},beginUpdates:function(){++this._nestedUpdatesCounter},endUpdates:function(){--this._nestedUpdatesCounter;this._codeMirror.refresh()},revealLine:function(a){var b=
CodeMirror.Pos(a,0),c=this._topScrolledLine(),e=this._bottomScrolledLine(),d=null,f=this._codeMirror.getScrollInfo();if(a<c+3||a>=e-3)d=0.9*f.clientHeight/2>>>0;this._codeMirror.scrollIntoView(b,d)},_gutterClick:function(a,b,c,e){this.dispatchEventToListeners(WebInspector.TextEditor.Events.GutterClick,{lineNumber:b,event:e})},_contextMenu:function(a){var b=new WebInspector.ContextMenu(a);(a=a.target.enclosingNodeOrSelfWithClass("CodeMirror-gutter-elt"))?this._delegate.populateLineGutterContextMenu(b,
parseInt(a.textContent,10)-1):this._delegate.populateTextAreaContextMenu(b,null);b.show()},addBreakpoint:function(a,b,c){var e=document.createElement("span");e.textContent=a+1;e.className="cm-breakpoint"+(b?" cm-breakpoint-disabled":"")+(c?" cm-breakpoint-conditional":"");this._codeMirror.setGutterMarker(a,"breakpoints",e)},removeBreakpoint:function(a){this._codeMirror.setGutterMarker(a,"breakpoints",null)},setExecutionLine:function(a){this._executionLine=this._codeMirror.getLineHandle(a);this._codeMirror.addLineClass(this._executionLine,
null,"cm-execution-line")},clearExecutionLine:function(){this._executionLine&&this._codeMirror.removeLineClass(this._executionLine,null,"cm-execution-line");delete this._executionLine},addDecoration:function(a,b){var c=this._codeMirror.addLineWidget(a,b);this._elementToWidget.put(b,c)},removeDecoration:function(a,b){var c=this._elementToWidget.remove(b);c&&this._codeMirror.removeLineWidget(c)},markAndRevealRange:function(a){a&&this.setSelection(a)},highlightLine:function(a){this.clearLineHighlight();
if(this._highlightedLine=this._codeMirror.getLineHandle(a))this.revealLine(a),this._codeMirror.addLineClass(this._highlightedLine,null,"cm-highlight"),this._clearHighlightTimeout=setTimeout(this.clearLineHighlight.bind(this),2E3)},clearLineHighlight:function(){this._clearHighlightTimeout&&clearTimeout(this._clearHighlightTimeout);delete this._clearHighlightTimeout;this._highlightedLine&&this._codeMirror.removeLineClass(this._highlightedLine,null,"cm-highlight");delete this._highlightedLine},elementsToRestoreScrollPositionsFor:function(){return[]},
inheritScrollPositions:function(a){},onResize:function(){this._codeMirror.refresh()},editRange:function(a,b){var c=this._toPos(a);this._codeMirror.replaceRange(b,c.start,c.end);c=this._toRange(c.start,this._codeMirror.posFromIndex(this._codeMirror.indexFromPos(c.start)+b.length));this._delegate.onTextChanged(a,c);return c},_change:function(){for(var a=this._elementToWidget.values(),b=0;b<a.length;++b)this._codeMirror.removeLineWidget(a[b]);this._elementToWidget.clear();a=this.range();this._delegate.onTextChanged(this._lastRange,
a);this._lastRange=a},_cursorActivity:function(){var a=this._codeMirror.getCursor("anchor"),b=this._codeMirror.getCursor("head");this._delegate.selectionChanged(this._toRange(a,b))},_coordsCharLocal:function(a){for(var b=a.top,c=0,e=this._codeMirror.lineCount()-1;1<e-c;){var d=c+e>>1;a=this._codeMirror.charCoords(CodeMirror.Pos(d,0),"local");a.top>=b?e=d:c=d}return e},_topScrolledLine:function(){var a=this._codeMirror.getScrollInfo();return this._coordsCharLocal(a)},_bottomScrolledLine:function(){var a=
this._codeMirror.getScrollInfo();a.top+=a.clientHeight;return this._coordsCharLocal(a)},_scroll:function(){this._delegate.scrollChanged(this._topScrolledLine())},scrollToLine:function(a){setTimeout(function(){var b=CodeMirror.Pos(a,0),b=this._codeMirror.charCoords(b,"local");this._codeMirror.scrollTo(0,b.top)}.bind(this),0)},selection:function(a){a=this._codeMirror.getCursor(!0);var b=this._codeMirror.getCursor(!1);return a.line>b.line||a.line==b.line&&a.ch>b.ch?this._toRange(b,a):this._toRange(a,
b)},lastSelection:function(){return this._lastSelection},setSelection:function(a){setTimeout(function(){this._lastSelection=a;var b=this._toPos(a);this._codeMirror.setSelection(b.start,b.end)}.bind(this),0)},setText:function(a){this._codeMirror.setValue(a)},text:function(){return this._codeMirror.getValue()},range:function(){var a=this.linesCount,b=this._codeMirror.getLine(a-1);return this._toRange({line:0,ch:0},{line:a-1,ch:b.length})},line:function(a){return this._codeMirror.getLine(a)},get linesCount(){return this._codeMirror.lineCount()},
setAttribute:function(a,b,c){a=this._codeMirror.getLineHandle(a);void 0===a.attributes&&(a.attributes={});a.attributes[b]=c},getAttribute:function(a,b){var c=this._codeMirror.getLineHandle(a);return c.attributes&&void 0!==c.attributes[b]?c.attributes[b]:null},removeAttribute:function(a,b){var c=this._codeMirror.getLineHandle(a);c&&c.attributes&&delete c.attributes[b]},_toPos:function(a){return{start:{line:a.startLine,ch:a.startColumn},end:{line:a.endLine,ch:a.endColumn}}},_toRange:function(a,b){return new WebInspector.TextRange(a.line,
a.ch,b.line,b.ch)},__proto__:WebInspector.View.prototype};WebInspector.CodeMirrorTextEditor.TokenHighlighter=function(a){this._codeMirror=a;this._codeMirror.on("cursorActivity",this._cursorChange.bind(this))};
WebInspector.CodeMirrorTextEditor.TokenHighlighter.prototype={_cursorChange:function(){this._codeMirror.operation(this._removeHighlight.bind(this));var a=this._codeMirror.getCursor("start"),b=this._codeMirror.getCursor("end");if(a.line===b.line&&a.ch!==b.ch){var c=this._codeMirror.getSelection();this._isWord(c,a.line,a.ch,b.ch)&&this._codeMirror.operation(this._addHighlight.bind(this,c,a))}},_isWord:function(a,b,c,e){b=this._codeMirror.getLine(b);c=0===c||!WebInspector.TextUtils.isWordChar(b.charAt(c-
1));e=e===b.length||!WebInspector.TextUtils.isWordChar(b.charAt(e));return c&&e&&WebInspector.TextUtils.isWord(a)},_removeHighlight:function(){this._highlightDescriptor&&(this._codeMirror.removeOverlay(this._highlightDescriptor.overlay),this._codeMirror.removeLineClass(this._highlightDescriptor.selectionStart.line,"wrap","cm-line-with-selection"),delete this._highlightDescriptor)},_addHighlight:function(a,b){var c=a.charAt(0),e={token:function(d){if(d.match(a)&&(d.eol()||!WebInspector.TextUtils.isWordChar(d.peek())))return d.column()===
b.ch?"token-highlight column-with-selection":"token-highlight";var e;do e=d.next();while(e&&(WebInspector.TextUtils.isWordChar(e)||d.peek()!==c))}};this._codeMirror.addOverlay(e);this._codeMirror.addLineClass(b.line,"wrap","cm-line-with-selection");this._highlightDescriptor={overlay:e,selectionStart:b}}};WebInspector.CodeMirrorTextEditor.BlockIndentController=function(a){a.addKeyMap(this)};
WebInspector.CodeMirrorTextEditor.BlockIndentController.prototype={name:"blockIndentKeymap",Enter:function(a){if(a.somethingSelected())return CodeMirror.Pass;var b=a.getCursor();if("{}"===a.getLine(b.line).substr(b.ch-1,2))a.execCommand("newlineAndIndent"),a.setCursor(b),a.execCommand("newlineAndIndent");else return CodeMirror.Pass}};
WebInspector.CodeMirrorTextEditor.FixWordMovement=function(a){function b(a,b){var c=b.getCursor("head");if(0!==c.ch||0===c.line)return CodeMirror.Pass;b.setExtending(a);b.execCommand("goLineUp");b.execCommand("goLineEnd");b.setExtending(!1)}function c(a,b){var c=b.getCursor("head"),d=b.getLine(c.line);if(c.ch!==d.length||c.line+1===b.lineCount())return CodeMirror.Pass;b.setExtending(a);b.execCommand("goLineDown");b.execCommand("goLineStart");b.setExtending(!1)}var e=WebInspector.isMac()?"Alt":"Ctrl",
d=e+"-Left",e=e+"-Right",f={};f[d]=b.bind(this,!1);f[e]=c.bind(this,!1);f["Shift-"+d]=b.bind(this,!0);f["Shift-"+e]=c.bind(this,!0);a.addKeyMap(f)};
