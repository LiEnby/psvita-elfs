WebInspector.JavaScriptBreakpointsSidebarPane=function(a,b){WebInspector.SidebarPane.call(this,WebInspector.UIString("Breakpoints"));this.registerRequiredCSS("breakpointsList.css");this._breakpointManager=a;this._showSourceLineDelegate=b;this.listElement=document.createElement("ol");this.listElement.className="breakpoint-list";this.emptyElement=document.createElement("div");this.emptyElement.className="info";this.emptyElement.textContent=WebInspector.UIString("No Breakpoints");this.bodyElement.appendChild(this.emptyElement);
this._items=new Map;for(var c=this._breakpointManager.allBreakpointLocations(),e=0;e<c.length;++e)this._addBreakpoint(c[e].breakpoint,c[e].uiLocation);this._breakpointManager.addEventListener(WebInspector.BreakpointManager.Events.BreakpointAdded,this._breakpointAdded,this);this._breakpointManager.addEventListener(WebInspector.BreakpointManager.Events.BreakpointRemoved,this._breakpointRemoved,this);this.emptyElement.addEventListener("contextmenu",this._emptyElementContextMenu.bind(this),!0)};
WebInspector.JavaScriptBreakpointsSidebarPane.prototype={_emptyElementContextMenu:function(a){a=new WebInspector.ContextMenu(a);var b=WebInspector.debuggerModel.breakpointsActive(),c=b?WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Deactivate breakpoints":"Deactivate Breakpoints"):WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Activate breakpoints":"Activate Breakpoints");a.appendItem(c,WebInspector.debuggerModel.setBreakpointsActive.bind(WebInspector.debuggerModel,!b));
a.show()},_breakpointAdded:function(a){this._breakpointRemoved(a);this._addBreakpoint(a.data.breakpoint,a.data.uiLocation)},_addBreakpoint:function(a,b){var c=document.createElement("li");c.addStyleClass("cursor-pointer");c.addEventListener("contextmenu",this._breakpointContextMenu.bind(this,a),!0);c.addEventListener("click",this._breakpointClicked.bind(this,b),!1);var e=document.createElement("input");e.className="checkbox-elem";e.type="checkbox";e.checked=a.enabled();e.addEventListener("click",
this._breakpointCheckboxClicked.bind(this,a),!1);c.appendChild(e);var d=document.createTextNode(WebInspector.formatLinkText(b.uiSourceCode.originURL(),b.lineNumber));c.appendChild(d);var f=document.createElement("div");f.className="source-text monospace";c.appendChild(f);b.uiSourceCode.requestContent(function(a,c,d){c=a.lineEndings();b.lineNumber<c.length&&(f.textContent=a.substring(c[b.lineNumber-1],c[b.lineNumber]))}.bind(this));c._data=b;for(d=this.listElement.firstChild;d&&!(d._data&&0<this._compareBreakpoints(d._data,
c._data));)d=d.nextSibling;this._addListElement(c,d);d={};d.element=c;d.checkbox=e;this._items.put(a,d);this.expand()},_breakpointRemoved:function(a){a=a.data.breakpoint;var b=this._items.get(a);b&&(this._items.remove(a),this._removeListElement(b.element))},highlightBreakpoint:function(a){if(a=this._items.get(a))a.element.addStyleClass("breakpoint-hit"),this._highlightedBreakpointItem=a},clearBreakpointHighlight:function(){this._highlightedBreakpointItem&&(this._highlightedBreakpointItem.element.removeStyleClass("breakpoint-hit"),
delete this._highlightedBreakpointItem)},_breakpointClicked:function(a,b){this._showSourceLineDelegate(a.uiSourceCode,a.lineNumber)},_breakpointCheckboxClicked:function(a,b){b.consume();a.setEnabled(b.target.checked)},_breakpointContextMenu:function(a,b){var c=this._items.values(),e=new WebInspector.ContextMenu(b);e.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Remove breakpoint":"Remove Breakpoint"),a.remove.bind(a));if(1<c.length){var d=WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?
"Remove all breakpoints":"Remove All Breakpoints");e.appendItem(d,this._breakpointManager.removeAllBreakpoints.bind(this._breakpointManager))}e.appendSeparator();var f=(d=WebInspector.debuggerModel.breakpointsActive())?WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Deactivate breakpoints":"Deactivate Breakpoints"):WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Activate breakpoints":"Activate Breakpoints");e.appendItem(f,WebInspector.debuggerModel.setBreakpointsActive.bind(WebInspector.debuggerModel,
!d));if(1<c.length){for(f=d=0;f<c.length;++f)c[f].checkbox.checked&&d++;var f=WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Enable all breakpoints":"Enable All Breakpoints"),g=WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Disable all breakpoints":"Disable All Breakpoints");e.appendSeparator();e.appendItem(f,this._breakpointManager.toggleAllBreakpoints.bind(this._breakpointManager,!0),d==c.length);e.appendItem(g,this._breakpointManager.toggleAllBreakpoints.bind(this._breakpointManager,
!1),!(1<d))}e.show()},_addListElement:function(a,b){b?this.listElement.insertBefore(a,b):(this.listElement.firstChild||(this.bodyElement.removeChild(this.emptyElement),this.bodyElement.appendChild(this.listElement)),this.listElement.appendChild(a))},_removeListElement:function(a){this.listElement.removeChild(a);this.listElement.firstChild||(this.bodyElement.removeChild(this.listElement),this.bodyElement.appendChild(this.emptyElement))},_compare:function(a,b){return a!==b?a<b?-1:1:0},_compareBreakpoints:function(a,
b){return this._compare(a.uiSourceCode.originURL(),b.uiSourceCode.originURL())||this._compare(a.lineNumber,b.lineNumber)},reset:function(){this.listElement.removeChildren();this.listElement.parentElement&&(this.bodyElement.removeChild(this.listElement),this.bodyElement.appendChild(this.emptyElement));this._items.clear()},__proto__:WebInspector.SidebarPane.prototype};
WebInspector.XHRBreakpointsSidebarPane=function(){WebInspector.NativeBreakpointsSidebarPane.call(this,WebInspector.UIString("XHR Breakpoints"));this._breakpointElements={};var a=document.createElement("button");a.className="pane-title-button add";a.addEventListener("click",this._addButtonClicked.bind(this),!1);a.title=WebInspector.UIString("Add XHR breakpoint");this.titleElement.appendChild(a);this.emptyElement.addEventListener("contextmenu",this._emptyElementContextMenu.bind(this),!0);this._restoreBreakpoints()};
WebInspector.XHRBreakpointsSidebarPane.prototype={_emptyElementContextMenu:function(a){a=new WebInspector.ContextMenu(a);a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Add breakpoint":"Add Breakpoint"),this._addButtonClicked.bind(this));a.show()},_addButtonClicked:function(a){function b(a,b,e){this._removeListElement(c);a&&(this._setBreakpoint(e,!0),this._saveBreakpoints())}a&&a.consume();this.expand();var c=document.createElement("p");c.className="breakpoint-condition";
a=document.createElement("span");c.textContent=WebInspector.UIString("Break when URL contains:");a.className="editing";a.id="breakpoint-condition-input";c.appendChild(a);this._addListElement(c,this.listElement.firstChild);var e=new WebInspector.EditingConfig(b.bind(this,!0),b.bind(this,!1));WebInspector.startEditing(a,e)},_setBreakpoint:function(a,b){if(!(a in this._breakpointElements)){var c=document.createElement("li");c._url=a;c.addEventListener("contextmenu",this._contextMenu.bind(this,a),!0);
var e=document.createElement("input");e.className="checkbox-elem";e.type="checkbox";e.checked=b;e.addEventListener("click",this._checkboxClicked.bind(this,a),!1);c._checkboxElement=e;c.appendChild(e);e=document.createElement("span");e.textContent=a?WebInspector.UIString('URL contains "%s"',a):WebInspector.UIString("Any XHR");e.addStyleClass("cursor-auto");e.addEventListener("dblclick",this._labelClicked.bind(this,a),!1);c.appendChild(e);for(e=this.listElement.firstChild;e&&!(e._url&&e._url<c._url);)e=
e.nextSibling;this._addListElement(c,e);this._breakpointElements[a]=c;b&&DOMDebuggerAgent.setXHRBreakpoint(a)}},_removeBreakpoint:function(a){var b=this._breakpointElements[a];b&&(this._removeListElement(b),delete this._breakpointElements[a],b._checkboxElement.checked&&DOMDebuggerAgent.removeXHRBreakpoint(a))},_contextMenu:function(a,b){var c=new WebInspector.ContextMenu(b),e=WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Remove all breakpoints":"Remove All Breakpoints");c.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?
"Add breakpoint":"Add Breakpoint"),this._addButtonClicked.bind(this));c.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Remove breakpoint":"Remove Breakpoint"),function(){this._removeBreakpoint(a);this._saveBreakpoints()}.bind(this));c.appendItem(e,function(){for(var a in this._breakpointElements)this._removeBreakpoint(a);this._saveBreakpoints()}.bind(this));c.show()},_checkboxClicked:function(a,b){b.target.checked?DOMDebuggerAgent.setXHRBreakpoint(a):DOMDebuggerAgent.removeXHRBreakpoint(a);
this._saveBreakpoints()},_labelClicked:function(a){function b(b,f,g){this._removeListElement(e);b?(this._removeBreakpoint(a),this._setBreakpoint(g,c._checkboxElement.checked),this._saveBreakpoints()):c.removeStyleClass("hidden")}var c=this._breakpointElements[a],e=document.createElement("span");e.className="breakpoint-condition editing";e.textContent=a;this.listElement.insertBefore(e,c);c.addStyleClass("hidden");WebInspector.startEditing(e,new WebInspector.EditingConfig(b.bind(this,!0),b.bind(this,
!1)))},highlightBreakpoint:function(a){if(a=this._breakpointElements[a])this.expand(),a.addStyleClass("breakpoint-hit"),this._highlightedElement=a},clearBreakpointHighlight:function(){this._highlightedElement&&(this._highlightedElement.removeStyleClass("breakpoint-hit"),delete this._highlightedElement)},_saveBreakpoints:function(){var a=[],b;for(b in this._breakpointElements)a.push({url:b,enabled:this._breakpointElements[b]._checkboxElement.checked});WebInspector.settings.xhrBreakpoints.set(a)},_restoreBreakpoints:function(){for(var a=
WebInspector.settings.xhrBreakpoints.get(),b=0;b<a.length;++b){var c=a[b];c&&"string"===typeof c.url&&this._setBreakpoint(c.url,c.enabled)}},__proto__:WebInspector.NativeBreakpointsSidebarPane.prototype};
WebInspector.EventListenerBreakpointsSidebarPane=function(){WebInspector.SidebarPane.call(this,WebInspector.UIString("Event Listener Breakpoints"));this.registerRequiredCSS("breakpointsList.css");this.categoriesElement=document.createElement("ol");this.categoriesElement.tabIndex=0;this.categoriesElement.addStyleClass("properties-tree");this.categoriesElement.addStyleClass("event-listener-breakpoints");this.categoriesTreeOutline=new TreeOutline(this.categoriesElement);this.bodyElement.appendChild(this.categoriesElement);
this._breakpointItems={};this._createCategory(WebInspector.UIString("Animation"),!1,["requestAnimationFrame","cancelAnimationFrame","animationFrameFired"]);this._createCategory(WebInspector.UIString("Control"),!0,"resize scroll zoom focus blur select change submit reset".split(" "));this._createCategory(WebInspector.UIString("Clipboard"),!0,"copy cut paste beforecopy beforecut beforepaste".split(" "));this._createCategory(WebInspector.UIString("DOM Mutation"),!0,"DOMActivate DOMFocusIn DOMFocusOut DOMAttrModified DOMCharacterDataModified DOMNodeInserted DOMNodeInsertedIntoDocument DOMNodeRemoved DOMNodeRemovedFromDocument DOMSubtreeModified DOMContentLoaded".split(" "));
this._createCategory(WebInspector.UIString("Device"),!0,["deviceorientation","devicemotion"]);this._createCategory(WebInspector.UIString("Keyboard"),!0,["keydown","keyup","keypress","input"]);this._createCategory(WebInspector.UIString("Load"),!0,["load","unload","abort","error"]);this._createCategory(WebInspector.UIString("Mouse"),!0,"click dblclick mousedown mouseup mouseover mousemove mouseout mousewheel".split(" "));this._createCategory(WebInspector.UIString("Timer"),!1,["setTimer","clearTimer",
"timerFired"]);this._createCategory(WebInspector.UIString("Touch"),!0,["touchstart","touchmove","touchend","touchcancel"]);this._restoreBreakpoints()};WebInspector.EventListenerBreakpointsSidebarPane.categotyListener="listener:";WebInspector.EventListenerBreakpointsSidebarPane.categotyInstrumentation="instrumentation:";
WebInspector.EventListenerBreakpointsSidebarPane.eventNameForUI=function(a){WebInspector.EventListenerBreakpointsSidebarPane._eventNamesForUI||(WebInspector.EventListenerBreakpointsSidebarPane._eventNamesForUI={"instrumentation:setTimer":WebInspector.UIString("Set Timer"),"instrumentation:clearTimer":WebInspector.UIString("Clear Timer"),"instrumentation:timerFired":WebInspector.UIString("Timer Fired"),"instrumentation:requestAnimationFrame":WebInspector.UIString("Request Animation Frame"),"instrumentation:cancelAnimationFrame":WebInspector.UIString("Cancel Animation Frame"),
"instrumentation:animationFrameFired":WebInspector.UIString("Animation Frame Fired")});return WebInspector.EventListenerBreakpointsSidebarPane._eventNamesForUI[a]||a.substring(a.indexOf(":")+1)};
WebInspector.EventListenerBreakpointsSidebarPane.prototype={_createCategory:function(a,b,c){var e={};e.element=new TreeElement(a);this.categoriesTreeOutline.appendChild(e.element);e.element.listItemElement.addStyleClass("event-category");e.element.selectable=!0;e.checkbox=this._createCheckbox(e.element);e.checkbox.addEventListener("click",this._categoryCheckboxClicked.bind(this,e),!0);e.children={};for(a=0;a<c.length;++a){var d=(b?WebInspector.EventListenerBreakpointsSidebarPane.categotyListener:
WebInspector.EventListenerBreakpointsSidebarPane.categotyInstrumentation)+c[a],f={},g=WebInspector.EventListenerBreakpointsSidebarPane.eventNameForUI(d);f.element=new TreeElement(g);e.element.appendChild(f.element);g=document.createElement("div");g.className="breakpoint-hit-marker";f.element.listItemElement.appendChild(g);f.element.listItemElement.addStyleClass("source-code");f.element.selectable=!0;f.checkbox=this._createCheckbox(f.element);f.checkbox.addEventListener("click",this._breakpointCheckboxClicked.bind(this,
d),!0);f.parent=e;this._breakpointItems[d]=f;e.children[d]=f}},_createCheckbox:function(a){var b=document.createElement("input");b.className="checkbox-elem";b.type="checkbox";a.listItemElement.insertBefore(b,a.listItemElement.firstChild);return b},_categoryCheckboxClicked:function(a){var b=a.checkbox.checked,c;for(c in a.children)a.children[c].checkbox.checked!==b&&(b?this._setBreakpoint(c):this._removeBreakpoint(c));this._saveBreakpoints()},_breakpointCheckboxClicked:function(a,b){b.target.checked?
this._setBreakpoint(a):this._removeBreakpoint(a);this._saveBreakpoints()},_setBreakpoint:function(a){var b=this._breakpointItems[a];b&&(b.checkbox.checked=!0,a.startsWith(WebInspector.EventListenerBreakpointsSidebarPane.categotyListener)?DOMDebuggerAgent.setEventListenerBreakpoint(a.substring(WebInspector.EventListenerBreakpointsSidebarPane.categotyListener.length)):a.startsWith(WebInspector.EventListenerBreakpointsSidebarPane.categotyInstrumentation)&&DOMDebuggerAgent.setInstrumentationBreakpoint(a.substring(WebInspector.EventListenerBreakpointsSidebarPane.categotyInstrumentation.length)),
this._updateCategoryCheckbox(b.parent))},_removeBreakpoint:function(a){var b=this._breakpointItems[a];b&&(b.checkbox.checked=!1,a.startsWith(WebInspector.EventListenerBreakpointsSidebarPane.categotyListener)?DOMDebuggerAgent.removeEventListenerBreakpoint(a.substring(WebInspector.EventListenerBreakpointsSidebarPane.categotyListener.length)):a.startsWith(WebInspector.EventListenerBreakpointsSidebarPane.categotyInstrumentation)&&DOMDebuggerAgent.removeInstrumentationBreakpoint(a.substring(WebInspector.EventListenerBreakpointsSidebarPane.categotyInstrumentation.length)),
this._updateCategoryCheckbox(b.parent))},_updateCategoryCheckbox:function(a){var b=!1,c=!1,e;for(e in a.children)a.children[e].checkbox.checked?b=!0:c=!0;a.checkbox.checked=b;a.checkbox.indeterminate=b&&c},highlightBreakpoint:function(a){if(a=this._breakpointItems[a])this.expand(),a.parent.element.expand(),a.element.listItemElement.addStyleClass("breakpoint-hit"),this._highlightedElement=a.element.listItemElement},clearBreakpointHighlight:function(){this._highlightedElement&&(this._highlightedElement.removeStyleClass("breakpoint-hit"),
delete this._highlightedElement)},_saveBreakpoints:function(){var a=[],b;for(b in this._breakpointItems)this._breakpointItems[b].checkbox.checked&&a.push({eventName:b});WebInspector.settings.eventListenerBreakpoints.set(a)},_restoreBreakpoints:function(){for(var a=WebInspector.settings.eventListenerBreakpoints.get(),b=0;b<a.length;++b){var c=a[b];c&&"string"===typeof c.eventName&&this._setBreakpoint(c.eventName)}},__proto__:WebInspector.SidebarPane.prototype};
WebInspector.CallStackSidebarPane=function(){WebInspector.SidebarPane.call(this,WebInspector.UIString("Call Stack"));this._model=WebInspector.debuggerModel;this.bodyElement.addEventListener("keydown",this._keyDown.bind(this),!0);this.bodyElement.tabIndex=0};
WebInspector.CallStackSidebarPane.prototype={update:function(a){this.bodyElement.removeChildren();delete this._statusMessageElement;this.placards=[];if(a)for(var b=0;b<a.length;++b){var c=new WebInspector.CallStackSidebarPane.Placard(a[b],this);c.element.addEventListener("click",this._placardSelected.bind(this,c),!1);this.placards.push(c);this.bodyElement.appendChild(c.element)}else a=document.createElement("div"),a.className="info",a.textContent=WebInspector.UIString("Not Paused"),this.bodyElement.appendChild(a)},
setSelectedCallFrame:function(a){for(var b=0;b<this.placards.length;++b){var c=this.placards[b];c.selected=c._callFrame===a}},_selectNextCallFrameOnStack:function(a){a=this._selectedCallFrameIndex();if(-1==a)return!0;this._selectedPlacardByIndex(a+1);return!0},_selectPreviousCallFrameOnStack:function(a){a=this._selectedCallFrameIndex();if(-1==a)return!0;this._selectedPlacardByIndex(a-1);return!0},_selectedPlacardByIndex:function(a){0>a||a>=this.placards.length||this._placardSelected(this.placards[a])},
_selectedCallFrameIndex:function(){if(!this._model.selectedCallFrame())return-1;for(var a=0;a<this.placards.length;++a)if(this.placards[a]._callFrame===this._model.selectedCallFrame())return a;return-1},_placardSelected:function(a){this._model.setSelectedCallFrame(a._callFrame)},_copyStackTrace:function(){for(var a="",b=0;b<this.placards.length;++b)a+=this.placards[b].title+" ("+this.placards[b].subtitle+")\n";InspectorFrontendHost.copyText(a)},registerShortcuts:function(a){a(WebInspector.ScriptsPanelDescriptor.ShortcutKeys.NextCallFrame,
this._selectNextCallFrameOnStack.bind(this));a(WebInspector.ScriptsPanelDescriptor.ShortcutKeys.PrevCallFrame,this._selectPreviousCallFrameOnStack.bind(this))},setStatus:function(a){this._statusMessageElement||(this._statusMessageElement=document.createElement("div"),this._statusMessageElement.className="info",this.bodyElement.appendChild(this._statusMessageElement));"string"===typeof a?this._statusMessageElement.textContent=a:(this._statusMessageElement.removeChildren(),this._statusMessageElement.appendChild(a))},
_keyDown:function(a){a.altKey||a.shiftKey||a.metaKey||a.ctrlKey||("Up"===a.keyIdentifier?(this._selectPreviousCallFrameOnStack(),a.consume()):"Down"===a.keyIdentifier&&(this._selectNextCallFrameOnStack(),a.consume()))},__proto__:WebInspector.SidebarPane.prototype};
WebInspector.CallStackSidebarPane.Placard=function(a,b){WebInspector.Placard.call(this,a.functionName||WebInspector.UIString("(anonymous function)"),"");a.createLiveLocation(this._update.bind(this));this.element.addEventListener("contextmenu",this._placardContextMenu.bind(this),!0);this._callFrame=a;this._pane=b};
WebInspector.CallStackSidebarPane.Placard.prototype={_update:function(a){this.subtitle=WebInspector.formatLinkText(a.uiSourceCode.originURL(),a.lineNumber).centerEllipsizedToLength(100)},_placardContextMenu:function(a){a=new WebInspector.ContextMenu(a);WebInspector.debuggerModel.canSetScriptSource()&&(a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Restart frame":"Restart Frame"),this._restartFrame.bind(this)),a.appendSeparator());a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?
"Copy stack trace":"Copy Stack Trace"),this._pane._copyStackTrace.bind(this._pane));a.show()},_restartFrame:function(){this._callFrame.restart(void 0)},__proto__:WebInspector.Placard.prototype};
WebInspector.FilteredItemSelectionDialog=function(a){WebInspector.DialogDelegate.call(this);var b=new XMLHttpRequest;b.open("GET","filteredItemSelectionDialog.css",!1);b.send(null);this.element=document.createElement("div");this.element.className="filtered-item-list-dialog";this.element.addEventListener("keydown",this._onKeyDown.bind(this),!1);var c=this.element.createChild("style");c.type="text/css";c.textContent=b.responseText;this._promptElement=this.element.createChild("input","monospace");this._promptElement.type=
"text";this._promptElement.setAttribute("spellcheck","false");this._progressElement=this.element.createChild("div","progress");this._filteredItems=[];this._viewportControl=new WebInspector.ViewportControl(this);this._itemElementsContainer=this._viewportControl.element;this._itemElementsContainer.addStyleClass("container");this._itemElementsContainer.addStyleClass("monospace");this._itemElementsContainer.addEventListener("click",this._onClick.bind(this),!1);this.element.appendChild(this._itemElementsContainer);
this._delegate=a;this._delegate.requestItems(this._itemsLoaded.bind(this))};
WebInspector.FilteredItemSelectionDialog.prototype={position:function(a,b){var c=Math.max(2*b.offsetWidth/3,500),e=Math.max(2*b.offsetHeight/3,204);this.element.style.width=c+"px";this.element.style.height=e+"px";a.positionAt(b.totalOffsetLeft()+Math.max((b.offsetWidth-c-40)/2,20),b.totalOffsetTop()+Math.max((b.offsetHeight-e-40)/2,20))},focus:function(){WebInspector.setCurrentFocusElement(this._promptElement);this._filteredItems.length&&-1===this._viewportControl.lastVisibleIndex()&&this._viewportControl.refresh()},
willHide:function(){this._isHiding||(this._isHiding=!0,this._delegate.dispose(),this._filterTimer&&clearTimeout(this._filterTimer))},renderAsTwoRows:function(){this._renderAsTwoRows=!0},onEnter:function(){this._delegate.itemsCount()&&this._delegate.selectItem(this._filteredItems[this._selectedIndexInFiltered],this._promptElement.value.trim())},_itemsLoaded:function(a,b){this._loadedCount=a;this._totalCount=b;this._loadTimeout||(this._loadTimeout=setTimeout(this._updateAfterItemsLoaded.bind(this),
100))},_updateAfterItemsLoaded:function(){delete this._loadTimeout;this._filterItems();if(this._loadedCount===this._totalCount)this._progressElement.style.backgroundImage="";else{var a=this._loadedCount/this._totalCount*100+"%";this._progressElement.style.backgroundImage="-webkit-linear-gradient(left, rgb(66, 129, 235), rgb(66, 129, 235) "+a+",  transparent "+a+")"}},_createItemElement:function(a){var b=document.createElement("div");b.className="filtered-item-list-dialog-item "+(this._renderAsTwoRows?
"two-rows":"one-row");b._titleElement=b.createChild("span");b._titleElement.textContent=this._delegate.itemTitleAt(a);b._titleSuffixElement=b.createChild("span");b._titleSuffixElement.textContent=this._delegate.itemSuffixAt(a);b._subtitleElement=b.createChild("div","filtered-item-list-dialog-subtitle");b._subtitleElement.textContent=this._delegate.itemSubtitleAt(a)||"\u200b";b._index=a;var c=this._delegate.itemKeyAt(a),e=[],d;if(this._query){for(var f=this._createSearchRegex(this._query,!0);null!==
(d=f.exec(c))&&d[0];)e.push({offset:d.index,length:f.lastIndex-d.index});e.length&&WebInspector.highlightRangesWithStyleClass(b,e,"highlight")}a===this._filteredItems[this._selectedIndexInFiltered]&&b.addStyleClass("selected");return b},_createSearchRegex:function(a,b){for(var c=String.regexSpecialCharacters(),e="",d=0;d<a.length;++d){var f=a.charAt(d);-1!==c.indexOf(f)&&(f="\\"+f);d&&(e+="[^"+f+"]*");e+=f}return RegExp(e,"i"+(b?"g":""))},_createScoringRegex:function(a,b,c){if(!c||c&&b)a=a.toUpperCase();
b="";for(var e=0;e<a.length;++e){var d=a.charAt(e);"A">d||"Z"<d||(b&&(b+=c?"[^A-Z]*":"[^-_ .]*[-_ .]"),b+=d)}c||(b="(?:^|[-_ .])"+b);return RegExp(b,c?"":"i")},setQuery:function(a){this._promptElement.value=a;this._scheduleFilter()},_filterItems:function(){function a(a,b){if(k){var c=k[a],d=k[b];if(c>d)return-1;if(c<d)return 1}return h[a].compareTo(h[b])||b-a}delete this._filterTimer;var b=this._delegate.rewriteQuery(this._promptElement.value.trim());this._query=b;var c=b===b.toLowerCase(),e=b?this._createSearchRegex(b):
null,d=b?this._createScoringRegex(b,c,!0):null,f=b?this._createScoringRegex(b,c,!1):null,g=this._selectedIndexInFiltered?this._filteredItems[this._selectedIndexInFiltered]:null;this._filteredItems=[];this._selectedIndexInFiltered=0;for(var h=Array(this._delegate.itemsCount()),k=b?Array(this._delegate.itemsCount()):null,l=0;l<this._delegate.itemsCount();++l){var m=this._delegate.itemKeyAt(l);if(!e||e.test(m))if(h[l]=m,this._filteredItems.push(l),e){var n=0;f.test(m)&&(n+=10);d.test(m)&&(n+=c?10:20);
for(var p=0;p<m.length&&p<b.length;++p)if(m[p]===b[p]&&n++,m[p].toUpperCase()===b[p].toUpperCase())n++;else break;k[l]=n}}100<this._filteredItems.length?this._filteredItems.sortRange(a.bind(this),0,this._filteredItems.length-1,100):this._filteredItems.sort(a.bind(this));for(l=0;l<this._filteredItems.length;++l)if(this._filteredItems[l]===g){this._selectedIndexInFiltered=l;break}this._viewportControl.refresh();this._updateSelection(this._selectedIndexInFiltered,!1)},_onKeyDown:function(a){var b=this._selectedIndexInFiltered;
switch(a.keyCode){case WebInspector.KeyboardShortcut.Keys.Down.code:++b>=this._filteredItems.length&&(b=this._filteredItems.length-1);this._updateSelection(b,!0);a.consume(!0);break;case WebInspector.KeyboardShortcut.Keys.Up.code:0>--b&&(b=0);this._updateSelection(b,!1);a.consume(!0);break;case WebInspector.KeyboardShortcut.Keys.PageDown.code:b=Math.min(b+this._viewportControl.rowsPerViewport(),this._filteredItems.length-1);this._updateSelection(b,!0);a.consume(!0);break;case WebInspector.KeyboardShortcut.Keys.PageUp.code:b=
Math.max(b-this._viewportControl.rowsPerViewport(),0);this._updateSelection(b,!1);a.consume(!0);break;default:"Shift"!==a.keyIdentifier&&"Ctrl"!==a.keyIdentifier&&"Meta"!==a.keyIdentifier&&"Left"!==a.keyIdentifier&&"Right"!==a.keyIdentifier&&this._scheduleFilter()}},_scheduleFilter:function(){this._filterTimer||(this._filterTimer=setTimeout(this._filterItems.bind(this),0))},_updateSelection:function(a,b){var c=this._viewportControl.renderedElementAt(this._selectedIndexInFiltered);c&&c.removeStyleClass("selected");
this._viewportControl.scrollItemIntoView(a,b);this._selectedIndexInFiltered=a;(c=this._viewportControl.renderedElementAt(a))&&c.addStyleClass("selected")},_onClick:function(a){if(a=a.target.enclosingNodeOrSelfWithClass("filtered-item-list-dialog-item"))this._delegate.selectItem(a._index,this._promptElement.value.trim()),WebInspector.Dialog.hide()},itemCount:function(){return this._filteredItems.length},itemElement:function(a){var b=this._createItemElement(this._filteredItems[a]);b._filteredIndex=
a;return b},__proto__:WebInspector.DialogDelegate.prototype};WebInspector.SelectionDialogContentProvider=function(){};WebInspector.SelectionDialogContentProvider.prototype={itemTitleAt:function(a){},itemSuffixAt:function(a){},itemSubtitleAt:function(a){},itemKeyAt:function(a){},itemsCount:function(){},requestItems:function(a){},selectItem:function(a,b){},rewriteQuery:function(a){},dispose:function(){}};
WebInspector.JavaScriptOutlineDialog=function(a,b){WebInspector.SelectionDialogContentProvider.call(this);this._functionItems=[];this._view=a;this._contentProvider=b};WebInspector.JavaScriptOutlineDialog.show=function(a,b){if(WebInspector.Dialog.currentInstance())return null;var c=new WebInspector.JavaScriptOutlineDialog(a,b),c=new WebInspector.FilteredItemSelectionDialog(c);WebInspector.Dialog.show(a.element,c)};
WebInspector.JavaScriptOutlineDialog.prototype={itemTitleAt:function(a){a=this._functionItems[a];return a.name+(a.arguments?a.arguments:"")},itemSuffixAt:function(a){return""},itemSubtitleAt:function(a){return":"+(this._functionItems[a].line+1)},itemKeyAt:function(a){return this._functionItems[a].name},itemsCount:function(){return this._functionItems.length},requestItems:function(a){this._contentProvider.requestContent(function(b,c,e){this._outlineWorker&&this._outlineWorker.terminate();this._outlineWorker=
new Worker("ScriptFormatterWorker.js");this._outlineWorker.onmessage=this._didBuildOutlineChunk.bind(this,a);this._outlineWorker.postMessage({method:"outline",params:{content:b}})}.bind(this))},_didBuildOutlineChunk:function(a,b){for(var c=b.data,e=c.chunk,d=0;d<e.length;++d)this._functionItems.push(e[d]);a(c.index,c.total);c.total===c.index&&this._outlineWorker&&(this._outlineWorker.terminate(),delete this._outlineWorker)},selectItem:function(a,b){var c=this._functionItems[a].line;!isNaN(c)&&0<=
c&&this._view.highlightLine(c);this._view.focus()},rewriteQuery:function(a){return a},dispose:function(){}};
WebInspector.SelectUISourceCodeDialog=function(){var a=WebInspector.workspace.projects().filter(this.filterProject.bind(this));this._uiSourceCodes=[];for(var b=0;b<a.length;++b)this._uiSourceCodes=this._uiSourceCodes.concat(a[b].uiSourceCodes().filter(this.filterUISourceCode.bind(this)));WebInspector.workspace.addEventListener(WebInspector.UISourceCodeProvider.Events.UISourceCodeAdded,this._uiSourceCodeAdded,this)};
WebInspector.SelectUISourceCodeDialog.prototype={uiSourceCodeSelected:function(a,b){},filterProject:function(a){return!0},filterUISourceCode:function(a){return a.name()},itemTitleAt:function(a){return this._uiSourceCodes[a].name().trimEnd(100)},itemSuffixAt:function(a){return this._queryLineNumber||""},itemSubtitleAt:function(a){var b=this._uiSourceCodes[a];a=b.project().displayName();b=b.path().slice();b.pop();b.unshift(a);return b.join("/")},itemKeyAt:function(a){return this._uiSourceCodes[a].name()},
itemsCount:function(){return this._uiSourceCodes.length},requestItems:function(a){this._itemsLoaded=a;this._itemsLoaded(1,1)},selectItem:function(a,b){var c=b.match(/[^:]+\:([\d]*)$/),c=c?Math.max(parseInt(c[1],10)-1,0):0;this.uiSourceCodeSelected(this._uiSourceCodes[a],c)},rewriteQuery:function(a){if(!a)return a;a=a.trim();var b=a.match(/([^:]+)(\:[\d]*)$/);this._queryLineNumber=b?b[2]:"";return b?b[1]:a},_uiSourceCodeAdded:function(a){a=a.data;this.filterUISourceCode(a)&&(this._uiSourceCodes.push(a),
this._itemsLoaded(1,1))},dispose:function(){WebInspector.workspace.removeEventListener(WebInspector.UISourceCodeProvider.Events.UISourceCodeAdded,this._uiSourceCodeAdded,this)}};WebInspector.OpenResourceDialog=function(a){WebInspector.SelectUISourceCodeDialog.call(this);this._panel=a};WebInspector.OpenResourceDialog.prototype={uiSourceCodeSelected:function(a,b){this._panel.showUISourceCode(a,b)},filterProject:function(a){return!a.isServiceProject()},__proto__:WebInspector.SelectUISourceCodeDialog.prototype};
WebInspector.OpenResourceDialog.show=function(a,b){if(!WebInspector.Dialog.currentInstance()){var c=new WebInspector.FilteredItemSelectionDialog(new WebInspector.OpenResourceDialog(a));c.renderAsTwoRows();WebInspector.Dialog.show(b,c)}};WebInspector.SelectUISourceCodeForProjectTypeDialog=function(a,b){this._type=a;WebInspector.SelectUISourceCodeDialog.call(this);this._callback=b};
WebInspector.SelectUISourceCodeForProjectTypeDialog.prototype={uiSourceCodeSelected:function(a,b){this._callback(a)},filterProject:function(a){return a.type()===this._type},__proto__:WebInspector.SelectUISourceCodeDialog.prototype};
WebInspector.SelectUISourceCodeForProjectTypeDialog.show=function(a,b,c,e){WebInspector.Dialog.currentInstance()||(b=new WebInspector.FilteredItemSelectionDialog(new WebInspector.SelectUISourceCodeForProjectTypeDialog(b,c)),b.setQuery(a),b.renderAsTwoRows(),WebInspector.Dialog.show(e,b))};
WebInspector.UISourceCodeFrame=function(a){this._uiSourceCode=a;WebInspector.SourceFrame.call(this,this._uiSourceCode);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.FormattedChanged,this._onFormattedChanged,this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.WorkingCopyChanged,this._onWorkingCopyChanged,this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.WorkingCopyCommitted,this._onWorkingCopyCommitted,this)};
WebInspector.UISourceCodeFrame.prototype={wasShown:function(){WebInspector.SourceFrame.prototype.wasShown.call(this);this._boundWindowFocused=this._windowFocused.bind(this);window.addEventListener("focus",this._boundWindowFocused,!1);this._checkContentUpdated()},willHide:function(){WebInspector.SourceFrame.prototype.willHide.call(this);window.removeEventListener("focus",this._boundWindowFocused,!1);delete this._boundWindowFocused},canEditSource:function(){return this._uiSourceCode.isEditable()},_windowFocused:function(a){this._checkContentUpdated()},
_checkContentUpdated:function(){this.loaded&&this.isShowing()&&this._uiSourceCode.checkContentUpdated()},commitEditing:function(a){this._uiSourceCode.isDirty()&&(this._isCommittingEditing=!0,this._uiSourceCode.commitWorkingCopy(this._didEditContent.bind(this)),delete this._isCommittingEditing)},onTextChanged:function(a,b){WebInspector.SourceFrame.prototype.onTextChanged.call(this,a,b);this._isSettingWorkingCopy=!0;this._uiSourceCode.setWorkingCopy(this._textEditor.text());delete this._isSettingWorkingCopy},
_didEditContent:function(a){a&&WebInspector.log(a,WebInspector.ConsoleMessage.MessageLevel.Error,!0)},_onFormattedChanged:function(a){a=a.data.content;this._textEditor.setReadOnly(this._uiSourceCode.formatted());this.setContent(a,!1,this._uiSourceCode.mimeType())},_onWorkingCopyChanged:function(a){this._innerSetContent(this._uiSourceCode.workingCopy())},_onWorkingCopyCommitted:function(a){this._innerSetContent(this._uiSourceCode.workingCopy())},onUISourceCodeContentChanged:function(a){this.setContent(a,
!1,this._uiSourceCode.mimeType())},_innerSetContent:function(a){if(!this._isSettingWorkingCopy&&!this._isCommittingEditing)this.onUISourceCodeContentChanged(a)},populateTextAreaContextMenu:function(a,b){WebInspector.SourceFrame.prototype.populateTextAreaContextMenu.call(this,a,b);a.appendApplicableItems(this._uiSourceCode);a.appendSeparator()},dispose:function(){this.detach()},__proto__:WebInspector.SourceFrame.prototype};
WebInspector.JavaScriptSourceFrame=function(a,b){this._scriptsPanel=a;this._breakpointManager=WebInspector.breakpointManager;this._uiSourceCode=b;WebInspector.UISourceCodeFrame.call(this,b);b.project().type()===WebInspector.projectTypes.Debugger&&this.element.addStyleClass("source-frame-debugger-script");this._popoverHelper=new WebInspector.ObjectPopoverHelper(this.textEditor.element,this._getPopoverAnchor.bind(this),this._resolveObjectForPopover.bind(this),this._onHidePopover.bind(this),!0);this.textEditor.element.addEventListener("keydown",
this._onKeyDown.bind(this),!0);this.textEditor.addEventListener(WebInspector.TextEditor.Events.GutterClick,this._handleGutterClick.bind(this),this);this._breakpointManager.addEventListener(WebInspector.BreakpointManager.Events.BreakpointAdded,this._breakpointAdded,this);this._breakpointManager.addEventListener(WebInspector.BreakpointManager.Events.BreakpointRemoved,this._breakpointRemoved,this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.ConsoleMessageAdded,this._consoleMessageAdded,
this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.ConsoleMessageRemoved,this._consoleMessageRemoved,this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.ConsoleMessagesCleared,this._consoleMessagesCleared,this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.SourceMappingChanged,this._onSourceMappingChanged,this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.WorkingCopyChanged,this._workingCopyChanged,this);
this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.WorkingCopyCommitted,this._workingCopyCommitted,this);this._updateScriptFile()};
WebInspector.JavaScriptSourceFrame.prototype={wasShown:function(){WebInspector.UISourceCodeFrame.prototype.wasShown.call(this)},willHide:function(){WebInspector.UISourceCodeFrame.prototype.willHide.call(this);this._popoverHelper.hidePopover()},onUISourceCodeContentChanged:function(a,b,c){this._removeAllBreakpoints();WebInspector.UISourceCodeFrame.prototype.onUISourceCodeContentChanged.call(this,a)},populateLineGutterContextMenu:function(a,b){a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?
"Continue to here":"Continue to Here"),this._continueToLine.bind(this,b));var c=this._breakpointManager.findBreakpoint(this._uiSourceCode,b);c?(a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Remove breakpoint":"Remove Breakpoint"),c.remove.bind(c)),a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Edit breakpoint\u2026":"Edit Breakpoint\u2026"),this._editBreakpointCondition.bind(this,b,c)),c.enabled()?a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?
"Disable breakpoint":"Disable Breakpoint"),c.setEnabled.bind(c,!1)):a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Enable breakpoint":"Enable Breakpoint"),c.setEnabled.bind(c,!0))):(a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Add breakpoint":"Add Breakpoint"),this._setBreakpoint.bind(this,b,"",!0)),a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Add conditional breakpoint\u2026":"Add Conditional Breakpoint\u2026"),
this._editBreakpointCondition.bind(this,b)))},populateTextAreaContextMenu:function(a,b){var c=window.getSelection();if("Range"!==c.type||c.isCollapsed)this._uiSourceCode.isEditable()||this._uiSourceCode.contentType()!==WebInspector.resourceTypes.Script||(c=WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Live edit":"Live Edit"),a.appendItem(c,function(a){a=WebInspector.liveEditSupport.uiSourceCodeForLiveEdit(this._uiSourceCode);this._scriptsPanel.showUISourceCode(a,b)}.bind(this)),a.appendSeparator());
else{var e=WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Add to watch":"Add to Watch");a.appendItem(e,this._scriptsPanel.addToWatch.bind(this._scriptsPanel,c.toString()));e=WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Evaluate in console":"Evaluate in Console");a.appendItem(e,WebInspector.evaluateInConsole.bind(WebInspector,c.toString()));a.appendSeparator()}WebInspector.UISourceCodeFrame.prototype.populateTextAreaContextMenu.call(this,a,b)},_workingCopyChanged:function(a){this._supportsEnabledBreakpointsWhileEditing()||
this._scriptFile||(this._uiSourceCode.isDirty()?this._muteBreakpointsWhileEditing():this._restoreBreakpointsAfterEditing())},_workingCopyCommitted:function(a){this._supportsEnabledBreakpointsWhileEditing()||this._scriptFile||this._restoreBreakpointsAfterEditing()},_didMergeToVM:function(){this._supportsEnabledBreakpointsWhileEditing()||this._restoreBreakpointsAfterEditing()},_didDivergeFromVM:function(){this._supportsEnabledBreakpointsWhileEditing()||this._muteBreakpointsWhileEditing()},_muteBreakpointsWhileEditing:function(){if(!this._muted){for(var a=
0;a<this._textEditor.linesCount;++a){var b=this._textEditor.getAttribute(a,"breakpoint");b&&(this._removeBreakpointDecoration(a),this._addBreakpointDecoration(a,b.condition,b.enabled,!0))}this._muted=!0}},_supportsEnabledBreakpointsWhileEditing:function(){return this._uiSourceCode.project().type()===WebInspector.projectTypes.Snippets},_restoreBreakpointsAfterEditing:function(){delete this._muted;for(var a={},b=0;b<this._textEditor.linesCount;++b){var c=this._textEditor.getAttribute(b,"breakpoint");
c&&(a[b]=c,this._removeBreakpointDecoration(b))}this._removeAllBreakpoints();for(var e in a)b=parseInt(e,10),isNaN(b)||(c=a[e],this._setBreakpoint(b,c.condition,c.enabled))},_removeAllBreakpoints:function(){for(var a=this._breakpointManager.breakpointsForUISourceCode(this._uiSourceCode),b=0;b<a.length;++b)a[b].remove()},_getPopoverAnchor:function(a,b){if(!WebInspector.debuggerModel.isPaused()||"Range"===window.getSelection().type)return null;var c=this.textEditor.coordinatesToCursorPosition(b.x,b.y);
if(!c)return null;var e=this.textEditor.tokenAtTextPosition(c.startLine,c.startColumn);if(!e)return null;var c=c.startLine,d=this.textEditor.line(c).substring(e.startColumn,e.endColumn+1);if("javascript-ident"!==e.type&&("javascript-keyword"!==e.type||"this"!==d))return null;var d=this.textEditor.cursorPositionToCoordinates(c,e.startColumn),f=this.textEditor.cursorPositionToCoordinates(c,e.endColumn+1),d=new AnchorBox(d.x,d.y,f.x-d.x,d.height);d.token=e;d.lineNumber=c;return d},_resolveObjectForPopover:function(a,
b,c){function e(c,e){if(WebInspector.debuggerModel.isPaused()){if(this._popoverAnchorBox=a,b(WebInspector.RemoteObject.fromPayload(c),e,this._popoverAnchorBox),this._popoverAnchorBox){var g=new WebInspector.TextRange(a.lineNumber,d,a.lineNumber,f);this._popoverAnchorBox._highlightDescriptor=this.textEditor.highlightRange(g,"source-frame-eval-expression")}}else this._popoverHelper.hidePopover()}if(WebInspector.debuggerModel.isPaused()){for(var d=a.token.startColumn,f=a.token.endColumn,g=this.textEditor.line(a.lineNumber);1<
d&&"."===g.charAt(d-1);)d=this.textEditor.tokenAtTextPosition(a.lineNumber,d-2).startColumn;g=g.substring(d,f+1);WebInspector.debuggerModel.selectedCallFrame().evaluate(g,c,!1,!0,!1,!1,e.bind(this))}else this._popoverHelper.hidePopover()},_onHidePopover:function(){this._popoverAnchorBox&&(this._popoverAnchorBox._highlightDescriptor&&this.textEditor.removeHighlight(this._popoverAnchorBox._highlightDescriptor),delete this._popoverAnchorBox)},_addBreakpointDecoration:function(a,b,c,e){this.textEditor.setAttribute(a,
"breakpoint",{condition:b,enabled:c});this.textEditor.addBreakpoint(a,!c||e,!!b)},_removeBreakpointDecoration:function(a){this.textEditor.removeAttribute(a,"breakpoint");this.textEditor.removeBreakpoint(a)},_onKeyDown:function(a){"U+001B"===a.keyIdentifier&&this._popoverHelper.isPopoverVisible()&&(this._popoverHelper.hidePopover(),a.consume())},_editBreakpointCondition:function(a,b){function c(c,e,g){this.textEditor.removeDecoration(a,this._conditionElement);delete this._conditionEditorElement;delete this._conditionElement;
b?b.setCondition(g):this._setBreakpoint(a,g,!0)}this._conditionElement=this._createConditionElement(a);this.textEditor.addDecoration(a,this._conditionElement);var e=new WebInspector.EditingConfig(c.bind(this,!0),c.bind(this,!1));WebInspector.startEditing(this._conditionEditorElement,e);this._conditionEditorElement.value=b?b.condition():"";this._conditionEditorElement.select()},_createConditionElement:function(a){var b=document.createElement("div");b.className="source-frame-breakpoint-condition";var c=
document.createElement("label");c.className="source-frame-breakpoint-message";c.htmlFor="source-frame-breakpoint-condition";c.appendChild(document.createTextNode(WebInspector.UIString("The breakpoint on line %d will stop only if this expression is true:",a)));b.appendChild(c);a=document.createElement("input");a.id="source-frame-breakpoint-condition";a.className="monospace";a.type="text";b.appendChild(a);this._conditionEditorElement=a;return b},setExecutionLine:function(a){this._executionLineNumber=
a;this.loaded&&(this.textEditor.setExecutionLine(a),this.revealLine(this._executionLineNumber),this.canEditSource()&&this.setSelection(WebInspector.TextRange.createFromLocation(a,0)))},clearExecutionLine:function(){this.loaded&&"number"===typeof this._executionLineNumber&&this.textEditor.clearExecutionLine();delete this._executionLineNumber},_lineNumberAfterEditing:function(a,b,c){var e=a<=b.startLine?0:c.linesCount-b.linesCount;if(a===b.startLine)for(var d=/^[\s\xA0]*$/,f=0;a+f<=c.endLine;++f)if(!d.test(this.textEditor.line(a+
f))){e=f;break}c=Math.max(0,a+e);b.startLine<a&&a<b.endLine&&(c=b.startLine);return c},_shouldIgnoreExternalBreakpointEvents:function(){return this._supportsEnabledBreakpointsWhileEditing()?!1:this._muted?!0:this._scriptFile&&(this._scriptFile.isDivergingFromVM()||this._scriptFile.isMergingToVM())},_breakpointAdded:function(a){var b=a.data.uiLocation;b.uiSourceCode!==this._uiSourceCode||this._shouldIgnoreExternalBreakpointEvents()||(a=a.data.breakpoint,this.loaded&&this._addBreakpointDecoration(b.lineNumber,
a.condition(),a.enabled(),!1))},_breakpointRemoved:function(a){a=a.data.uiLocation;a.uiSourceCode===this._uiSourceCode&&(this._shouldIgnoreExternalBreakpointEvents()||!this._breakpointManager.findBreakpoint(this._uiSourceCode,a.lineNumber)&&this.loaded&&this._removeBreakpointDecoration(a.lineNumber))},_consoleMessageAdded:function(a){a=a.data;this.loaded&&this.addMessageToSource(a.lineNumber,a.originalMessage)},_consoleMessageRemoved:function(a){a=a.data;this.loaded&&this.removeMessageFromSource(a.lineNumber,
a.originalMessage)},_consoleMessagesCleared:function(a){this.clearMessages()},_onSourceMappingChanged:function(a){this._updateScriptFile()},_updateScriptFile:function(){this._scriptFile&&(this._scriptFile.removeEventListener(WebInspector.ScriptFile.Events.DidMergeToVM,this._didMergeToVM,this),this._scriptFile.removeEventListener(WebInspector.ScriptFile.Events.DidDivergeFromVM,this._didDivergeFromVM,this),this._muted&&!this._uiSourceCode.isDirty()&&this._restoreBreakpointsAfterEditing());if(this._scriptFile=
this._uiSourceCode.scriptFile())this._scriptFile.addEventListener(WebInspector.ScriptFile.Events.DidMergeToVM,this._didMergeToVM,this),this._scriptFile.addEventListener(WebInspector.ScriptFile.Events.DidDivergeFromVM,this._didDivergeFromVM,this),this.loaded&&this._scriptFile.checkMapping()},onTextEditorContentLoaded:function(){"number"===typeof this._executionLineNumber&&this.setExecutionLine(this._executionLineNumber);for(var a=this._breakpointManager.breakpointLocationsForUISourceCode(this._uiSourceCode),
b=0;b<a.length;++b)this._breakpointAdded({data:a[b]});a=this._uiSourceCode.consoleMessages();for(b=0;b<a.length;++b){var c=a[b];this.addMessageToSource(c.lineNumber,c.originalMessage)}this._scriptFile&&this._scriptFile.checkMapping()},_handleGutterClick:function(a){if(!this._muted){var b=a.data.lineNumber;a=a.data.event;0!=a.button||a.altKey||a.ctrlKey||a.metaKey||(this._toggleBreakpoint(b,a.shiftKey),a.consume(!0))}},_toggleBreakpoint:function(a,b){var c=this._breakpointManager.findBreakpoint(this._uiSourceCode,
a);c?b?c.setEnabled(!c.enabled()):c.remove():this._setBreakpoint(a,"",!0)},toggleBreakpointOnCurrentLine:function(){if(!this._muted){var a=this.textEditor.selection();a&&this._toggleBreakpoint(a.startLine,!1)}},_setBreakpoint:function(a,b,c){this._breakpointManager.setBreakpoint(this._uiSourceCode,a,b,c);WebInspector.notifications.dispatchEventToListeners(WebInspector.UserMetrics.UserAction,{action:WebInspector.UserMetrics.UserActionNames.SetBreakpoint,url:this._uiSourceCode.originURL(),line:a,enabled:c})},
_continueToLine:function(a){a=this._uiSourceCode.uiLocationToRawLocation(a,0);WebInspector.debuggerModel.continueToLocation(a)},dispose:function(){this._breakpointManager.removeEventListener(WebInspector.BreakpointManager.Events.BreakpointAdded,this._breakpointAdded,this);this._breakpointManager.removeEventListener(WebInspector.BreakpointManager.Events.BreakpointRemoved,this._breakpointRemoved,this);this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.ConsoleMessageAdded,this._consoleMessageAdded,
this);this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.ConsoleMessageRemoved,this._consoleMessageRemoved,this);this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.ConsoleMessagesCleared,this._consoleMessagesCleared,this);this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.SourceMappingChanged,this._onSourceMappingChanged,this);this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.WorkingCopyChanged,this._workingCopyChanged,
this);this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.WorkingCopyCommitted,this._workingCopyCommitted,this);WebInspector.UISourceCodeFrame.prototype.dispose.call(this)},__proto__:WebInspector.UISourceCodeFrame.prototype};
WebInspector.NavigatorOverlayController=function(a,b,c){this._parentSidebarView=a;this._navigatorView=b;this._editorView=c;this._navigatorSidebarResizeWidgetElement=document.createElement("div");this._navigatorSidebarResizeWidgetElement.addStyleClass("scripts-navigator-resizer-widget");this._parentSidebarView.installResizer(this._navigatorSidebarResizeWidgetElement);this._navigatorView.element.appendChild(this._navigatorSidebarResizeWidgetElement);this._navigatorShowHideButton=new WebInspector.StatusBarButton(WebInspector.UIString("Hide navigator"),
"scripts-navigator-show-hide-button",3);this._navigatorShowHideButton.state="pinned";this._navigatorShowHideButton.addEventListener("click",this._toggleNavigator,this);this._editorView.element.appendChild(this._navigatorShowHideButton.element);WebInspector.settings.navigatorHidden=WebInspector.settings.createSetting("navigatorHidden",!0);WebInspector.settings.navigatorHidden.get()&&this._toggleNavigator()};
WebInspector.NavigatorOverlayController.prototype={wasShown:function(){window.setTimeout(this._maybeShowNavigatorOverlay.bind(this),0)},_maybeShowNavigatorOverlay:function(){WebInspector.settings.navigatorHidden.get()&&!WebInspector.settings.navigatorWasOnceHidden.get()&&this.showNavigatorOverlay()},_toggleNavigator:function(){"overlay"===this._navigatorShowHideButton.state?this._pinNavigator():"hidden"===this._navigatorShowHideButton.state?this.showNavigatorOverlay():this._hidePinnedNavigator()},
_hidePinnedNavigator:function(){this._navigatorShowHideButton.state="hidden";this._navigatorShowHideButton.title=WebInspector.UIString("Show navigator");this._parentSidebarView.element.appendChild(this._navigatorShowHideButton.element);this._editorView.element.addStyleClass("navigator-hidden");this._navigatorSidebarResizeWidgetElement.addStyleClass("hidden");this._parentSidebarView.hideSidebarElement();this._navigatorView.detach();this._editorView.focus();WebInspector.settings.navigatorWasOnceHidden.set(!0);
WebInspector.settings.navigatorHidden.set(!0)},_pinNavigator:function(){this._navigatorShowHideButton.state="pinned";this._navigatorShowHideButton.title=WebInspector.UIString("Hide navigator");this._editorView.element.removeStyleClass("navigator-hidden");this._navigatorSidebarResizeWidgetElement.removeStyleClass("hidden");this._editorView.element.appendChild(this._navigatorShowHideButton.element);this._innerHideNavigatorOverlay();this._parentSidebarView.showSidebarElement();this._navigatorView.show(this._parentSidebarView.sidebarElement);
this._navigatorView.focus();WebInspector.settings.navigatorHidden.set(!1)},showNavigatorOverlay:function(){if("overlay"!==this._navigatorShowHideButton.state){this._navigatorShowHideButton.state="overlay";this._navigatorShowHideButton.title=WebInspector.UIString("Pin navigator");this._sidebarOverlay=new WebInspector.SidebarOverlay(this._navigatorView,"scriptsPanelNavigatorOverlayWidth",Preferences.minScriptsSidebarWidth);this._boundKeyDown=this._keyDown.bind(this);this._sidebarOverlay.element.addEventListener("keydown",
this._boundKeyDown,!1);var a=document.createElement("div");a.addStyleClass("scripts-navigator-resizer-widget");this._sidebarOverlay.resizerWidgetElement=a;this._navigatorView.element.appendChild(this._navigatorShowHideButton.element);this._boundContainingElementFocused=this._containingElementFocused.bind(this);this._parentSidebarView.element.addEventListener("mousedown",this._boundContainingElementFocused,!1);this._sidebarOverlay.show(this._parentSidebarView.element);this._navigatorView.focus()}},
_keyDown:function(a){a.handled||a.keyCode!==WebInspector.KeyboardShortcut.Keys.Esc.code||(this.hideNavigatorOverlay(),a.consume(!0))},hideNavigatorOverlay:function(){"overlay"===this._navigatorShowHideButton.state&&(this._navigatorShowHideButton.state="hidden",this._navigatorShowHideButton.title=WebInspector.UIString("Show navigator"),this._parentSidebarView.element.appendChild(this._navigatorShowHideButton.element),this._innerHideNavigatorOverlay(),this._editorView.focus())},_innerHideNavigatorOverlay:function(){this._parentSidebarView.element.removeEventListener("mousedown",
this._boundContainingElementFocused,!1);this._sidebarOverlay.element.removeEventListener("keydown",this._boundKeyDown,!1);this._sidebarOverlay.hide()},_containingElementFocused:function(a){a.target.isSelfOrDescendant(this._sidebarOverlay.element)||this.hideNavigatorOverlay()},isNavigatorPinned:function(){return"pinned"===this._navigatorShowHideButton.state},isNavigatorHidden:function(){return"hidden"===this._navigatorShowHideButton.state}};
WebInspector.NavigatorView=function(){WebInspector.View.call(this);this.registerRequiredCSS("navigatorView.css");this._treeSearchBoxElement=document.createElement("div");this._treeSearchBoxElement.className="navigator-tree-search-box";this.element.appendChild(this._treeSearchBoxElement);var a=document.createElement("ol");this._scriptsTree=new WebInspector.NavigatorTreeOutline(this._treeSearchBoxElement,a);var b=document.createElement("div");b.addStyleClass("outline-disclosure");b.addStyleClass("navigator");
b.appendChild(a);this.element.addStyleClass("fill");this.element.addStyleClass("navigator-container");this.element.appendChild(b);this.setDefaultFocusedElement(this._scriptsTree.element);this._uiSourceCodeNodes={};this._rootNode=new WebInspector.NavigatorRootTreeNode(this);this._rootNode.populate();WebInspector.resourceTreeModel.addEventListener(WebInspector.ResourceTreeModel.EventTypes.InspectedURLChanged,this._inspectedURLChanged,this)};
WebInspector.NavigatorView.Events={ItemSelected:"ItemSelected",FileRenamed:"FileRenamed"};WebInspector.NavigatorView.iconClassForType=function(a){return a===WebInspector.NavigatorTreeOutline.Types.Domain?"navigator-domain-tree-item":"navigator-folder-tree-item"};
WebInspector.NavigatorView.prototype={addUISourceCode:function(a){var b=this._getOrCreateUISourceCodeParentNode(a),c=new WebInspector.NavigatorUISourceCodeTreeNode(this,a);this._uiSourceCodeNodes[a.uri()]=c;b.appendChild(c);a.url===WebInspector.inspectedPageURL&&this.revealUISourceCode(a)},_inspectedURLChanged:function(a){a=Object.values(this._uiSourceCodeNodes);for(var b=0;b<a.length;++b){var c=a[b].uiSourceCode();c.url===WebInspector.inspectedPageURL&&this.revealUISourceCode(c)}},_getProjectNode:function(a){return a.displayName()?
this._rootNode.child(a.id()):this._rootNode},_createProjectNode:function(a){var b=a.type()===WebInspector.projectTypes.FileSystem?WebInspector.NavigatorTreeOutline.Types.FileSystem:WebInspector.NavigatorTreeOutline.Types.Domain;a=new WebInspector.NavigatorFolderTreeNode(this,a.id(),b,a.displayName());this._rootNode.appendChild(a);return a},_getOrCreateProjectNode:function(a){return this._getProjectNode(a)||this._createProjectNode(a)},_getFolderNode:function(a,b){return a.child(b)},_createFolderNode:function(a,
b){var c=new WebInspector.NavigatorFolderTreeNode(this,b,WebInspector.NavigatorTreeOutline.Types.Folder,b);a.appendChild(c);return c},_getOrCreateFolderNode:function(a,b){return this._getFolderNode(a,b)||this._createFolderNode(a,b)},_getUISourceCodeParentNode:function(a){var b=this._getProjectNode(a.project());if(!b)return null;a=a.path();for(var c=0;c<a.length-1;++c)if(b=this._getFolderNode(b,a[c]),!b)return null;return b},_getOrCreateUISourceCodeParentNode:function(a){var b=this._getOrCreateProjectNode(a.project());
if(!b)return null;a=a.path();for(var c=0;c<a.length-1;++c)if(b=this._getOrCreateFolderNode(b,a[c]),!b)return null;return b},revealUISourceCode:function(a,b){var c=this._uiSourceCodeNodes[a.uri()];if(!c)return null;this._scriptsTree.selectedTreeElement&&this._scriptsTree.selectedTreeElement.deselect();this._lastSelectedUISourceCode=a;c.reveal(b)},_scriptSelected:function(a,b){this._lastSelectedUISourceCode=a;this.dispatchEventToListeners(WebInspector.NavigatorView.Events.ItemSelected,{uiSourceCode:a,
focusSource:b})},removeUISourceCode:function(a){var b=this._getUISourceCodeParentNode(a);if(b){var c=this._uiSourceCodeNodes[a.uri()];if(c)for(delete this._uiSourceCodeNodes[a.uri()],b.removeChild(c),c=b;c;){b=c.parent;if(!b||!c.isEmpty())break;b.removeChild(c);c=b}}},_fileRenamed:function(a,b){this.dispatchEventToListeners(WebInspector.NavigatorView.Events.FileRenamed,{uiSourceCode:a,name:b})},rename:function(a,b){var c=this._uiSourceCodeNodes[a.uri()];if(!c)return null;c.rename(b)},reset:function(){for(var a in this._uiSourceCodeNodes)this._uiSourceCodeNodes[a].dispose();
this._scriptsTree.stopSearch();this._scriptsTree.removeChildren();this._uiSourceCodeNodes={};this._rootNode.reset()},handleContextMenu:function(a,b){var c=new WebInspector.ContextMenu(a);c.appendApplicableItems(b);c.show()},__proto__:WebInspector.View.prototype};WebInspector.NavigatorTreeOutline=function(a,b){TreeOutline.call(this,b);this.element=b;this._treeSearchBoxElement=a;this.comparator=WebInspector.NavigatorTreeOutline._treeElementsCompare;this.searchable=!0;this.searchInputElement=document.createElement("input")};
WebInspector.NavigatorTreeOutline.Types={Root:"Root",Domain:"Domain",Folder:"Folder",UISourceCode:"UISourceCode",FileSystem:"FileSystem"};WebInspector.NavigatorTreeOutline._treeElementsCompare=function(a,b){function c(a){var b=a.type();return b===WebInspector.NavigatorTreeOutline.Types.Domain?a.titleText===WebInspector.inspectedPageDomain?1:2:b===WebInspector.NavigatorTreeOutline.Types.FileSystem?3:b===WebInspector.NavigatorTreeOutline.Types.Folder?4:5}var e=c(a),d=c(b);return e>d?1:e<d?-1:a.titleText.compareTo(b.titleText)};
WebInspector.NavigatorTreeOutline.prototype={scriptTreeElements:function(){var a=[];if(this.children.length)for(var b=this.children[0];b;b=b.traverseNextTreeElement(!1,this,!0))b instanceof WebInspector.NavigatorSourceTreeElement&&a.push(b.uiSourceCode);return a},searchStarted:function(){this._treeSearchBoxElement.appendChild(this.searchInputElement);this._treeSearchBoxElement.addStyleClass("visible")},searchFinished:function(){this._treeSearchBoxElement.removeChild(this.searchInputElement);this._treeSearchBoxElement.removeStyleClass("visible")},
__proto__:TreeOutline.prototype};WebInspector.BaseNavigatorTreeElement=function(a,b,c,e,d){this._type=a;TreeElement.call(this,"",null,e);this._titleText=b;this._iconClasses=c;this._noIcon=d};
WebInspector.BaseNavigatorTreeElement.prototype={onattach:function(){this.listItemElement.removeChildren();if(this._iconClasses)for(var a=0;a<this._iconClasses.length;++a)this.listItemElement.addStyleClass(this._iconClasses[a]);a=document.createElement("div");a.className="selection";this.listItemElement.appendChild(a);this._noIcon||(this.imageElement=document.createElement("img"),this.imageElement.className="icon",this.listItemElement.appendChild(this.imageElement));this.titleElement=document.createElement("div");
this.titleElement.className="base-navigator-tree-element-title";this._titleTextNode=document.createTextNode("");this._titleTextNode.textContent=this._titleText;this.titleElement.appendChild(this._titleTextNode);this.listItemElement.appendChild(this.titleElement)},onreveal:function(){this.listItemElement&&this.listItemElement.scrollIntoViewIfNeeded(!0)},get titleText(){return this._titleText},set titleText(a){this._titleText!==a&&(this._titleText=a||"",this.titleElement&&(this.titleElement.textContent=
this._titleText))},matchesSearchText:function(a){return this.titleText.match(RegExp("^"+a.escapeForRegExp(),"i"))},type:function(){return this._type},__proto__:TreeElement.prototype};WebInspector.NavigatorFolderTreeElement=function(a,b){var c=WebInspector.NavigatorView.iconClassForType(a);WebInspector.BaseNavigatorTreeElement.call(this,a,b,[c],!0)};
WebInspector.NavigatorFolderTreeElement.prototype={onpopulate:function(){this._node.populate()},onattach:function(){WebInspector.BaseNavigatorTreeElement.prototype.onattach.call(this);this.collapse()},__proto__:WebInspector.BaseNavigatorTreeElement.prototype};
WebInspector.NavigatorSourceTreeElement=function(a,b,c){WebInspector.BaseNavigatorTreeElement.call(this,WebInspector.NavigatorTreeOutline.Types.UISourceCode,c,["navigator-"+b.contentType().name()+"-tree-item"],!1);this._navigatorView=a;this._uiSourceCode=b;this.tooltip=b.originURL()};
WebInspector.NavigatorSourceTreeElement.prototype={get uiSourceCode(){return this._uiSourceCode},onattach:function(){WebInspector.BaseNavigatorTreeElement.prototype.onattach.call(this);this.listItemElement.draggable=!0;this.listItemElement.addEventListener("click",this._onclick.bind(this),!1);this.listItemElement.addEventListener("contextmenu",this._handleContextMenuEvent.bind(this),!1);this.listItemElement.addEventListener("mousedown",this._onmousedown.bind(this),!1);this.listItemElement.addEventListener("dragstart",
this._ondragstart.bind(this),!1)},_onmousedown:function(a){function b(a,b,d){this._warmedUpContent=a}1===a.which&&this._uiSourceCode.requestContent(b.bind(this))},_ondragstart:function(a){a.dataTransfer.setData("text/plain",this._warmedUpContent);a.dataTransfer.effectAllowed="copy";return!0},onspace:function(){this._navigatorView._scriptSelected(this.uiSourceCode,!0);return!0},_onclick:function(a){this._navigatorView._scriptSelected(this.uiSourceCode,!1)},ondblclick:function(a){this._navigatorView._scriptSelected(this.uiSourceCode,
1!==a.button)},onenter:function(){this._navigatorView._scriptSelected(this.uiSourceCode,!0);return!0},_handleContextMenuEvent:function(a){this._navigatorView.handleContextMenu(a,this._uiSourceCode)},__proto__:WebInspector.BaseNavigatorTreeElement.prototype};WebInspector.NavigatorTreeNode=function(a){this.id=a;this._children={}};
WebInspector.NavigatorTreeNode.prototype={treeElement:function(){},dispose:function(){},isRoot:function(){return!1},hasChildren:function(){return!0},populate:function(){this.isPopulated()||(this.parent&&this.parent.populate(),this._populated=!0,this.wasPopulated())},wasPopulated:function(){for(var a in this._children)this.treeElement().appendChild(this._children[a].treeElement())},didAddChild:function(a){this.isPopulated()&&this.treeElement().appendChild(a.treeElement())},willRemoveChild:function(a){this.isPopulated()&&
this.treeElement().removeChild(a.treeElement())},isPopulated:function(){return this._populated},isEmpty:function(){return 0===this.children().length},child:function(a){return this._children[a]},children:function(){return Object.values(this._children)},appendChild:function(a){this._children[a.id]=a;a.parent=this;this.didAddChild(a)},removeChild:function(a){this.willRemoveChild(a);delete this._children[a.id];delete a.parent;a.dispose()},reset:function(){this._children={}}};
WebInspector.NavigatorRootTreeNode=function(a){WebInspector.NavigatorTreeNode.call(this,"");this._navigatorView=a};
WebInspector.NavigatorRootTreeNode.prototype={isRoot:function(){return!0},treeElement:function(){return this._navigatorView._scriptsTree},wasPopulated:function(){for(var a in this._children)this.treeElement().appendChild(this._children[a].treeElement())},didAddChild:function(a){this.isPopulated()&&this.treeElement().appendChild(a.treeElement())},willRemoveChild:function(a){this.isPopulated()&&this.treeElement().removeChild(a.treeElement())},__proto__:WebInspector.NavigatorTreeNode.prototype};
WebInspector.NavigatorUISourceCodeTreeNode=function(a,b){WebInspector.NavigatorTreeNode.call(this,b.name());this._navigatorView=a;this._uiSourceCode=b};
WebInspector.NavigatorUISourceCodeTreeNode.prototype={uiSourceCode:function(){return this._uiSourceCode},treeElement:function(){if(this._treeElement)return this._treeElement;this._treeElement=new WebInspector.NavigatorSourceTreeElement(this._navigatorView,this._uiSourceCode,"");this.updateTitle();this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.TitleChanged,this._titleChanged,this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.WorkingCopyChanged,this._workingCopyChanged,
this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.WorkingCopyCommitted,this._workingCopyCommitted,this);this._uiSourceCode.addEventListener(WebInspector.UISourceCode.Events.FormattedChanged,this._formattedChanged,this);return this._treeElement},updateTitle:function(a){if(this._treeElement){var b=this._uiSourceCode.name().trimEnd(100);b||(b=WebInspector.UIString("(program)"));!a&&this._uiSourceCode.isDirty()&&(b="*"+b);this._treeElement.titleText=b}},hasChildren:function(){return!1},
dispose:function(){this._treeElement&&(this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.TitleChanged,this._titleChanged,this),this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.WorkingCopyChanged,this._workingCopyChanged,this),this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.WorkingCopyCommitted,this._workingCopyCommitted,this),this._uiSourceCode.removeEventListener(WebInspector.UISourceCode.Events.FormattedChanged,this._formattedChanged,
this))},_titleChanged:function(a){this.updateTitle()},_workingCopyChanged:function(a){this.updateTitle()},_workingCopyCommitted:function(a){this.updateTitle()},_formattedChanged:function(a){this.updateTitle()},reveal:function(a){this.parent.populate();this.parent.treeElement().expand();this._treeElement.reveal();a&&this._treeElement.select()},rename:function(a){function b(b,c,d){c&&c!==d&&this._navigatorView._fileRenamed(this._uiSourceCode,c);WebInspector.markBeingEdited(e,!1);this.updateTitle();
a&&a(!0)}function c(){WebInspector.markBeingEdited(e,!1);this.updateTitle();a&&a(!1)}if(this._treeElement){var e=this._treeElement.treeOutline.element;WebInspector.markBeingEdited(e,!0);var d=new WebInspector.EditingConfig(b.bind(this),c.bind(this));this.updateTitle(!0);WebInspector.startEditing(this._treeElement.titleElement,d);window.getSelection().setBaseAndExtent(this._treeElement.titleElement,0,this._treeElement.titleElement,1)}},__proto__:WebInspector.NavigatorTreeNode.prototype};
WebInspector.NavigatorFolderTreeNode=function(a,b,c,e){WebInspector.NavigatorTreeNode.call(this,b);this._navigatorView=a;this._type=c;this._title=e};
WebInspector.NavigatorFolderTreeNode.prototype={treeElement:function(){return this._treeElement?this._treeElement:this._treeElement=this._createTreeElement(this._title,this)},_createTreeElement:function(a,b){var c=new WebInspector.NavigatorFolderTreeElement(this._type,a);c._node=b;return c},wasPopulated:function(){this._treeElement&&this._treeElement._node===this&&this._addChildrenRecursive()},_addChildrenRecursive:function(){for(var a in this._children){var b=this._children[a];this.didAddChild(b);
b instanceof WebInspector.NavigatorFolderTreeNode&&b._addChildrenRecursive()}},_shouldMerge:function(a){return this._type!==WebInspector.NavigatorTreeOutline.Types.Domain&&a instanceof WebInspector.NavigatorFolderTreeNode},didAddChild:function(a){function b(a){return a._title}if(this._treeElement){var c=this.children();if(1===c.length&&this._shouldMerge(a))a._isMerged=!0,this._treeElement.titleText=this._treeElement.titleText+"/"+a._title,a._treeElement=this._treeElement,this._treeElement._node=a;
else{var e;2===c.length&&(e=c[0]!==a?c[0]:c[1]);if(e&&e._isMerged){delete e._isMerged;var d=[];d.push(this);for(c=this;c._isMerged;)c=c.parent,d.push(c);d.reverse();var f=d.map(b).join("/"),g=[],c=e;do g.push(c),c=c.children(),c=1===c.length?c[0]:null;while(c&&c._isMerged);if(!this.isPopulated()){this._treeElement.titleText=f;this._treeElement._node=this;for(f=0;f<g.length;++f)delete g[f]._treeElement,delete g[f]._isMerged;return}e=this._treeElement;c=this._createTreeElement(f,this);for(f=0;f<d.length;++f)d[f]._treeElement=
c;e.parent.appendChild(c);e._node=g[g.length-1];e.titleText=g.map(b).join("/");e.parent.removeChild(e);this._treeElement.appendChild(e);e.expanded&&c.expand()}this.isPopulated()&&this._treeElement.appendChild(a.treeElement())}}},willRemoveChild:function(a){!a._isMerged&&this.isPopulated()&&this._treeElement.removeChild(a._treeElement)},__proto__:WebInspector.NavigatorTreeNode.prototype};
WebInspector.RevisionHistoryView=function(){WebInspector.View.call(this);this.registerRequiredCSS("revisionHistory.css");this.element.addStyleClass("revision-history-drawer");this.element.addStyleClass("fill");this.element.addStyleClass("outline-disclosure");this._uiSourceCodeItems=new Map;var a=this.element.createChild("ol");this._treeOutline=new TreeOutline(a);WebInspector.workspace.uiSourceCodes().forEach(function(a){a.history.length&&this._createUISourceCodeItem(a)}.bind(this));WebInspector.workspace.addEventListener(WebInspector.Workspace.Events.UISourceCodeContentCommitted,
this._revisionAdded,this);WebInspector.workspace.addEventListener(WebInspector.UISourceCodeProvider.Events.UISourceCodeRemoved,this._uiSourceCodeRemoved,this);WebInspector.workspace.addEventListener(WebInspector.Workspace.Events.ProjectWillReset,this._projectWillReset,this);this._statusElement=document.createElement("span");this._statusElement.textContent=WebInspector.UIString("Local modifications")};
WebInspector.RevisionHistoryView.showHistory=function(a){WebInspector.RevisionHistoryView._view||(WebInspector.RevisionHistoryView._view=new WebInspector.RevisionHistoryView);var b=WebInspector.RevisionHistoryView._view;WebInspector.showViewInDrawer(b._statusElement,b);b._revealUISourceCode(a)};
WebInspector.RevisionHistoryView.prototype={_createUISourceCodeItem:function(a){var b=new TreeElement(a.displayName(),null,!0);b.selectable=!1;for(var c=0;c<this._treeOutline.children.length;++c)if(0<this._treeOutline.children[c].title.localeCompare(a.displayName())){this._treeOutline.insertChild(b,c);break}c===this._treeOutline.children.length&&this._treeOutline.appendChild(b);this._uiSourceCodeItems.put(a,b);for(var e=a.history.length,c=e-1;0<=c;--c){var d=new WebInspector.RevisionHistoryTreeElement(a.history[c],
a.history[c-1],c!==e-1);b.appendChild(d)}c=new TreeElement("",null,!1);c.selectable=!1;b.appendChild(c);c=c.listItemElement.createChild("span","revision-history-link revision-history-link-row");c.textContent=WebInspector.UIString("apply original content");c.addEventListener("click",a.revertToOriginal.bind(a));c=b.listItemElement.createChild("span","revision-history-link");c.textContent=WebInspector.UIString("revert");c.addEventListener("click",this._clearHistory.bind(this,a));return b},_clearHistory:function(a){a.revertAndClearHistory(this._removeUISourceCode.bind(this))},
_revisionAdded:function(a){var b=a.data.uiSourceCode;if(a=this._uiSourceCodeItems.get(b)){var c=b.history.length,b=new WebInspector.RevisionHistoryTreeElement(b.history[c-1],b.history[c-2],!1);a.children.length&&a.children[0].allowRevert();a.insertChild(b,0)}else this._createUISourceCodeItem(b)},_revealUISourceCode:function(a){if(a=this._uiSourceCodeItems.get(a))a.reveal(),a.expand()},_uiSourceCodeRemoved:function(a){this._removeUISourceCode(a.data)},_removeUISourceCode:function(a){var b=this._uiSourceCodeItems.get(a);
b&&(this._treeOutline.removeChild(b),this._uiSourceCodeItems.remove(a))},_projectWillReset:function(a){a.data.uiSourceCodes().forEach(this._removeUISourceCode.bind(this))},__proto__:WebInspector.View.prototype};
WebInspector.RevisionHistoryTreeElement=function(a,b,c){TreeElement.call(this,a.timestamp.toLocaleTimeString(),null,!0);this.selectable=!1;this._revision=a;this._baseRevision=b;this._revertElement=document.createElement("span");this._revertElement.className="revision-history-link";this._revertElement.textContent=WebInspector.UIString("apply revision content");this._revertElement.addEventListener("click",this._revision.revertToThis.bind(this._revision),!1);c||this._revertElement.addStyleClass("hidden")};
WebInspector.RevisionHistoryTreeElement.prototype={onattach:function(){this.listItemElement.addStyleClass("revision-history-revision")},onexpand:function(){function a(a){this._revision.requestContent(b.bind(this,a))}function b(a,b){for(var d=difflib.stringAsLines(a),f=difflib.stringAsLines(b),g=(new difflib.SequenceMatcher(d,f)).get_opcodes(),h=!1,k=0;k<g.length;k++)for(var l=g[k],m=l[0],n=l[1],p=l[2],q=l[3],l=l[4],s=Math.max(p-n,l-q),r=0;r<s;r++){if("delete"===m||"replace"===m&&n<p)h=n++,this._createLine(h,
null,d[h],"removed"),h=!1;if("insert"===m||"replace"===m&&q<l)h=q++,this._createLine(null,h,f[h],"added"),h=!1;"equal"===m&&(n++,q++,h||this._createLine(null,null,"    \u2026","separator"),h=!0)}}this.listItemElement.appendChild(this._revertElement);this._wasExpandedOnce||(this._wasExpandedOnce=!0,this.childrenListElement.addStyleClass("source-code"),this._baseRevision?this._baseRevision.requestContent(a.bind(this)):this._revision.uiSourceCode.requestOriginalContent(a.bind(this)))},oncollapse:function(){this._revertElement.parentElement&&
this._revertElement.parentElement.removeChild(this._revertElement)},_createLine:function(a,b,c,e){function d(a){a=null!==a?numberToStringWithSpacesPadding(a+1,4):"    ";var b=document.createElement("span");b.addStyleClass("webkit-line-number");b.textContent=a;f.listItemElement.appendChild(b)}var f=new TreeElement("",null,!1);f.selectable=!1;this.appendChild(f);document.createElement("span");d(a);d(b);a=document.createElement("span");a.textContent=c;f.listItemElement.appendChild(a);f.listItemElement.addStyleClass("revision-history-line");
f.listItemElement.addStyleClass("revision-history-line-"+e)},allowRevert:function(){this._revertElement.removeStyleClass("hidden")},__proto__:TreeElement.prototype};WebInspector.ScopeChainSidebarPane=function(){WebInspector.SidebarPane.call(this,WebInspector.UIString("Scope Variables"));this._sections=[];this._expandedSections={};this._expandedProperties=[]};
WebInspector.ScopeChainSidebarPane.prototype={update:function(a){this.bodyElement.removeChildren();if(a){for(var b=0;b<this._sections.length;++b){var c=this._sections[b];c.title&&(c.expanded?this._expandedSections[c.title]=!0:delete this._expandedSections[c.title])}this._sections=[];for(var e=!1,d=a.scopeChain,b=0;b<d.length;++b){var f=d[b],g=null,c=f.object.description,h=null,k=null,l;switch(f.type){case "local":e=!0;g=WebInspector.UIString("Local");h=WebInspector.UIString("No Variables");c=null;
a.this&&(k=[new WebInspector.RemoteObjectProperty("this",WebInspector.RemoteObject.fromPayload(a.this))]);0==b&&(l=WebInspector.debuggerModel.debuggerPausedDetails(),l=l.reason===WebInspector.DebuggerModel.BreakReason.Exception?l.auxData:0)&&(k=k||[],k.push(new WebInspector.RemoteObjectProperty("<exception>",WebInspector.RemoteObject.fromPayload(l))));l=!0;break;case "closure":g=WebInspector.UIString("Closure");h=WebInspector.UIString("No Variables");c=null;l=!0;break;case "catch":g=WebInspector.UIString("Catch");
c=null;l=!0;break;case "with":g=WebInspector.UIString("With Block");l=!1;break;case "global":g=WebInspector.UIString("Global"),l=!1}g&&g!==c||(c=null);var m;m=l?new WebInspector.ScopeRef(b,a.id,void 0):void 0;c=new WebInspector.ObjectPropertiesSection(WebInspector.RemoteObject.fromScopePayload(f.object,m),g,c,h,!0,k,WebInspector.ScopeVariableTreeElement);c.editInSelectedCallFrameWhenPaused=!0;c.pane=this;if("global"===f.type)c.expanded=!1;else if(!e||"local"===f.type||g in this._expandedSections)c.expanded=
!0;this._sections.push(c);this.bodyElement.appendChild(c.element)}}else a=document.createElement("div"),a.className="info",a.textContent=WebInspector.UIString("Not Paused"),this.bodyElement.appendChild(a)},__proto__:WebInspector.SidebarPane.prototype};WebInspector.ScopeVariableTreeElement=function(a){WebInspector.ObjectPropertyTreeElement.call(this,a)};
WebInspector.ScopeVariableTreeElement.prototype={onattach:function(){WebInspector.ObjectPropertyTreeElement.prototype.onattach.call(this);this.hasChildren&&this.propertyIdentifier in this.treeOutline.section.pane._expandedProperties&&this.expand()},onexpand:function(){this.treeOutline.section.pane._expandedProperties[this.propertyIdentifier]=!0},oncollapse:function(){delete this.treeOutline.section.pane._expandedProperties[this.propertyIdentifier]},get propertyIdentifier(){if("_propertyIdentifier"in
this)return this._propertyIdentifier;var a=this.treeOutline.section;return this._propertyIdentifier=a.title+":"+(a.subtitle?a.subtitle+":":"")+this.propertyPath()},__proto__:WebInspector.ObjectPropertyTreeElement.prototype};
WebInspector.ScriptsNavigator=function(){WebInspector.Object.call(this);this._tabbedPane=new WebInspector.TabbedPane;this._tabbedPane.shrinkableTabs=!0;this._tabbedPane.element.addStyleClass("navigator-tabbed-pane");this._scriptsView=new WebInspector.NavigatorView;this._scriptsView.addEventListener(WebInspector.NavigatorView.Events.ItemSelected,this._scriptSelected,this);this._contentScriptsView=new WebInspector.NavigatorView;this._contentScriptsView.addEventListener(WebInspector.NavigatorView.Events.ItemSelected,
this._scriptSelected,this);this._snippetsView=new WebInspector.SnippetsNavigatorView;this._snippetsView.addEventListener(WebInspector.NavigatorView.Events.ItemSelected,this._scriptSelected,this);this._snippetsView.addEventListener(WebInspector.NavigatorView.Events.FileRenamed,this._fileRenamed,this);this._snippetsView.addEventListener(WebInspector.SnippetsNavigatorView.Events.SnippetCreationRequested,this._snippetCreationRequested,this);this._snippetsView.addEventListener(WebInspector.SnippetsNavigatorView.Events.ItemRenamingRequested,
this._itemRenamingRequested,this);this._tabbedPane.appendTab(WebInspector.ScriptsNavigator.ScriptsTab,WebInspector.UIString("Sources"),this._scriptsView);this._tabbedPane.selectTab(WebInspector.ScriptsNavigator.ScriptsTab);this._tabbedPane.appendTab(WebInspector.ScriptsNavigator.ContentScriptsTab,WebInspector.UIString("Content scripts"),this._contentScriptsView);WebInspector.experimentsSettings.snippetsSupport.isEnabled()&&this._tabbedPane.appendTab(WebInspector.ScriptsNavigator.SnippetsTab,WebInspector.UIString("Snippets"),
this._snippetsView)};WebInspector.ScriptsNavigator.Events={ScriptSelected:"ScriptSelected",SnippetCreationRequested:"SnippetCreationRequested",ItemRenamingRequested:"ItemRenamingRequested",FileRenamed:"FileRenamed"};WebInspector.ScriptsNavigator.ScriptsTab="scripts";WebInspector.ScriptsNavigator.ContentScriptsTab="contentScripts";WebInspector.ScriptsNavigator.SnippetsTab="snippets";
WebInspector.ScriptsNavigator.prototype={get view(){return this._tabbedPane},_navigatorViewForUISourceCode:function(a){return a.isContentScript?this._contentScriptsView:a.project().type()===WebInspector.projectTypes.Snippets?this._snippetsView:this._scriptsView},addUISourceCode:function(a){this._navigatorViewForUISourceCode(a).addUISourceCode(a)},removeUISourceCode:function(a){this._navigatorViewForUISourceCode(a).removeUISourceCode(a)},revealUISourceCode:function(a,b){this._navigatorViewForUISourceCode(a).revealUISourceCode(a,
b);a.isContentScript?this._tabbedPane.selectTab(WebInspector.ScriptsNavigator.ContentScriptsTab):a.project().type()!==WebInspector.projectTypes.Snippets&&this._tabbedPane.selectTab(WebInspector.ScriptsNavigator.ScriptsTab)},rename:function(a,b){this._navigatorViewForUISourceCode(a).rename(a,b)},_scriptSelected:function(a){this.dispatchEventToListeners(WebInspector.ScriptsNavigator.Events.ScriptSelected,a.data)},_fileRenamed:function(a){this.dispatchEventToListeners(WebInspector.ScriptsNavigator.Events.FileRenamed,
a.data)},_itemRenamingRequested:function(a){this.dispatchEventToListeners(WebInspector.ScriptsNavigator.Events.ItemRenamingRequested,a.data)},_snippetCreationRequested:function(a){this.dispatchEventToListeners(WebInspector.ScriptsNavigator.Events.SnippetCreationRequested,a.data)},__proto__:WebInspector.Object.prototype};WebInspector.SnippetsNavigatorView=function(){WebInspector.NavigatorView.call(this);this.element.addEventListener("contextmenu",this.handleContextMenu.bind(this),!1)};
WebInspector.SnippetsNavigatorView.Events={SnippetCreationRequested:"SnippetCreationRequested",ItemRenamingRequested:"ItemRenamingRequested"};
WebInspector.SnippetsNavigatorView.prototype={handleContextMenu:function(a,b){var c=new WebInspector.ContextMenu(a);b&&(c.appendItem(WebInspector.UIString("Run"),this._handleEvaluateSnippet.bind(this,b)),c.appendItem(WebInspector.UIString("Rename"),this._handleRenameSnippet.bind(this,b)),c.appendItem(WebInspector.UIString("Remove"),this._handleRemoveSnippet.bind(this,b)),c.appendSeparator());c.appendItem(WebInspector.UIString("New"),this._handleCreateSnippet.bind(this));c.show()},_handleEvaluateSnippet:function(a){a.project().type()===
WebInspector.projectTypes.Snippets&&WebInspector.scriptSnippetModel.evaluateScriptSnippet(a)},_handleRenameSnippet:function(a){this.dispatchEventToListeners(WebInspector.ScriptsNavigator.Events.ItemRenamingRequested,a)},_handleRemoveSnippet:function(a){a.project().type()===WebInspector.projectTypes.Snippets&&WebInspector.scriptSnippetModel.deleteScriptSnippet(a)},_handleCreateSnippet:function(){this._snippetCreationRequested()},_snippetCreationRequested:function(){this.dispatchEventToListeners(WebInspector.SnippetsNavigatorView.Events.SnippetCreationRequested,
null)},__proto__:WebInspector.NavigatorView.prototype};WebInspector.ScriptsSearchScope=function(a){WebInspector.SearchScope.call(this);this._searchId=0;this._workspace=a};
WebInspector.ScriptsSearchScope.prototype={performSearch:function(a,b,c){function e(a){return!a.isContentScript}function d(){if(h<g.length){var b=g[h++];b.searchInContent(a.query,!a.ignoreCase,a.isRegex,f.bind(this,this._searchId,b))}else c(!0)}function f(a,e,f){a!==this._searchId?c(!1):(e=new WebInspector.FileBasedSearchResultsPane.SearchResult(e,f),b(e),a!==this._searchId?c(!1):d.call(this))}this.stopSearch();var g=this._sortedUISourceCodes(),h=0;WebInspector.settings.searchInContentScripts.get()||
(g=g.filter(e));d.call(this);return g.length},stopSearch:function(){++this._searchId},createSearchResultsPane:function(a){return new WebInspector.FileBasedSearchResultsPane(a)},_sortedUISourceCodes:function(){for(var a=this._workspace.projects(),b=[],c=0;c<a.length;++c)a[c].isServiceProject()||(b=b.concat(a[c].uiSourceCodes()));b=b.filter(function(a){return!!a.originURL()});b.sort(function(a,b){return a.originURL().compareTo(b.originURL())});return b},__proto__:WebInspector.SearchScope.prototype};
WebInspector.SnippetJavaScriptSourceFrame=function(a,b){WebInspector.JavaScriptSourceFrame.call(this,a,b);this._uiSourceCode=b;this._runButton=new WebInspector.StatusBarButton(WebInspector.UIString("Run"),"evaluate-snippet-status-bar-item");this._runButton.addEventListener("click",this._runButtonClicked,this);this.textEditor.element.addEventListener("keydown",this._onKeyDown.bind(this),!0);this._snippetsShortcuts={};var c=WebInspector.KeyboardShortcut.makeDescriptor(WebInspector.KeyboardShortcut.Keys.Enter,
WebInspector.KeyboardShortcut.Modifiers.CtrlOrMeta);this._snippetsShortcuts[c.key]=this._runSnippet.bind(this)};
WebInspector.SnippetJavaScriptSourceFrame.prototype={statusBarItems:function(){return[this._runButton.element].concat(WebInspector.JavaScriptSourceFrame.prototype.statusBarItems.call(this))},_runButtonClicked:function(){this._runSnippet()},_runSnippet:function(){WebInspector.scriptSnippetModel.evaluateScriptSnippet(this._uiSourceCode)},_onKeyDown:function(a){var b=WebInspector.KeyboardShortcut.makeKeyFromEvent(a);if(b=this._snippetsShortcuts[b])b(a),a.handled=!0},__proto__:WebInspector.JavaScriptSourceFrame.prototype};
WebInspector.StyleSheetOutlineDialog=function(a,b){WebInspector.SelectionDialogContentProvider.call(this);this._rules=[];this._view=a;this._uiSourceCode=b};WebInspector.StyleSheetOutlineDialog.show=function(a,b){if(WebInspector.Dialog.currentInstance())return null;var c=new WebInspector.StyleSheetOutlineDialog(a,b),c=new WebInspector.FilteredItemSelectionDialog(c);WebInspector.Dialog.show(a.element,c)};
WebInspector.StyleSheetOutlineDialog.prototype={itemTitleAt:function(a){return this._rules[a].selectorText},itemSuffixAt:function(a){return""},itemSubtitleAt:function(a){return":"+(this._rules[a].sourceLine+1)},itemKeyAt:function(a){return this._rules[a].selectorText},itemsCount:function(){return this._rules.length},requestItems:function(a){function b(b){b?(this._rules=b.rules,a(0,1)):a(0,0)}CSSAgent.getAllStyleSheets(function(c,e){if(!c)for(var d=0;d<e.length;++d){var f=e[d];if(f.sourceURL===this._uiSourceCode.url){WebInspector.CSSStyleSheet.createForId(f.styleSheetId,
b.bind(this));return}}a(0,0)}.bind(this))},selectItem:function(a,b){var c=this._rules[a].sourceLine;!isNaN(c)&&0<=c&&this._view.highlightLine(c);this._view.focus()},rewriteQuery:function(a){return a},dispose:function(){}};WebInspector.TabbedEditorContainerDelegate=function(){};WebInspector.TabbedEditorContainerDelegate.prototype={viewForFile:function(a){}};
WebInspector.TabbedEditorContainer=function(a,b){WebInspector.Object.call(this);this._delegate=a;this._tabbedPane=new WebInspector.TabbedPane;this._tabbedPane.setTabDelegate(new WebInspector.EditorContainerTabDelegate(this));this._tabbedPane.closeableTabs=!0;this._tabbedPane.element.id="scripts-editor-container-tabbed-pane";this._tabbedPane.addEventListener(WebInspector.TabbedPane.EventTypes.TabClosed,this._tabClosed,this);this._tabbedPane.addEventListener(WebInspector.TabbedPane.EventTypes.TabSelected,
this._tabSelected,this);this._tabIds=new Map;this._files={};this._loadedURIs={};this._previouslyViewedFilesSetting=WebInspector.settings.createSetting(b,[]);this._history=WebInspector.TabbedEditorContainer.History.fromObject(this._previouslyViewedFilesSetting.get())};WebInspector.TabbedEditorContainer.Events={EditorSelected:"EditorSelected",EditorClosed:"EditorClosed"};WebInspector.TabbedEditorContainer._tabId=0;WebInspector.TabbedEditorContainer.maximalPreviouslyViewedFilesCount=30;
WebInspector.TabbedEditorContainer.prototype={get view(){return this._tabbedPane},get visibleView(){return this._tabbedPane.visibleView},show:function(a){this._tabbedPane.show(a)},showFile:function(a){this._innerShowFile(a,!0)},_addScrollAndSelectionListeners:function(){this._currentView&&(this._currentView.addEventListener(WebInspector.SourceFrame.Events.ScrollChanged,this._scrollChanged,this),this._currentView.addEventListener(WebInspector.SourceFrame.Events.SelectionChanged,this._selectionChanged,
this))},_removeScrollAndSelectionListeners:function(){this._currentView&&(this._currentView.removeEventListener(WebInspector.SourceFrame.Events.ScrollChanged,this._scrollChanged,this),this._currentView.removeEventListener(WebInspector.SourceFrame.Events.SelectionChanged,this._selectionChanged,this))},_scrollChanged:function(a){a=a.data;this._history.updateScrollLineNumber(this._currentFile.uri(),a);this._history.save(this._previouslyViewedFilesSetting)},_selectionChanged:function(a){a=a.data;this._history.updateSelectionRange(this._currentFile.uri(),
a);this._history.save(this._previouslyViewedFilesSetting)},_innerShowFile:function(a,b){if(this._currentFile!==a){this._removeScrollAndSelectionListeners();this._currentFile=a;var c=this._tabIds.get(a)||this._appendFileTab(a,b);this._tabbedPane.selectTab(c,b);b&&this._editorSelectedByUserAction();this._currentView=this.visibleView;this._addScrollAndSelectionListeners();this.dispatchEventToListeners(WebInspector.TabbedEditorContainer.Events.EditorSelected,this._currentFile)}},_titleForFile:function(a){var b=
a.name(),b=b?b.centerEllipsizedToLength(30):WebInspector.UIString("(program)");a.isDirty()&&(b+="*");return b},_maybeCloseTab:function(a,b){var c=this._files[a];return c.isDirty()&&c.project().canSetFileContent()&&!confirm(WebInspector.UIString("Are you sure you want to close unsaved file: %s?",c.name()))?!1:(c.resetWorkingCopy(),b&&this._tabbedPane.selectTab(b,!0),this._tabbedPane.closeTab(a,!0),!0)},_closeTabs:function(a){for(var b=[],c=[],e=0;e<a.length;++e){var d=a[e];this._files[d].isDirty()?
b.push(d):c.push(d)}b.length&&this._tabbedPane.selectTab(b[0],!0);this._tabbedPane.closeTabs(c,!0);for(e=0;e<b.length&&this._maybeCloseTab(b[e],e+1<b.length?b[e+1]:null);++e);},addUISourceCode:function(a){if(!this._userSelectedFiles&&!this._loadedURIs[a.uri()]){this._loadedURIs[a.uri()]=!0;var b=this._history.index(a.uri());if(-1!==b&&(this._tabIds.get(a)||this._appendFileTab(a,!1),this._currentFile))if(b){var b=this._currentFile.project().type(),c=a.project().type(),e=WebInspector.projectTypes.Snippets;
this._history.index(this._currentFile.uri())&&b===e&&c!==e&&this._innerShowFile(a,!1)}else this._innerShowFile(a,!1)}},removeUISourceCode:function(a){this.removeUISourceCodes([a])},removeUISourceCodes:function(a){for(var b=[],c=0;c<a.length;++c){var e=a[c];delete this._loadedURIs[e.uri()];(e=this._tabIds.get(e))&&b.push(e)}this._tabbedPane.closeTabs(b)},_editorClosedByUserAction:function(a){this._userSelectedFiles=!0;this._history.remove(a.uri());this._updateHistory()},_editorSelectedByUserAction:function(){this._userSelectedFiles=
!0;this._updateHistory()},_updateHistory:function(){var a=this._tabbedPane.lastOpenedTabIds(WebInspector.TabbedEditorContainer.maximalPreviouslyViewedFilesCount);this._history.update(a.map(function(a){return this._files[a].uri()}.bind(this)));this._history.save(this._previouslyViewedFilesSetting)},_tooltipForFile:function(a){return a.originURL()},_appendFileTab:function(a,b){var c=this._delegate.viewForFile(a),e=this._titleForFile(a),d=this._tooltipForFile(a),f=this._generateTabId();this._tabIds.put(a,
f);this._files[f]=a;var g=this._history.scrollLineNumber(a.uri());g&&c.scrollToLine(g);(g=this._history.selectionRange(a.uri()))&&c.setSelection(g);this._tabbedPane.appendTab(f,e,c,d,b);this._addUISourceCodeListeners(a);return f},_tabClosed:function(a){var b=a.data.tabId;a=a.data.isUserGesture;var c=this._files[b];this._currentFile===c&&(this._removeScrollAndSelectionListeners(),delete this._currentView,delete this._currentFile);this._tabIds.remove(c);delete this._files[b];this._removeUISourceCodeListeners(c);
this.dispatchEventToListeners(WebInspector.TabbedEditorContainer.Events.EditorClosed,c);a&&this._editorClosedByUserAction(c)},_tabSelected:function(a){this._innerShowFile(this._files[a.data.tabId],a.data.isUserGesture)},_addUISourceCodeListeners:function(a){a.addEventListener(WebInspector.UISourceCode.Events.TitleChanged,this._uiSourceCodeTitleChanged,this);a.addEventListener(WebInspector.UISourceCode.Events.WorkingCopyChanged,this._uiSourceCodeWorkingCopyChanged,this);a.addEventListener(WebInspector.UISourceCode.Events.WorkingCopyCommitted,
this._uiSourceCodeWorkingCopyCommitted,this);a.addEventListener(WebInspector.UISourceCode.Events.FormattedChanged,this._uiSourceCodeFormattedChanged,this)},_removeUISourceCodeListeners:function(a){a.removeEventListener(WebInspector.UISourceCode.Events.TitleChanged,this._uiSourceCodeTitleChanged,this);a.removeEventListener(WebInspector.UISourceCode.Events.WorkingCopyChanged,this._uiSourceCodeWorkingCopyChanged,this);a.removeEventListener(WebInspector.UISourceCode.Events.WorkingCopyCommitted,this._uiSourceCodeWorkingCopyCommitted,
this);a.removeEventListener(WebInspector.UISourceCode.Events.FormattedChanged,this._uiSourceCodeFormattedChanged,this)},_updateFileTitle:function(a){var b=this._tabIds.get(a);b&&(a=this._titleForFile(a),this._tabbedPane.changeTabTitle(b,a))},_uiSourceCodeTitleChanged:function(a){this._updateFileTitle(a.target)},_uiSourceCodeWorkingCopyChanged:function(a){this._updateFileTitle(a.target)},_uiSourceCodeWorkingCopyCommitted:function(a){this._updateFileTitle(a.target)},_uiSourceCodeFormattedChanged:function(a){this._updateFileTitle(a.target)},
reset:function(){delete this._userSelectedFiles},_generateTabId:function(){return"tab_"+WebInspector.TabbedEditorContainer._tabId++},currentFile:function(){return this._currentFile},__proto__:WebInspector.Object.prototype};WebInspector.TabbedEditorContainer.HistoryItem=function(a,b,c){this.url=a;this._isSerializable=a.length<WebInspector.TabbedEditorContainer.HistoryItem.serializableUrlLengthLimit;this.selectionRange=b;this.scrollLineNumber=c};
WebInspector.TabbedEditorContainer.HistoryItem.serializableUrlLengthLimit=4096;WebInspector.TabbedEditorContainer.HistoryItem.fromObject=function(a){var b=a.selectionRange?WebInspector.TextRange.fromObject(a.selectionRange):null;return new WebInspector.TabbedEditorContainer.HistoryItem(a.url?a.url:a,b,a.scrollLineNumber?a.scrollLineNumber:0)};
WebInspector.TabbedEditorContainer.HistoryItem.prototype={serializeToObject:function(){if(!this._isSerializable)return null;var a={};a.url=this.url;a.selectionRange=this.selectionRange;a.scrollLineNumber=this.scrollLineNumber;return a},__proto__:WebInspector.Object.prototype};WebInspector.TabbedEditorContainer.History=function(a){this._items=a;this._rebuildItemIndex()};
WebInspector.TabbedEditorContainer.History.fromObject=function(a){for(var b=[],c=0;c<a.length;++c)b.push(WebInspector.TabbedEditorContainer.HistoryItem.fromObject(a[c]));return new WebInspector.TabbedEditorContainer.History(b)};
WebInspector.TabbedEditorContainer.History.prototype={index:function(a){a=this._itemsIndex[a];return"number"===typeof a?a:-1},_rebuildItemIndex:function(){this._itemsIndex={};for(var a=0;a<this._items.length;++a)console.assert(!this._itemsIndex.hasOwnProperty(this._items[a].url)),this._itemsIndex[this._items[a].url]=a},selectionRange:function(a){a=this.index(a);return-1!==a?this._items[a].selectionRange:void 0},updateSelectionRange:function(a,b){if(b){var c=this.index(a);-1!==c&&(this._items[c].selectionRange=
b)}},scrollLineNumber:function(a){a=this.index(a);return-1!==a?this._items[a].scrollLineNumber:void 0},updateScrollLineNumber:function(a,b){var c=this.index(a);-1!==c&&(this._items[c].scrollLineNumber=b)},update:function(a){for(var b=a.length-1;0<=b;--b){var c=this.index(a[b]),e;-1!==c?(e=this._items[c],this._items.splice(c,1)):e=new WebInspector.TabbedEditorContainer.HistoryItem(a[b]);this._items.unshift(e);this._rebuildItemIndex()}},remove:function(a){a=this.index(a);-1!==a&&(this._items.splice(a,
1),this._rebuildItemIndex())},save:function(a){a.set(this._serializeToObject())},_serializeToObject:function(){for(var a=[],b=0;b<this._items.length;++b){var c=this._items[b].serializeToObject();c&&a.push(c);if(a.length===WebInspector.TabbedEditorContainer.maximalPreviouslyViewedFilesCount)break}return a},__proto__:WebInspector.Object.prototype};WebInspector.EditorContainerTabDelegate=function(a){this._editorContainer=a};WebInspector.EditorContainerTabDelegate.prototype={closeTabs:function(a,b){this._editorContainer._closeTabs(b)}};
WebInspector.WatchExpressionsSidebarPane=function(){WebInspector.SidebarPane.call(this,WebInspector.UIString("Watch Expressions"));this.section=new WebInspector.WatchExpressionsSection;this.bodyElement.appendChild(this.section.element);var a=document.createElement("button");a.className="pane-title-button refresh";a.addEventListener("click",this._refreshButtonClicked.bind(this),!1);a.title=WebInspector.UIString("Refresh");this.titleElement.appendChild(a);a=document.createElement("button");a.className=
"pane-title-button add";a.addEventListener("click",this._addButtonClicked.bind(this),!1);this.titleElement.appendChild(a);a.title=WebInspector.UIString("Add watch expression");this._requiresUpdate=!0};
WebInspector.WatchExpressionsSidebarPane.prototype={wasShown:function(){this._refreshExpressionsIfNeeded()},reset:function(){this.refreshExpressions()},refreshExpressions:function(){this._requiresUpdate=!0;this._refreshExpressionsIfNeeded()},addExpression:function(a){this.section.addExpression(a);this.expand()},_refreshExpressionsIfNeeded:function(){this._requiresUpdate&&this.isShowing()?(this.section.update(),delete this._requiresUpdate):this._requiresUpdate=!0},_addButtonClicked:function(a){a.consume();
this.expand();this.section.addNewExpressionAndEdit()},_refreshButtonClicked:function(a){a.consume();this.refreshExpressions()},__proto__:WebInspector.SidebarPane.prototype};
WebInspector.WatchExpressionsSection=function(){this._watchObjectGroupId="watch-group";WebInspector.ObjectPropertiesSection.call(this,WebInspector.RemoteObject.fromPrimitiveValue(""));this.treeElementConstructor=WebInspector.WatchedPropertyTreeElement;this._expandedExpressions={};this._expandedProperties={};this.emptyElement=document.createElement("div");this.emptyElement.className="info";this.emptyElement.textContent=WebInspector.UIString("No Watch Expressions");this.watchExpressions=WebInspector.settings.watchExpressions.get();
this.headerElement.className="hidden";this.expanded=this.editable=!0;this.propertiesElement.addStyleClass("watch-expressions");this.element.addEventListener("mousemove",this._mouseMove.bind(this),!0);this.element.addEventListener("mouseout",this._mouseOut.bind(this),!0);this.element.addEventListener("dblclick",this._sectionDoubleClick.bind(this),!1);this.emptyElement.addEventListener("contextmenu",this._emptyElementContextMenu.bind(this),!1)};
WebInspector.WatchExpressionsSection.NewWatchExpression="\u00a0";
WebInspector.WatchExpressionsSection.prototype={update:function(a){function b(a,b,d,k){d&&(a=new WebInspector.RemoteObjectProperty(a,d),a.watchIndex=b,a.wasThrown=k,c.push(a),c.length==e&&(this.updateProperties(c,[],WebInspector.WatchExpressionTreeElement,WebInspector.WatchExpressionsSection.CompareProperties),this._newExpressionAdded&&(delete this._newExpressionAdded,(b=this.findAddedTreeElement())&&b.startEditing()),this._lastMouseMovePageY&&this._updateHoveredElement(this._lastMouseMovePageY)))}
a&&a.consume();RuntimeAgent.releaseObjectGroup(this._watchObjectGroupId);var c=[],e=0;for(a=0;a<this.watchExpressions.length;++a)this.watchExpressions[a]&&++e;for(a=0;a<this.watchExpressions.length;++a){var d=this.watchExpressions[a];d&&WebInspector.runtimeModel.evaluate(d,this._watchObjectGroupId,!1,!0,!1,!1,b.bind(this,d,a))}e?this.emptyElement.parentNode&&this.element.removeChild(this.emptyElement):this.emptyElement.parentNode||this.element.appendChild(this.emptyElement);this.expanded=0!=e},addExpression:function(a){this.watchExpressions.push(a);
this.saveExpressions();this.update()},addNewExpressionAndEdit:function(){this._newExpressionAdded=!0;this.watchExpressions.push(WebInspector.WatchExpressionsSection.NewWatchExpression);this.update()},_sectionDoubleClick:function(a){if(a.target===this.element||a.target===this.propertiesElement||a.target===this.emptyElement)a.consume(),this.addNewExpressionAndEdit()},updateExpression:function(a,b){null===b?this.watchExpressions.splice(a.property.watchIndex,1):this.watchExpressions[a.property.watchIndex]=
b;this.saveExpressions();this.update()},_deleteAllExpressions:function(){this.watchExpressions=[];this.saveExpressions();this.update()},findAddedTreeElement:function(){for(var a=this.propertiesTreeOutline.children,b=0;b<a.length;++b)if(a[b].property.name===WebInspector.WatchExpressionsSection.NewWatchExpression)return a[b]},saveExpressions:function(){for(var a=[],b=0;b<this.watchExpressions.length;b++)this.watchExpressions[b]&&a.push(this.watchExpressions[b]);WebInspector.settings.watchExpressions.set(a);
return a.length},_mouseMove:function(a){this.propertiesElement.firstChild&&this._updateHoveredElement(a.pageY)},_mouseOut:function(){this._hoveredElement&&(this._hoveredElement.removeStyleClass("hovered"),delete this._hoveredElement);delete this._lastMouseMovePageY},_updateHoveredElement:function(a){for(var b=this.propertiesElement.firstChild;;){for(var c=b.nextSibling;c&&!c.clientHeight;)c=c.nextSibling;if(!c||c.totalOffsetTop()>a)break;b=c}this._hoveredElement!==b&&(this._hoveredElement&&this._hoveredElement.removeStyleClass("hovered"),
b&&b.addStyleClass("hovered"),this._hoveredElement=b);this._lastMouseMovePageY=a},_emptyElementContextMenu:function(a){a=new WebInspector.ContextMenu(a);a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Add watch expression":"Add Watch Expression"),this.addNewExpressionAndEdit.bind(this));a.show()},__proto__:WebInspector.ObjectPropertiesSection.prototype};
WebInspector.WatchExpressionsSection.CompareProperties=function(a,b){return a.watchIndex==b.watchIndex?0:a.watchIndex<b.watchIndex?-1:1};WebInspector.WatchExpressionTreeElement=function(a){WebInspector.ObjectPropertyTreeElement.call(this,a)};
WebInspector.WatchExpressionTreeElement.prototype={onexpand:function(){WebInspector.ObjectPropertyTreeElement.prototype.onexpand.call(this);this.treeOutline.section._expandedExpressions[this._expression()]=!0},oncollapse:function(){WebInspector.ObjectPropertyTreeElement.prototype.oncollapse.call(this);delete this.treeOutline.section._expandedExpressions[this._expression()]},onattach:function(){WebInspector.ObjectPropertyTreeElement.prototype.onattach.call(this);this.treeOutline.section._expandedExpressions[this._expression()]&&
(this.expanded=!0)},_expression:function(){return this.property.name},update:function(){WebInspector.ObjectPropertyTreeElement.prototype.update.call(this);this.property.wasThrown?(this.valueElement.textContent=WebInspector.UIString("<not available>"),this.listItemElement.addStyleClass("dimmed")):this.listItemElement.removeStyleClass("dimmed");var a=document.createElement("input");a.type="button";a.title=WebInspector.UIString("Delete watch expression.");a.addStyleClass("enabled-button");a.addStyleClass("delete-button");
a.addEventListener("click",this._deleteButtonClicked.bind(this),!1);this.listItemElement.addEventListener("contextmenu",this._contextMenu.bind(this),!1);this.listItemElement.insertBefore(a,this.listItemElement.firstChild)},populateContextMenu:function(a){this.isEditing()||(a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Add watch expression":"Add Watch Expression"),this.treeOutline.section.addNewExpressionAndEdit.bind(this.treeOutline.section)),a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?
"Delete watch expression":"Delete Watch Expression"),this._deleteButtonClicked.bind(this)));1<this.treeOutline.section.watchExpressions.length&&a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Delete all watch expressions":"Delete All Watch Expressions"),this._deleteAllButtonClicked.bind(this))},_contextMenu:function(a){a=new WebInspector.ContextMenu(a);this.populateContextMenu(a);a.show()},_deleteAllButtonClicked:function(){this.treeOutline.section._deleteAllExpressions()},
_deleteButtonClicked:function(){this.treeOutline.section.updateExpression(this,null)},renderPromptAsBlock:function(){return!0},elementAndValueToEdit:function(a){return[this.nameElement,this.property.name.trim()]},editingCancelled:function(a,b){b.elementToEdit.textContent||this.treeOutline.section.updateExpression(this,null);WebInspector.ObjectPropertyTreeElement.prototype.editingCancelled.call(this,a,b)},applyExpression:function(a,b){(a=a.trim())||(a=null);this.property.name=a;this.treeOutline.section.updateExpression(this,
a)},__proto__:WebInspector.ObjectPropertyTreeElement.prototype};WebInspector.WatchedPropertyTreeElement=function(a){WebInspector.ObjectPropertyTreeElement.call(this,a)};
WebInspector.WatchedPropertyTreeElement.prototype={onattach:function(){WebInspector.ObjectPropertyTreeElement.prototype.onattach.call(this);this.hasChildren&&this.propertyPath()in this.treeOutline.section._expandedProperties&&this.expand()},onexpand:function(){WebInspector.ObjectPropertyTreeElement.prototype.onexpand.call(this);this.treeOutline.section._expandedProperties[this.propertyPath()]=!0},oncollapse:function(){WebInspector.ObjectPropertyTreeElement.prototype.oncollapse.call(this);delete this.treeOutline.section._expandedProperties[this.propertyPath()]},
__proto__:WebInspector.ObjectPropertyTreeElement.prototype};WebInspector.Worker=function(a,b,c){this.id=a;this.url=b;this.shared=c};
WebInspector.WorkersSidebarPane=function(a){WebInspector.SidebarPane.call(this,WebInspector.UIString("Workers"));this._enableWorkersCheckbox=new WebInspector.Checkbox(WebInspector.UIString("Pause on start"),"sidebar-label",WebInspector.UIString("Automatically attach to new workers and pause them. Enabling this option will force opening inspector for all new workers."));this._enableWorkersCheckbox.element.id="pause-workers-checkbox";this.bodyElement.appendChild(this._enableWorkersCheckbox.element);
this._enableWorkersCheckbox.addEventListener(this._autoattachToWorkersClicked.bind(this));this._enableWorkersCheckbox.checked=!1;if(Preferences.sharedWorkersDebugNote){var b=this.bodyElement.createChild("div");b.id="shared-workers-list";b.addStyleClass("sidebar-label");b.textContent=Preferences.sharedWorkersDebugNote}this.bodyElement.createChild("div","sidebar-separator").textContent=WebInspector.UIString("Dedicated worker inspectors");this._workerListElement=document.createElement("ol");this._workerListElement.tabIndex=
0;this._workerListElement.addStyleClass("properties-tree");this._workerListElement.addStyleClass("sidebar-label");this.bodyElement.appendChild(this._workerListElement);this._idToWorkerItem={};this._workerManager=a;a.addEventListener(WebInspector.WorkerManager.Events.WorkerAdded,this._workerAdded,this);a.addEventListener(WebInspector.WorkerManager.Events.WorkerRemoved,this._workerRemoved,this);a.addEventListener(WebInspector.WorkerManager.Events.WorkersCleared,this._workersCleared,this)};
WebInspector.WorkersSidebarPane.prototype={_workerAdded:function(a){this._addWorker(a.data.workerId,a.data.url,a.data.inspectorConnected)},_workerRemoved:function(a){var b=this._idToWorkerItem[a.data];delete this._idToWorkerItem[a.data];b.parentElement.removeChild(b)},_workersCleared:function(a){this._idToWorkerItem={};this._workerListElement.removeChildren()},_addWorker:function(a,b,c){c=this._workerListElement.createChild("div","dedicated-worker-item");var e=c.createChild("a");e.textContent=b;e.href=
"#";e.target="_blank";e.addEventListener("click",this._workerItemClicked.bind(this,a),!0);this._idToWorkerItem[a]=c},_workerItemClicked:function(a,b){b.preventDefault();this._workerManager.openWorkerInspector(a)},_autoattachToWorkersClicked:function(a){WorkerAgent.setAutoconnectToWorkers(this._enableWorkersCheckbox.checked)},__proto__:WebInspector.SidebarPane.prototype};
WebInspector.ScriptsPanel=function(a){WebInspector.Panel.call(this,"scripts");this.registerRequiredCSS("scriptsPanel.css");WebInspector.settings.navigatorWasOnceHidden=WebInspector.settings.createSetting("navigatorWasOnceHidden",!1);WebInspector.settings.debuggerSidebarHidden=WebInspector.settings.createSetting("debuggerSidebarHidden",!1);this._workspace=a||WebInspector.workspace;WebInspector.GoToLineDialog.install(this,function(){return this.visibleView}.bind(this));WebInspector.shortcutsScreen.section(WebInspector.UIString("Sources Panel"));
this.debugToolbar=this._createDebugToolbar();this.createSidebarView(this.element,WebInspector.SidebarView.SidebarPosition.End,225);this.splitView.element.id="scripts-split-view";this.splitView.setMinimumSidebarWidth(Preferences.minScriptsSidebarWidth);this.splitView.setMinimumMainWidthPercent(50);this.debugSidebarResizeWidgetElement=document.createElement("div");this.debugSidebarResizeWidgetElement.id="scripts-debug-sidebar-resizer-widget";this.splitView.installResizer(this.debugSidebarResizeWidgetElement);
this.editorView=new WebInspector.SidebarView(WebInspector.SidebarView.SidebarPosition.Start,"scriptsPanelNavigatorSidebarWidth",225);this.editorView.element.tabIndex=0;this.editorView.setMinimumSidebarWidth(Preferences.minScriptsSidebarWidth);this.editorView.setMinimumMainWidthPercent(50);this.editorView.show(this.splitView.mainElement);this._navigator=new WebInspector.ScriptsNavigator;this._navigator.view.show(this.editorView.sidebarElement);this._editorContainer=new WebInspector.TabbedEditorContainer(this,
"previouslyViewedFiles");this._editorContainer.show(this.editorView.mainElement);this._navigatorController=new WebInspector.NavigatorOverlayController(this.editorView,this._navigator.view,this._editorContainer.view);this._navigator.addEventListener(WebInspector.ScriptsNavigator.Events.ScriptSelected,this._scriptSelected,this);this._navigator.addEventListener(WebInspector.ScriptsNavigator.Events.SnippetCreationRequested,this._snippetCreationRequested,this);this._navigator.addEventListener(WebInspector.ScriptsNavigator.Events.ItemRenamingRequested,
this._itemRenamingRequested,this);this._navigator.addEventListener(WebInspector.ScriptsNavigator.Events.FileRenamed,this._fileRenamed,this);this._editorContainer.addEventListener(WebInspector.TabbedEditorContainer.Events.EditorSelected,this._editorSelected,this);this._editorContainer.addEventListener(WebInspector.TabbedEditorContainer.Events.EditorClosed,this._editorClosed,this);this.splitView.mainElement.appendChild(this.debugSidebarResizeWidgetElement);this.sidebarPanes={};this.sidebarPanes.watchExpressions=
new WebInspector.WatchExpressionsSidebarPane;this.sidebarPanes.callstack=new WebInspector.CallStackSidebarPane;this.sidebarPanes.scopechain=new WebInspector.ScopeChainSidebarPane;this.sidebarPanes.jsBreakpoints=new WebInspector.JavaScriptBreakpointsSidebarPane(WebInspector.breakpointManager,this._showSourceLine.bind(this));this.sidebarPanes.domBreakpoints=WebInspector.domBreakpointsSidebarPane.createProxy(this);this.sidebarPanes.xhrBreakpoints=new WebInspector.XHRBreakpointsSidebarPane;this.sidebarPanes.eventListenerBreakpoints=
new WebInspector.EventListenerBreakpointsSidebarPane;Capabilities.canInspectWorkers&&!WebInspector.WorkerManager.isWorkerFrontend()&&(WorkerAgent.enable(),this.sidebarPanes.workerList=new WebInspector.WorkersSidebarPane(WebInspector.workerManager));this.sidebarPanes.callstack.registerShortcuts(this.registerShortcuts.bind(this));this.registerShortcuts(WebInspector.ScriptsPanelDescriptor.ShortcutKeys.EvaluateSelectionInConsole,this._evaluateSelectionInConsole.bind(this));this.registerShortcuts(WebInspector.ScriptsPanelDescriptor.ShortcutKeys.GoToMember,
this._showOutlineDialog.bind(this));this.registerShortcuts(WebInspector.ScriptsPanelDescriptor.ShortcutKeys.ToggleBreakpoint,this._toggleBreakpoint.bind(this));a=WebInspector.UIString("You need to enable debugging before you can use the Scripts panel.");var b=WebInspector.UIString("Enabling debugging will make scripts run slower."),c=WebInspector.UIString("Enable Debugging");this.panelEnablerView=new WebInspector.PanelEnablerView("scripts",a,b,c);this.panelEnablerView.addEventListener("enable clicked",
this._enableDebugging,this);this.enableToggleButton=new WebInspector.StatusBarButton("","enable-toggle-status-bar-item");this.enableToggleButton.addEventListener("click",this._toggleDebugging,this);Capabilities.debuggerCausesRecompilation||this.enableToggleButton.element.addStyleClass("hidden");this._pauseOnExceptionButton=new WebInspector.StatusBarButton("","scripts-pause-on-exceptions-status-bar-item",3);this._pauseOnExceptionButton.addEventListener("click",this._togglePauseOnExceptions,this);this._toggleFormatSourceButton=
new WebInspector.StatusBarButton(WebInspector.UIString("Pretty print"),"scripts-toggle-pretty-print-status-bar-item");this._toggleFormatSourceButton.toggled=!1;this._toggleFormatSourceButton.addEventListener("click",this._toggleFormatSource,this);this._scriptViewStatusBarItemsContainer=document.createElement("div");this._scriptViewStatusBarItemsContainer.className="inline-block";this._scriptViewStatusBarTextContainer=document.createElement("div");this._scriptViewStatusBarTextContainer.className="inline-block";
this._installDebuggerSidebarController();WebInspector.dockController.addEventListener(WebInspector.DockController.Events.DockSideChanged,this._dockSideChanged.bind(this));WebInspector.settings.splitVerticallyWhenDockedToRight.addChangeListener(this._dockSideChanged.bind(this));this._dockSideChanged();this._sourceFramesByUISourceCode=new Map;this._updateDebuggerButtons();this._pauseOnExceptionStateChanged();WebInspector.debuggerModel.isPaused()&&this._debuggerPaused();WebInspector.settings.pauseOnExceptionStateString.addChangeListener(this._pauseOnExceptionStateChanged,
this);WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.DebuggerWasEnabled,this._debuggerWasEnabled,this);WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.DebuggerWasDisabled,this._debuggerWasDisabled,this);WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.DebuggerPaused,this._debuggerPaused,this);WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.DebuggerResumed,this._debuggerResumed,this);
WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.CallFrameSelected,this._callFrameSelected,this);WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.ConsoleCommandEvaluatedInSelectedCallFrame,this._consoleCommandEvaluatedInSelectedCallFrame,this);WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.ExecutionLineChanged,this._executionLineChanged,this);WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.BreakpointsActiveStateChanged,
this._breakpointsActiveStateChanged,this);WebInspector.startBatchUpdate();a=this._workspace.uiSourceCodes();for(b=0;b<a.length;++b)this._addUISourceCode(a[b]);WebInspector.endBatchUpdate();this._workspace.addEventListener(WebInspector.UISourceCodeProvider.Events.UISourceCodeAdded,this._uiSourceCodeAdded,this);this._workspace.addEventListener(WebInspector.UISourceCodeProvider.Events.UISourceCodeRemoved,this._uiSourceCodeRemoved,this);this._workspace.addEventListener(WebInspector.Workspace.Events.ProjectWillReset,
this._projectWillReset.bind(this),this);WebInspector.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.GlobalObjectCleared,this._debuggerReset,this);WebInspector.advancedSearchController.registerSearchScope(new WebInspector.ScriptsSearchScope(this._workspace))};
WebInspector.ScriptsPanel.prototype={statusBarItems:function(){return[this.enableToggleButton.element,this._pauseOnExceptionButton.element,this._toggleFormatSourceButton.element,this._scriptViewStatusBarItemsContainer]},statusBarText:function(){return this._scriptViewStatusBarTextContainer},defaultFocusedElement:function(){return this._editorContainer.view.defaultFocusedElement()||this._navigator.view.defaultFocusedElement()},get paused(){return this._paused},wasShown:function(){WebInspector.Panel.prototype.wasShown.call(this);
this._navigatorController.wasShown()},willHide:function(){WebInspector.Panel.prototype.willHide.call(this);WebInspector.closeViewInDrawer()},_uiSourceCodeAdded:function(a){this._addUISourceCode(a.data)},_addUISourceCode:function(a){this._toggleFormatSourceButton.toggled&&a.setFormatted(!0);if(!a.project().isServiceProject()){this._navigator.addUISourceCode(a);this._editorContainer.addUISourceCode(a);var b=this._currentUISourceCode;b&&b.project().isServiceProject()&&b!==a&&b.url===a.url&&(this._showFile(a),
this._editorContainer.removeUISourceCode(b))}},_uiSourceCodeRemoved:function(a){this._removeUISourceCodes([a.data])},_removeUISourceCodes:function(a){for(var b=0;b<a.length;++b)this._navigator.removeUISourceCode(a[b]),this._removeSourceFrame(a[b]);this._editorContainer.removeUISourceCodes(a)},_consoleCommandEvaluatedInSelectedCallFrame:function(a){this.sidebarPanes.scopechain.update(WebInspector.debuggerModel.selectedCallFrame())},_debuggerPaused:function(){var a=WebInspector.debuggerModel.debuggerPausedDetails();
this._paused=!0;this._stepping=this._waitingToPause=!1;this._updateDebuggerButtons();WebInspector.inspectorView.setCurrentPanel(this);this.sidebarPanes.callstack.update(a.callFrames);if(a.reason===WebInspector.DebuggerModel.BreakReason.DOM)WebInspector.domBreakpointsSidebarPane.highlightBreakpoint(a.auxData),WebInspector.domBreakpointsSidebarPane.createBreakpointHitStatusMessage(a.auxData,function(a){this.sidebarPanes.callstack.setStatus(a)}.bind(this));else if(a.reason===WebInspector.DebuggerModel.BreakReason.EventListener){var b=
a.auxData.eventName;this.sidebarPanes.eventListenerBreakpoints.highlightBreakpoint(a.auxData.eventName);a=WebInspector.EventListenerBreakpointsSidebarPane.eventNameForUI(b);this.sidebarPanes.callstack.setStatus(WebInspector.UIString('Paused on a "%s" Event Listener.',a))}else a.reason===WebInspector.DebuggerModel.BreakReason.XHR?(this.sidebarPanes.xhrBreakpoints.highlightBreakpoint(a.auxData.breakpointURL),this.sidebarPanes.callstack.setStatus(WebInspector.UIString("Paused on a XMLHttpRequest."))):
a.reason===WebInspector.DebuggerModel.BreakReason.Exception?this.sidebarPanes.callstack.setStatus(WebInspector.UIString("Paused on exception: '%s'.",a.auxData.description)):a.reason===WebInspector.DebuggerModel.BreakReason.Assert?this.sidebarPanes.callstack.setStatus(WebInspector.UIString("Paused on assertion.")):a.reason===WebInspector.DebuggerModel.BreakReason.CSPViolation?this.sidebarPanes.callstack.setStatus(WebInspector.UIString('Paused on a script blocked due to Content Security Policy directive: "%s".',
a.auxData.directiveText)):(b=function(a){if(a=WebInspector.breakpointManager.findBreakpoint(a.uiSourceCode,a.lineNumber))this.sidebarPanes.jsBreakpoints.highlightBreakpoint(a),this.sidebarPanes.callstack.setStatus(WebInspector.UIString("Paused on a JavaScript breakpoint."))},a.callFrames.length?a.callFrames[0].createLiveLocation(b.bind(this)):console.warn("ScriptsPanel paused, but callFrames.length is zero."));this._showDebuggerSidebar();this._toggleDebuggerSidebarButton.setEnabled(!1);window.focus();
InspectorFrontendHost.bringToFront()},_debuggerResumed:function(){this._stepping=this._waitingToPause=this._paused=!1;this._clearInterface();this._toggleDebuggerSidebarButton.setEnabled(!0)},_debuggerWasEnabled:function(){this._updateDebuggerButtons()},_debuggerWasDisabled:function(){this._debuggerReset()},_debuggerReset:function(){this._debuggerResumed();this.sidebarPanes.watchExpressions.reset()},_projectWillReset:function(a){a=a.data;var b=a.uiSourceCodes();this._removeUISourceCodes(b);a.type()===
WebInspector.projectTypes.Network&&this._editorContainer.reset()},get visibleView(){return this._editorContainer.visibleView},_updateScriptViewStatusBarItems:function(){this._scriptViewStatusBarItemsContainer.removeChildren();this._scriptViewStatusBarTextContainer.removeChildren();var a=this.visibleView;if(a){for(var b=a.statusBarItems()||[],c=0;c<b.length;++c)this._scriptViewStatusBarItemsContainer.appendChild(b[c]);(a=a.statusBarText())&&this._scriptViewStatusBarTextContainer.appendChild(a)}},canShowAnchorLocation:function(a){if(WebInspector.debuggerModel.debuggerEnabled()&&
a.uiSourceCode)return!0;var b=WebInspector.workspace.uiSourceCodeForURL(a.href);return b?(a.uiSourceCode=b,!0):!1},showAnchorLocation:function(a){this._showSourceLine(a.uiSourceCode,a.lineNumber)},showUISourceCode:function(a,b){this._showSourceLine(a,b)},_showSourceLine:function(a,b){var c=this._showFile(a);"number"===typeof b&&c.highlightLine(b);c.focus();WebInspector.notifications.dispatchEventToListeners(WebInspector.UserMetrics.UserAction,{action:WebInspector.UserMetrics.UserActionNames.OpenSourceLink,
url:a.originURL(),lineNumber:b})},_showFile:function(a){var b=this._getOrCreateSourceFrame(a);if(this._currentUISourceCode===a)return b;this._currentUISourceCode=a;a.project().isServiceProject()||this._navigator.revealUISourceCode(a,!0);this._editorContainer.showFile(a);this._updateScriptViewStatusBarItems();return b},_createSourceFrame:function(a){var b;switch(a.contentType()){case WebInspector.resourceTypes.Script:b=a.project().type()===WebInspector.projectTypes.Snippets?new WebInspector.SnippetJavaScriptSourceFrame(this,
a):new WebInspector.JavaScriptSourceFrame(this,a);break;case WebInspector.resourceTypes.Document:b=new WebInspector.JavaScriptSourceFrame(this,a);break;default:b=new WebInspector.UISourceCodeFrame(a)}this._sourceFramesByUISourceCode.put(a,b);return b},_getOrCreateSourceFrame:function(a){return this._sourceFramesByUISourceCode.get(a)||this._createSourceFrame(a)},viewForFile:function(a){return this._getOrCreateSourceFrame(a)},_removeSourceFrame:function(a){var b=this._sourceFramesByUISourceCode.get(a);
b&&(this._sourceFramesByUISourceCode.remove(a),b.dispose())},_clearCurrentExecutionLine:function(){this._executionSourceFrame&&this._executionSourceFrame.clearExecutionLine();delete this._executionSourceFrame},_executionLineChanged:function(a){a=a.data;this._clearCurrentExecutionLine();if(a){var b=this._getOrCreateSourceFrame(a.uiSourceCode);b.setExecutionLine(a.lineNumber);this._executionSourceFrame=b}},_revealExecutionLine:function(a){var b=a.uiSourceCode;this._currentUISourceCode&&this._currentUISourceCode.scriptFile()&&
this._currentUISourceCode.scriptFile().isDivergingFromVM()||(this._toggleFormatSourceButton.toggled&&!b.formatted()&&b.setFormatted(!0),b=this._showFile(b),b.revealLine(a.lineNumber),b.focus())},_callFrameSelected:function(a){if(a=a.data)this.sidebarPanes.scopechain.update(a),this.sidebarPanes.watchExpressions.refreshExpressions(),this.sidebarPanes.callstack.setSelectedCallFrame(a),a.createLiveLocation(this._revealExecutionLine.bind(this))},_editorClosed:function(a){this._navigatorController.hideNavigatorOverlay();
this._currentUISourceCode===a.data&&delete this._currentUISourceCode;this._updateScriptViewStatusBarItems();WebInspector.searchController.resetSearch()},_editorSelected:function(a){a=this._showFile(a.data);this._navigatorController.hideNavigatorOverlay();a.focus();WebInspector.searchController.resetSearch()},_scriptSelected:function(a){var b=this._showFile(a.data.uiSourceCode);this._navigatorController.hideNavigatorOverlay();b&&a.data.focusSource&&b.focus()},_pauseOnExceptionStateChanged:function(){var a=
WebInspector.settings.pauseOnExceptionStateString.get();switch(a){case WebInspector.DebuggerModel.PauseOnExceptionsState.DontPauseOnExceptions:this._pauseOnExceptionButton.title=WebInspector.UIString("Don't pause on exceptions.\nClick to Pause on all exceptions.");break;case WebInspector.DebuggerModel.PauseOnExceptionsState.PauseOnAllExceptions:this._pauseOnExceptionButton.title=WebInspector.UIString("Pause on all exceptions.\nClick to Pause on uncaught exceptions.");break;case WebInspector.DebuggerModel.PauseOnExceptionsState.PauseOnUncaughtExceptions:this._pauseOnExceptionButton.title=
WebInspector.UIString("Pause on uncaught exceptions.\nClick to Not pause on exceptions.")}this._pauseOnExceptionButton.state=a},_updateDebuggerButtons:function(){WebInspector.debuggerModel.debuggerEnabled()?(this.enableToggleButton.title=WebInspector.UIString("Debugging enabled. Click to disable."),this.enableToggleButton.toggled=!0,this._pauseOnExceptionButton.visible=!0,this.panelEnablerView.detach()):(this.enableToggleButton.title=WebInspector.UIString("Debugging disabled. Click to enable."),this.enableToggleButton.toggled=
!1,this._pauseOnExceptionButton.visible=!1,this.panelEnablerView.show(this.element));this._paused?(this._updateButtonTitle(this.pauseButton,WebInspector.UIString("Resume script execution (%s).")),this.pauseButton.addStyleClass("paused"),this.pauseButton.disabled=!1,this.stepOverButton.disabled=!1,this.stepIntoButton.disabled=!1,this.stepOutButton.disabled=!1,this.debuggerStatusElement.textContent=WebInspector.UIString("Paused")):(this._updateButtonTitle(this.pauseButton,WebInspector.UIString("Pause script execution (%s).")),
this.pauseButton.removeStyleClass("paused"),this.pauseButton.disabled=this._waitingToPause,this.stepOverButton.disabled=!0,this.stepIntoButton.disabled=!0,this.stepOutButton.disabled=!0,this.debuggerStatusElement.textContent=this._waitingToPause?WebInspector.UIString("Pausing"):this._stepping?WebInspector.UIString("Stepping"):"")},_clearInterface:function(){this.sidebarPanes.callstack.update(null);this.sidebarPanes.scopechain.update(null);this.sidebarPanes.jsBreakpoints.clearBreakpointHighlight();
WebInspector.domBreakpointsSidebarPane.clearBreakpointHighlight();this.sidebarPanes.eventListenerBreakpoints.clearBreakpointHighlight();this.sidebarPanes.xhrBreakpoints.clearBreakpointHighlight();this._clearCurrentExecutionLine();this._updateDebuggerButtons()},_enableDebugging:function(){this._toggleDebugging(this.panelEnablerView.alwaysEnabled)},_toggleDebugging:function(a){this._stepping=this._waitingToPause=this._paused=!1;WebInspector.debuggerModel.debuggerEnabled()?(WebInspector.settings.debuggerEnabled.set(!1),
WebInspector.debuggerModel.disableDebugger()):(WebInspector.settings.debuggerEnabled.set(!!a),WebInspector.debuggerModel.enableDebugger())},_togglePauseOnExceptions:function(){var a={},b=WebInspector.DebuggerModel.PauseOnExceptionsState;a[b.DontPauseOnExceptions]=b.PauseOnAllExceptions;a[b.PauseOnAllExceptions]=b.PauseOnUncaughtExceptions;a[b.PauseOnUncaughtExceptions]=b.DontPauseOnExceptions;WebInspector.settings.pauseOnExceptionStateString.set(a[this._pauseOnExceptionButton.state])},_togglePause:function(a){this._paused?
(this._waitingToPause=this._paused=!1,DebuggerAgent.resume()):(this._stepping=!1,this._waitingToPause=!0,DebuggerAgent.pause());this._clearInterface();return!0},_stepOverClicked:function(a){if(!this._paused)return!0;this._paused=!1;this._stepping=!0;this._clearInterface();DebuggerAgent.stepOver();return!0},_stepIntoClicked:function(a){if(!this._paused)return!0;this._paused=!1;this._stepping=!0;this._clearInterface();DebuggerAgent.stepInto();return!0},_stepOutClicked:function(a){if(!this._paused)return!0;
this._paused=!1;this._stepping=!0;this._clearInterface();DebuggerAgent.stepOut();return!0},_toggleBreakpointsClicked:function(a){WebInspector.debuggerModel.setBreakpointsActive(!WebInspector.debuggerModel.breakpointsActive())},_breakpointsActiveStateChanged:function(a){a=a.data;(this._toggleBreakpointsButton.toggled=a)?(this._toggleBreakpointsButton.title=WebInspector.UIString("Deactivate breakpoints."),WebInspector.inspectorView.element.removeStyleClass("breakpoints-deactivated"),this.sidebarPanes.jsBreakpoints.listElement.removeStyleClass("breakpoints-list-deactivated")):
(this._toggleBreakpointsButton.title=WebInspector.UIString("Activate breakpoints."),WebInspector.inspectorView.element.addStyleClass("breakpoints-deactivated"),this.sidebarPanes.jsBreakpoints.listElement.addStyleClass("breakpoints-list-deactivated"))},_evaluateSelectionInConsole:function(a){a=window.getSelection();if("Range"!==a.type||a.isCollapsed)return!1;WebInspector.evaluateInConsole(a.toString());return!0},_createDebugToolbar:function(){var a=document.createElement("div");a.className="status-bar";
a.id="scripts-debug-toolbar";var b,c;c=this._togglePause.bind(this);this.pauseButton=this._createButtonAndRegisterShortcuts("scripts-pause","",c,WebInspector.ScriptsPanelDescriptor.ShortcutKeys.PauseContinue);a.appendChild(this.pauseButton);b=WebInspector.UIString("Step over next function call (%s).");c=this._stepOverClicked.bind(this);this.stepOverButton=this._createButtonAndRegisterShortcuts("scripts-step-over",b,c,WebInspector.ScriptsPanelDescriptor.ShortcutKeys.StepOver);a.appendChild(this.stepOverButton);
b=WebInspector.UIString("Step into next function call (%s).");c=this._stepIntoClicked.bind(this);this.stepIntoButton=this._createButtonAndRegisterShortcuts("scripts-step-into",b,c,WebInspector.ScriptsPanelDescriptor.ShortcutKeys.StepInto);a.appendChild(this.stepIntoButton);b=WebInspector.UIString("Step out of current function (%s).");c=this._stepOutClicked.bind(this);this.stepOutButton=this._createButtonAndRegisterShortcuts("scripts-step-out",b,c,WebInspector.ScriptsPanelDescriptor.ShortcutKeys.StepOut);
a.appendChild(this.stepOutButton);this._toggleBreakpointsButton=new WebInspector.StatusBarButton(WebInspector.UIString("Deactivate breakpoints."),"toggle-breakpoints");this._toggleBreakpointsButton.toggled=!0;this._toggleBreakpointsButton.addEventListener("click",this._toggleBreakpointsClicked,this);a.appendChild(this._toggleBreakpointsButton.element);this.debuggerStatusElement=document.createElement("div");this.debuggerStatusElement.id="scripts-debugger-status";a.appendChild(this.debuggerStatusElement);
return a},_updateButtonTitle:function(a,b){a.buttonTitle=b;a.title=a.shortcuts&&a.shortcuts.length?String.vsprintf(b,[a.shortcuts[0].name]):b},_createButtonAndRegisterShortcuts:function(a,b,c,e){var d=document.createElement("button");d.className="status-bar-item";d.id=a;d.shortcuts=e;this._updateButtonTitle(d,b);d.disabled=!0;d.appendChild(document.createElement("img"));d.addEventListener("click",c,!1);this.registerShortcuts(e,c);return d},searchCanceled:function(){this._searchView&&this._searchView.searchCanceled();
delete this._searchView;delete this._searchQuery},performSearch:function(a){function b(a,b){b&&(WebInspector.searchController.updateSearchMatchesCount(b,this),a.jumpToNextSearchResult(),WebInspector.searchController.updateCurrentMatchIndex(a.currentSearchResultIndex,this))}WebInspector.searchController.updateSearchMatchesCount(0,this);this.visibleView&&(this.searchCanceled(),this._searchView=this.visibleView,this._searchQuery=a,this._searchView.performSearch(a,b.bind(this)))},jumpToNextSearchResult:function(){if(this._searchView)if(this._searchView!==
this.visibleView)this.performSearch(this._searchQuery);else return this._searchView.showingLastSearchResult()?this._searchView.jumpToFirstSearchResult():this._searchView.jumpToNextSearchResult(),WebInspector.searchController.updateCurrentMatchIndex(this._searchView.currentSearchResultIndex,this),!0},jumpToPreviousSearchResult:function(){this._searchView&&(this._searchView!==this.visibleView?(this.performSearch(this._searchQuery),this._searchView&&this._searchView.jumpToLastSearchResult()):(this._searchView.showingFirstSearchResult()?
this._searchView.jumpToLastSearchResult():this._searchView.jumpToPreviousSearchResult(),WebInspector.searchController.updateCurrentMatchIndex(this._searchView.currentSearchResultIndex,this)))},canSearchAndReplace:function(){var a=this.visibleView;return!!a&&a.canEditSource()},replaceSelectionWith:function(a){this.visibleView.replaceSearchMatchWith(a)},replaceAllWith:function(a,b){this.visibleView.replaceAllWith(a,b)},_toggleFormatSource:function(){this._toggleFormatSourceButton.toggled=!this._toggleFormatSourceButton.toggled;
for(var a=this._workspace.uiSourceCodes(),b=0;b<a.length;++b)a[b].setFormatted(this._toggleFormatSourceButton.toggled);a=this._editorContainer.currentFile();WebInspector.notifications.dispatchEventToListeners(WebInspector.UserMetrics.UserAction,{action:WebInspector.UserMetrics.UserActionNames.TogglePrettyPrint,enabled:this._toggleFormatSourceButton.toggled,url:a?a.originURL():null})},addToWatch:function(a){this.sidebarPanes.watchExpressions.addExpression(a)},_toggleBreakpoint:function(){var a=this.visibleView;
return a?a instanceof WebInspector.JavaScriptSourceFrame?(a.toggleBreakpointOnCurrentLine(),!0):!1:!1},_showOutlineDialog:function(a){a=this._editorContainer.currentFile();if(!a)return!1;switch(a.contentType()){case WebInspector.resourceTypes.Document:case WebInspector.resourceTypes.Script:return WebInspector.JavaScriptOutlineDialog.show(this.visibleView,a),!0;case WebInspector.resourceTypes.Stylesheet:return WebInspector.StyleSheetOutlineDialog.show(this.visibleView,a),!0}return!1},_installDebuggerSidebarController:function(){this._toggleDebuggerSidebarButton=
new WebInspector.StatusBarButton(WebInspector.UIString("Hide debugger"),"scripts-debugger-show-hide-button",3);this._toggleDebuggerSidebarButton.state="shown";this._toggleDebuggerSidebarButton.addEventListener("click",function(){"shown"===this._toggleDebuggerSidebarButton.state?this._hideDebuggerSidebar():this._showDebuggerSidebar()},this);this.editorView.element.appendChild(this._toggleDebuggerSidebarButton.element);WebInspector.settings.debuggerSidebarHidden.get()&&this._hideDebuggerSidebar()},
_showDebuggerSidebar:function(){"shown"!==this._toggleDebuggerSidebarButton.state&&(this._toggleDebuggerSidebarButton.state="shown",this._toggleDebuggerSidebarButton.title=WebInspector.UIString("Hide debugger"),this.splitView.showSidebarElement(),this.debugSidebarResizeWidgetElement.removeStyleClass("hidden"),WebInspector.settings.debuggerSidebarHidden.set(!1))},_hideDebuggerSidebar:function(){"hidden"!==this._toggleDebuggerSidebarButton.state&&(this._toggleDebuggerSidebarButton.state="hidden",this._toggleDebuggerSidebarButton.title=
WebInspector.UIString("Show debugger"),this.splitView.hideSidebarElement(),this.debugSidebarResizeWidgetElement.addStyleClass("hidden"),WebInspector.settings.debuggerSidebarHidden.set(!0))},_fileRenamed:function(a){var b=a.data.uiSourceCode;a=a.data.name;b.project().type()===WebInspector.projectTypes.Snippets&&(WebInspector.scriptSnippetModel.renameScriptSnippet(b,a),b.rename(a))},_snippetCreationRequested:function(a){var b=WebInspector.scriptSnippetModel.createScriptSnippet();this._showSourceLine(b);
var c=!this._navigatorController.isNavigatorPinned();this._navigatorController.isNavigatorHidden()&&this._navigatorController.showNavigatorOverlay();this._navigator.rename(b,function(a){c&&this._navigatorController.hideNavigatorOverlay();a?this._showSourceLine(b):WebInspector.scriptSnippetModel.deleteScriptSnippet(b)}.bind(this))},_itemRenamingRequested:function(a){var b=a.data,c=!this._navigatorController.isNavigatorPinned();this._navigatorController.isNavigatorHidden()&&this._navigatorController.showNavigatorOverlay();
this._navigator.rename(b,function(a){c&&a&&(this._navigatorController.hideNavigatorOverlay(),this._showSourceLine(b))}.bind(this))},_showLocalHistory:function(a){WebInspector.RevisionHistoryView.showHistory(a)},appendApplicableItems:function(a,b,c){this._appendUISourceCodeItems(b,c);this._appendFunctionItems(b,c)},_mapFileSystemToNetwork:function(a){WebInspector.SelectUISourceCodeForProjectTypeDialog.show(a.name(),WebInspector.projectTypes.Network,function(b){this._workspace.addMapping(b,a,WebInspector.fileSystemWorkspaceProvider)}.bind(this),
this.editorView.mainElement)},_removeNetworkMapping:function(a){confirm(WebInspector.UIString("Are you sure you want to remove network mapping?"))&&this._workspace.removeMapping(a)},_mapNetworkToFileSystem:function(a){WebInspector.SelectUISourceCodeForProjectTypeDialog.show(a.name(),WebInspector.projectTypes.FileSystem,function(b){this._workspace.addMapping(a,b,WebInspector.fileSystemWorkspaceProvider)}.bind(this),this.editorView.mainElement)},_appendUISourceCodeMappingItems:function(a,b){b.project().type()===
WebInspector.projectTypes.FileSystem&&(b.url?a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Remove network mapping":"Remove Network Mapping"),this._removeNetworkMapping.bind(this,b)):a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Map to network resource\u2026":"Map to Network Resource\u2026"),this._mapFileSystemToNetwork.bind(this,b)));b.project().type()===WebInspector.projectTypes.Network&&this._workspace.projects().filter(function(a){return a.type()===
WebInspector.projectTypes.FileSystem}).length&&this._workspace.uiSourceCodeForURL(b.url)===b&&a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Map to file system resource\u2026":"Map to File System Resource\u2026"),this._mapNetworkToFileSystem.bind(this,b))},_appendUISourceCodeItems:function(a,b){if(b instanceof WebInspector.UISourceCode){a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Local modifications\u2026":"Local Modifications\u2026"),this._showLocalHistory.bind(this,
b));WebInspector.isolatedFileSystemManager.supportsFileSystems()&&WebInspector.experimentsSettings.fileSystemProject.isEnabled()&&this._appendUISourceCodeMappingItems(a,b);var c=WebInspector.resourceForURL(b.url);c&&c.request&&a.appendApplicableItems(c.request)}},_appendFunctionItems:function(a,b){function c(a,b){if(a)console.error(a);else{WebInspector.inspectorView.showPanelForAnchorNavigation(this);var c=WebInspector.debuggerModel.rawLocationToUILocation(b.location);this._showSourceLine(c.uiSourceCode,
c.lineNumber)}}function e(){DebuggerAgent.getFunctionDetails(d.objectId,c.bind(this))}if(b instanceof WebInspector.RemoteObject){var d=b;"function"===d.type&&a.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Show function definition":"Show Function Definition"),e.bind(this))}},showGoToSourceDialog:function(){WebInspector.OpenResourceDialog.show(this,this.editorView.mainElement)},_dockSideChanged:function(){var a=WebInspector.dockController.dockSide()===WebInspector.DockController.State.DockedToRight&&
WebInspector.settings.splitVerticallyWhenDockedToRight.get();this._splitVertically(a)},_splitVertically:function(a){if(!this.sidebarPaneView||a!==!this.splitView.isVertical()){this.sidebarPaneView&&this.sidebarPaneView.detach();this.splitView.setVertical(!a);if(a)this._showDebuggerSidebar(),this.sidebarPaneView=new WebInspector.SplitView(!0,this.name+"PanelSplitSidebarRatio",0.5),a=new WebInspector.SidebarPaneStack,a.show(this.sidebarPaneView.firstElement()),a.element.id="scripts-sidebar-stack-pane",
a.addPane(this.sidebarPanes.watchExpressions),a.addPane(this.sidebarPanes.callstack),a.addPane(this.sidebarPanes.scopechain),a=new WebInspector.SidebarTabbedPane,a.show(this.sidebarPaneView.secondElement()),a.addPane(this.sidebarPanes.jsBreakpoints),a.addPane(this.sidebarPanes.domBreakpoints),a.addPane(this.sidebarPanes.xhrBreakpoints),a.addPane(this.sidebarPanes.eventListenerBreakpoints),a.addPane(this.sidebarPanes.workerList),this.sidebarPaneView.firstElement().appendChild(this.debugToolbar);else{this.sidebarPaneView=
new WebInspector.SidebarPaneStack;for(var b in this.sidebarPanes)this.sidebarPaneView.addPane(this.sidebarPanes[b]);this.sidebarElement.appendChild(this.debugToolbar)}this.sidebarPaneView.element.id="scripts-debug-sidebar-contents";this.sidebarPaneView.show(this.splitView.sidebarElement);this.sidebarPanes.scopechain.expand();this.sidebarPanes.jsBreakpoints.expand();this.sidebarPanes.callstack.expand();0<WebInspector.settings.watchExpressions.get().length&&this.sidebarPanes.watchExpressions.expand()}},
__proto__:WebInspector.Panel.prototype};
