WebInspector.RequestView=function(a){WebInspector.View.call(this);this.registerRequiredCSS("resourceView.css");this.element.addStyleClass("resource-view");this.request=a};WebInspector.RequestView.prototype={hasContent:function(){return!1},__proto__:WebInspector.View.prototype};WebInspector.RequestView.hasTextContent=function(a){return a.type.isTextType()?!0:a.type===WebInspector.resourceTypes.Other||a.hasErrorStatusCode()?a.content&&!a.contentEncoded:!1};
WebInspector.RequestView.nonSourceViewForRequest=function(a){switch(a.type){case WebInspector.resourceTypes.Image:return new WebInspector.ImageView(a);case WebInspector.resourceTypes.Font:return new WebInspector.FontView(a);default:return new WebInspector.RequestView(a)}};
WebInspector.NetworkItemView=function(a){WebInspector.TabbedPane.call(this);this.element.addStyleClass("network-item-view");var b=new WebInspector.RequestHeadersView(a);this.appendTab("headers",WebInspector.UIString("Headers"),b);this.addEventListener(WebInspector.TabbedPane.EventTypes.TabSelected,this._tabSelected,this);if(a.type===WebInspector.resourceTypes.WebSocket)b=new WebInspector.ResourceWebSocketFrameView(a),this.appendTab("webSocketFrames",WebInspector.UIString("Frames"),b);else{var b=new WebInspector.RequestResponseView(a),
c=new WebInspector.RequestPreviewView(a,b);this.appendTab("preview",WebInspector.UIString("Preview"),c);this.appendTab("response",WebInspector.UIString("Response"),b)}if(a.requestCookies||a.responseCookies)this._cookiesView=new WebInspector.RequestCookiesView(a),this.appendTab("cookies",WebInspector.UIString("Cookies"),this._cookiesView);a.timing&&(b=new WebInspector.RequestTimingView(a),this.appendTab("timing",WebInspector.UIString("Timing"),b));this._request=a};
WebInspector.NetworkItemView.prototype={wasShown:function(){WebInspector.TabbedPane.prototype.wasShown.call(this);this._selectTab()},_selectTab:function(a){a||(a=WebInspector.settings.resourceViewTab.get());this.selectTab(a)||(this._isInFallbackSelection=!0,this.selectTab("headers"),delete this._isInFallbackSelection)},_tabSelected:function(a){a.data.isUserGesture&&(WebInspector.settings.resourceViewTab.set(a.data.tabId),WebInspector.notifications.dispatchEventToListeners(WebInspector.UserMetrics.UserAction,
{action:WebInspector.UserMetrics.UserActionNames.NetworkRequestTabSelected,tab:a.data.tabId,url:this._request.url}))},request:function(){return this._request},__proto__:WebInspector.TabbedPane.prototype};WebInspector.RequestContentView=function(a){WebInspector.RequestView.call(this,a)};
WebInspector.RequestContentView.prototype={hasContent:function(){return!0},get innerView(){return this._innerView},set innerView(a){this._innerView=a},wasShown:function(){this._ensureInnerViewShown()},_ensureInnerViewShown:function(){function a(a,c,e){this._innerViewShowRequested=!1;this.contentLoaded()}this._innerViewShowRequested||(this._innerViewShowRequested=!0,this.request.requestContent(a.bind(this)))},contentLoaded:function(){},canHighlightLine:function(){return this._innerView&&this._innerView.canHighlightLine()},
highlightLine:function(a){this.canHighlightLine()&&this._innerView.highlightLine(a)},__proto__:WebInspector.RequestView.prototype};WebInspector.RequestCookiesView=function(a){WebInspector.View.call(this);this.element.addStyleClass("resource-cookies-view");this._request=a};
WebInspector.RequestCookiesView.prototype={wasShown:function(){this._request.addEventListener(WebInspector.NetworkRequest.Events.RequestHeadersChanged,this._refreshCookies,this);this._request.addEventListener(WebInspector.NetworkRequest.Events.ResponseHeadersChanged,this._refreshCookies,this);this._gotCookies?this._cookiesTable||this._buildCookiesTable():this._emptyView||(this._emptyView=new WebInspector.EmptyView(WebInspector.UIString("This request has no cookies.")),this._emptyView.show(this.element))},
willHide:function(){this._request.removeEventListener(WebInspector.NetworkRequest.Events.RequestHeadersChanged,this._refreshCookies,this);this._request.removeEventListener(WebInspector.NetworkRequest.Events.ResponseHeadersChanged,this._refreshCookies,this)},get _gotCookies(){return this._request.requestCookies&&this._request.requestCookies.length||this._request.responseCookies&&this._request.responseCookies.length},_buildCookiesTable:function(){this.detachChildViews();this._cookiesTable=new WebInspector.CookiesTable(!0);
this._cookiesTable.setCookieFolders([{folderName:WebInspector.UIString("Request Cookies"),cookies:this._request.requestCookies},{folderName:WebInspector.UIString("Response Cookies"),cookies:this._request.responseCookies}]);this._cookiesTable.show(this.element)},_refreshCookies:function(){delete this._cookiesTable;this._gotCookies&&this.isShowing()&&(this._buildCookiesTable(),this._cookiesTable.updateWidths())},__proto__:WebInspector.View.prototype};
WebInspector.RequestHeadersView=function(a){WebInspector.View.call(this);this.registerRequiredCSS("resourceView.css");this.element.addStyleClass("resource-headers-view");this._request=a;this._headersListElement=document.createElement("ol");this._headersListElement.className="outline-disclosure";this.element.appendChild(this._headersListElement);this._headersTreeOutline=new TreeOutline(this._headersListElement);this._headersTreeOutline.expandTreeElementsWhenArrowing=!0;this._urlTreeElement=new TreeElement("",
null,!1);this._urlTreeElement.selectable=!1;this._headersTreeOutline.appendChild(this._urlTreeElement);this._requestMethodTreeElement=new TreeElement("",null,!1);this._requestMethodTreeElement.selectable=!1;this._headersTreeOutline.appendChild(this._requestMethodTreeElement);this._statusCodeTreeElement=new TreeElement("",null,!1);this._statusCodeTreeElement.selectable=!1;this._headersTreeOutline.appendChild(this._statusCodeTreeElement);this._requestHeadersTreeElement=new TreeElement("",null,!0);this._requestHeadersTreeElement.expanded=
!0;this._requestHeadersTreeElement.selectable=!1;this._headersTreeOutline.appendChild(this._requestHeadersTreeElement);this._decodeRequestParameters=!0;this._showResponseHeadersText=this._showRequestHeadersText=!1;this._queryStringTreeElement=new TreeElement("",null,!0);this._queryStringTreeElement.expanded=!0;this._queryStringTreeElement.selectable=!1;this._queryStringTreeElement.hidden=!0;this._headersTreeOutline.appendChild(this._queryStringTreeElement);this._urlFragmentTreeElement=new TreeElement("",
null,!0);this._urlFragmentTreeElement.expanded=!0;this._urlFragmentTreeElement.selectable=!1;this._urlFragmentTreeElement.hidden=!0;this._headersTreeOutline.appendChild(this._urlFragmentTreeElement);this._formDataTreeElement=new TreeElement("",null,!0);this._formDataTreeElement.expanded=!0;this._formDataTreeElement.selectable=!1;this._formDataTreeElement.hidden=!0;this._headersTreeOutline.appendChild(this._formDataTreeElement);this._requestPayloadTreeElement=new TreeElement(WebInspector.UIString("Request Payload"),
null,!0);this._requestPayloadTreeElement.expanded=!0;this._requestPayloadTreeElement.selectable=!1;this._requestPayloadTreeElement.hidden=!0;this._headersTreeOutline.appendChild(this._requestPayloadTreeElement);this._responseHeadersTreeElement=new TreeElement("",null,!0);this._responseHeadersTreeElement.expanded=!0;this._responseHeadersTreeElement.selectable=!1;this._headersTreeOutline.appendChild(this._responseHeadersTreeElement)};
WebInspector.RequestHeadersView.prototype={wasShown:function(){this._request.addEventListener(WebInspector.NetworkRequest.Events.RequestHeadersChanged,this._refreshRequestHeaders,this);this._request.addEventListener(WebInspector.NetworkRequest.Events.ResponseHeadersChanged,this._refreshResponseHeaders,this);this._request.addEventListener(WebInspector.NetworkRequest.Events.FinishedLoading,this._refreshHTTPInformation,this);this._refreshURL();this._refreshQueryString();this._refreshUrlFragment();this._refreshRequestHeaders();
this._refreshResponseHeaders();this._refreshHTTPInformation()},willHide:function(){this._request.removeEventListener(WebInspector.NetworkRequest.Events.RequestHeadersChanged,this._refreshRequestHeaders,this);this._request.removeEventListener(WebInspector.NetworkRequest.Events.ResponseHeadersChanged,this._refreshResponseHeaders,this);this._request.removeEventListener(WebInspector.NetworkRequest.Events.FinishedLoading,this._refreshHTTPInformation,this)},_formatHeader:function(a,b){var c=document.createDocumentFragment();
c.createChild("div","header-name").textContent=a+":";c.createChild("div","header-value source-code").textContent=b;return c},_formatParameter:function(a,b,c){var e=!1;if(c&&(a=a.replace(/\+/g," "),0<=a.indexOf("%")))try{a=decodeURIComponent(a)}catch(d){e=!0}c=document.createElement("div");c.className=b;e?c.createChild("span","error-message").textContent=WebInspector.UIString("(unable to decode value)"):c.textContent=a;return c},_refreshURL:function(){this._urlTreeElement.title=this._formatHeader(WebInspector.UIString("Request URL"),
this._request.url)},_refreshQueryString:function(){var a=this._request.queryString(),b=this._request.queryParameters;this._queryStringTreeElement.hidden=!b;b&&this._refreshParams(WebInspector.UIString("Query String Parameters"),b,a,this._queryStringTreeElement)},_refreshUrlFragment:function(){var a=this._request.parsedURL.fragment;this._urlFragmentTreeElement.hidden=!a;if(a){var b=WebInspector.UIString("URL fragment");this._urlFragmentTreeElement.removeChildren();this._urlFragmentTreeElement.listItemElement.removeChildren();
this._urlFragmentTreeElement.listItemElement.appendChild(document.createTextNode(b));b=new TreeElement(null,null,!1);b.title=this._formatHeader("#",a);b.selectable=!1;this._urlFragmentTreeElement.appendChild(b)}},_refreshFormData:function(){this._formDataTreeElement.hidden=!0;this._requestPayloadTreeElement.hidden=!0;var a=this._request.requestFormData;if(a){var b=this._request.formParameters;if(b)this._formDataTreeElement.hidden=!1,this._refreshParams(WebInspector.UIString("Form Data"),b,a,this._formDataTreeElement);
else{this._requestPayloadTreeElement.hidden=!1;try{var c=JSON.parse(a);this._refreshRequestJSONPayload(c,a,!1)}catch(e){this._populateTreeElementWithSourceText(this._requestPayloadTreeElement,a)}}}},_populateTreeElementWithSourceText:function(a,b){a.removeChildren();var c=new TreeElement(null,null,!1);c.selectable=!1;a.appendChild(c);var e=document.createElement("span");e.addStyleClass("header-value");e.addStyleClass("source-code");e.textContent=String(b).trim();c.listItemElement.appendChild(e)},
_refreshParams:function(a,b,c,e){e.removeChildren();e.listItemElement.removeChildren();e.listItemElement.appendChild(document.createTextNode(a));var d=document.createElement("span");d.addStyleClass("header-count");d.textContent=WebInspector.UIString(" (%d)",b.length);e.listItemElement.appendChild(d);e.listItemElement.appendChild(this._createViewSourceToggle(e._viewSource,function(){e._viewSource=!e._viewSource;this._refreshParams(a,b,c,e)}.bind(this)));if(e._viewSource)this._populateTreeElementWithSourceText(e,
c);else for(d=this._decodeRequestParameters?WebInspector.UIString("view URL encoded"):WebInspector.UIString("view decoded"),d=this._createToggleButton(d),d.addEventListener("click",this._toggleURLDecoding.bind(this)),e.listItemElement.appendChild(d),d=0;d<b.length;++d){var f=document.createDocumentFragment(),g=this._formatParameter(b[d].name+":","header-name",this._decodeRequestParameters),h=this._formatParameter(b[d].value,"header-value source-code",this._decodeRequestParameters);f.appendChild(g);
f.appendChild(h);f=new TreeElement(f,null,!1);f.selectable=!1;e.appendChild(f)}},_refreshRequestJSONPayload:function(a,b,c){this._requestPayloadTreeElement.removeChildren();var e=this._requestPayloadTreeElement.listItemElement;e.removeChildren();e.appendChild(document.createTextNode(this._requestPayloadTreeElement.title));var d=this._refreshRequestJSONPayload.bind(this,a,b);c?(e.appendChild(this._createViewSourceToggle(!0,d.bind(this,!1))),this._populateTreeElementWithSourceText(this._requestPayloadTreeElement,
b)):(e.appendChild(this._createViewSourceToggle(!1,d.bind(this,!0))),a=WebInspector.RemoteObject.fromLocalObject(a),a=new WebInspector.ObjectPropertiesSection(a,a.description),a.expand(),a.editable=!1,e.appendChild(a.element))},_createViewSourceToggle:function(a,b){var c=a?WebInspector.UIString("view parsed"):WebInspector.UIString("view source"),c=this._createToggleButton(c);c.addEventListener("click",b);return c},_toggleURLDecoding:function(a){this._decodeRequestParameters=!this._decodeRequestParameters;
this._refreshQueryString();this._refreshFormData()},_getHeaderValue:function(a,b){var c=b.toLowerCase(),e;for(e in a)if(e.toLowerCase()===c)return a[e]},_refreshRequestHeaders:function(){this._showRequestHeadersText?this._refreshHeadersText(WebInspector.UIString("Request Headers"),this._request.sortedRequestHeaders,this._request.requestHeadersText,this._requestHeadersTreeElement):this._refreshHeaders(WebInspector.UIString("Request Headers"),this._request.sortedRequestHeaders,this._requestHeadersTreeElement);
if(this._request.requestHeadersText){var a=this._createHeadersToggleButton(this._showRequestHeadersText);a.addEventListener("click",this._toggleRequestHeadersText.bind(this));this._requestHeadersTreeElement.listItemElement.appendChild(a)}this._refreshFormData()},_refreshResponseHeaders:function(){this._showResponseHeadersText?this._refreshHeadersText(WebInspector.UIString("Response Headers"),this._request.sortedResponseHeaders,this._request.responseHeadersText,this._responseHeadersTreeElement):this._refreshHeaders(WebInspector.UIString("Response Headers"),
this._request.sortedResponseHeaders,this._responseHeadersTreeElement);if(this._request.responseHeadersText){var a=this._createHeadersToggleButton(this._showResponseHeadersText);a.addEventListener("click",this._toggleResponseHeadersText.bind(this));this._responseHeadersTreeElement.listItemElement.appendChild(a)}},_refreshHTTPInformation:function(){var a=this._requestMethodTreeElement;a.hidden=!this._request.statusCode;var b=this._statusCodeTreeElement;b.hidden=!this._request.statusCode;if(this._request.statusCode){var c=
"",c=300>this._request.statusCode||304===this._request.statusCode?"Images/successGreenDot.png":400>this._request.statusCode?"Images/warningOrangeDot.png":"Images/errorRedDot.png";a.title=this._formatHeader(WebInspector.UIString("Request Method"),this._request.requestMethod);a=document.createDocumentFragment();a.createChild("div","header-name").textContent=WebInspector.UIString("Status Code")+":";var e=a.createChild("img","resource-status-image");e.src=c;e.title=this._request.statusCode+" "+this._request.statusText;
c=a.createChild("div","header-value source-code");c.textContent=this._request.statusCode+" "+this._request.statusText;this._request.cached&&(c.createChild("span","status-from-cache").textContent=" "+WebInspector.UIString("(from cache)"));b.title=a}},_refreshHeadersTitle:function(a,b,c){b.listItemElement.removeChildren();b.listItemElement.appendChild(document.createTextNode(a));a=document.createElement("span");a.addStyleClass("header-count");a.textContent=WebInspector.UIString(" (%d)",c);b.listItemElement.appendChild(a)},
_refreshHeaders:function(a,b,c){c.removeChildren();var e=b.length;this._refreshHeadersTitle(a,c,e);c.hidden=!e;for(a=0;a<e;++a){var d=new TreeElement(null,null,!1);d.title=this._formatHeader(b[a].name,b[a].value);d.selectable=!1;c.appendChild(d)}},_refreshHeadersText:function(a,b,c,e){this._populateTreeElementWithSourceText(e,c);this._refreshHeadersTitle(a,e,b.length)},_toggleRequestHeadersText:function(a){this._showRequestHeadersText=!this._showRequestHeadersText;this._refreshRequestHeaders()},_toggleResponseHeadersText:function(a){this._showResponseHeadersText=
!this._showResponseHeadersText;this._refreshResponseHeaders()},_createToggleButton:function(a){var b=document.createElement("span");b.addStyleClass("header-toggle");b.textContent=a;return b},_createHeadersToggleButton:function(a){a=a?WebInspector.UIString("view parsed"):WebInspector.UIString("view source");return this._createToggleButton(a)},__proto__:WebInspector.View.prototype};WebInspector.RequestHTMLView=function(a,b){WebInspector.RequestView.call(this,a);this._dataURL=b;this.element.addStyleClass("html")};
WebInspector.RequestHTMLView.prototype={hasContent:function(){return!0},wasShown:function(){this._createIFrame()},willHide:function(a){this.element.removeChildren()},_createIFrame:function(){this.element.removeChildren();var a=document.createElement("iframe");a.setAttribute("sandbox","");a.setAttribute("src",this._dataURL);this.element.appendChild(a)},__proto__:WebInspector.RequestView.prototype};WebInspector.RequestJSONView=function(a,b){WebInspector.RequestView.call(this,a);this._parsedJSON=b;this.element.addStyleClass("json")};
WebInspector.RequestJSONView.parseJSON=function(a){var b="",c=/[{[]/.exec(a);c&&c.index&&(b=a.substring(0,c.index),a=a.substring(c.index));try{return new WebInspector.ParsedJSON(JSON.parse(a),b,"")}catch(e){}};WebInspector.RequestJSONView.parseJSONP=function(a){var b=a.indexOf("("),c=a.lastIndexOf(")");if(!(-1==b||-1==c||c<b)){var e=a.substring(0,b+1),d=a.substring(c);a=a.substring(b+1,c);try{return new WebInspector.ParsedJSON(JSON.parse(a),e,d)}catch(f){}}};
WebInspector.RequestJSONView.prototype={hasContent:function(){return!0},wasShown:function(){this._initialize()},_initialize:function(){if(!this._initialized){this._initialized=!0;var a=WebInspector.RemoteObject.fromLocalObject(this._parsedJSON.data),a=new WebInspector.ObjectPropertiesSection(a,this._parsedJSON.prefix+a.description+this._parsedJSON.suffix);a.expand();a.editable=!1;this.element.appendChild(a.element)}},__proto__:WebInspector.RequestView.prototype};
WebInspector.ParsedJSON=function(a,b,c){this.data=a;this.prefix=b;this.suffix=c};WebInspector.RequestPreviewView=function(a,b){WebInspector.RequestContentView.call(this,a);this._responseView=b};
WebInspector.RequestPreviewView.prototype={contentLoaded:function(){this.request.content?(this._emptyView&&(this._emptyView.detach(),delete this._emptyView),this._previewView||(this._previewView=this._createPreviewView()),this._previewView.show(this.element),this.innerView=this._previewView):this._emptyView||(this._emptyView=this._createEmptyView(),this._emptyView.show(this.element),this.innerView=this._emptyView)},_createEmptyView:function(){return new WebInspector.EmptyView(WebInspector.UIString("This request has no preview available."))},
_jsonView:function(){var a=WebInspector.RequestJSONView.parseJSON(this.request.content);if(a)return new WebInspector.RequestJSONView(this.request,a)},_htmlView:function(){var a=this.request.asDataURL();if(null!==a)return new WebInspector.RequestHTMLView(this.request,a)},_createPreviewView:function(){if(this.request.content){if(this.request.hasErrorStatusCode()){var a=this._htmlView();if(a)return a}if(this.request.type===WebInspector.resourceTypes.XHR&&(a=this._jsonView())||this.request.type===WebInspector.resourceTypes.XHR&&
"text/html"===this.request.mimeType&&(a=this._htmlView())||this.request.type===WebInspector.resourceTypes.Script&&"application/json"===this.request.mimeType&&(a=this._jsonView()))return a}return this._responseView.sourceView?this._responseView.sourceView:this.request.type===WebInspector.resourceTypes.Other?this._createEmptyView():WebInspector.RequestView.nonSourceViewForRequest(this.request)},__proto__:WebInspector.RequestContentView.prototype};
WebInspector.RequestResponseView=function(a){WebInspector.RequestContentView.call(this,a)};
WebInspector.RequestResponseView.prototype={get sourceView(){!this._sourceView&&WebInspector.RequestView.hasTextContent(this.request)&&(this._sourceView=new WebInspector.ResourceSourceFrame(this.request));return this._sourceView},contentLoaded:function(){this.request.content&&this.sourceView?(this._emptyView&&(this._emptyView.detach(),delete this._emptyView),this.sourceView.show(this.element),this.innerView=this.sourceView):this._emptyView||(this._emptyView=new WebInspector.EmptyView(WebInspector.UIString("This request has no response data available.")),
this._emptyView.show(this.element),this.innerView=this._emptyView)},__proto__:WebInspector.RequestContentView.prototype};WebInspector.RequestTimingView=function(a){WebInspector.View.call(this);this.element.addStyleClass("resource-timing-view");this._request=a};
WebInspector.RequestTimingView.prototype={wasShown:function(){this._request.addEventListener(WebInspector.NetworkRequest.Events.TimingChanged,this._refresh,this);this._request.timing?(this._emptyView&&(this._emptyView.detach(),delete this._emptyView),this._refresh()):this._emptyView||(this._emptyView=new WebInspector.EmptyView(WebInspector.UIString("This request has no detailed timing info.")),this._emptyView.show(this.element),this.innerView=this._emptyView)},willHide:function(){this._request.removeEventListener(WebInspector.NetworkRequest.Events.TimingChanged,
this._refresh,this)},_refresh:function(){this._tableElement&&this._tableElement.parentElement.removeChild(this._tableElement);this._tableElement=WebInspector.RequestTimingView.createTimingTable(this._request);this.element.appendChild(this._tableElement)},__proto__:WebInspector.View.prototype};
WebInspector.RequestTimingView.createTimingTable=function(a){function b(a,b,c,d){var f={};f.title=a;f.className=b;f.start=c;f.end=d;e.push(f)}var c=document.createElement("table"),e=[];-1!==a.timing.proxyStart&&b(WebInspector.UIString("Proxy"),"proxy",a.timing.proxyStart,a.timing.proxyEnd);-1!==a.timing.dnsStart&&b(WebInspector.UIString("DNS Lookup"),"dns",a.timing.dnsStart,a.timing.dnsEnd);if(-1!==a.timing.connectStart)if(a.connectionReused)b(WebInspector.UIString("Blocking"),"connecting",a.timing.connectStart,
a.timing.connectEnd);else{var d=a.timing.connectStart;-1!==a.timing.dnsStart&&(d+=a.timing.dnsEnd-a.timing.dnsStart);b(WebInspector.UIString("Connecting"),"connecting",d,a.timing.connectEnd)}-1!==a.timing.sslStart&&b(WebInspector.UIString("SSL"),"ssl",a.timing.sslStart,a.timing.sslEnd);b(WebInspector.UIString("Sending"),"sending",a.timing.sendStart,a.timing.sendEnd);b(WebInspector.UIString("Waiting"),"waiting",a.timing.sendEnd,a.timing.receiveHeadersEnd);b(WebInspector.UIString("Receiving"),"receiving",
1E3*(a.responseReceivedTime-a.timing.requestTime),1E3*(a.endTime-a.timing.requestTime));a=1E3*(a.endTime-a.timing.requestTime);for(var d=200/a,f=0;f<e.length;++f){var g=document.createElement("tr");c.appendChild(g);var h=document.createElement("td");h.textContent=e[f].title;g.appendChild(h);h=document.createElement("td");h.width="200px";var k=document.createElement("div");k.className="network-timing-row";h.appendChild(k);var l=document.createElement("span");l.className="network-timing-bar "+e[f].className;
l.style.left=d*e[f].start+"px";l.style.right=d*(a-e[f].end)+"px";l.style.backgroundColor=e[f].color;l.textContent="\u200b";k.appendChild(l);l=document.createElement("span");l.className="network-timing-bar-title";a-e[f].end<e[f].start?l.style.right=d*(a-e[f].end)+3+"px":l.style.left=d*e[f].start+3+"px";l.textContent=Number.secondsToString((e[f].end-e[f].start)/1E3);k.appendChild(l);g.appendChild(h)}return c};
WebInspector.ResourceWebSocketFrameView=function(a){WebInspector.View.call(this);this.element.addStyleClass("resource-websocket");this.resource=a;this.element.removeChildren();a=new WebInspector.DataGrid([{id:"data",title:WebInspector.UIString("Data"),sortable:!1},{id:"length",title:WebInspector.UIString("Length"),sortable:!1,alig:WebInspector.DataGrid.Align.Right,width:"50px"},{id:"time",title:WebInspector.UIString("Time"),width:"70px"}]);for(var b=this.resource.frames(),c=0;c<b.length;c++){var e=
b[c],d={data:"",length:"undefined"===typeof e.payloadData?e.errorMessage.length.toString():e.payloadData.length.toString(),time:(new Date(1E3*e.time)).toLocaleTimeString()},f="";if(e.errorMessage)f="error",d.data=e.errorMessage;else if(e.opcode==WebInspector.ResourceWebSocketFrameView.OpCodes.TextFrame)e.sent&&(f="outcoming"),d.data=e.payloadData;else{var f="opcode",g="";switch(e.opcode){case WebInspector.ResourceWebSocketFrameView.OpCodes.ContinuationFrame:g=WebInspector.UIString("Continuation Frame");
break;case WebInspector.ResourceWebSocketFrameView.OpCodes.BinaryFrame:g=WebInspector.UIString("Binary Frame");break;case WebInspector.ResourceWebSocketFrameView.OpCodes.ConnectionCloseFrame:g=WebInspector.UIString("Connection Close Frame");break;case WebInspector.ResourceWebSocketFrameView.OpCodes.PingFrame:g=WebInspector.UIString("Ping Frame");break;case WebInspector.ResourceWebSocketFrameView.OpCodes.PongFrame:g=WebInspector.UIString("Pong Frame")}d.data=WebInspector.UIString("%s (Opcode %d%s)",
g,e.opcode,e.mask?", mask":"")}e=new WebInspector.DataGridNode(d,!1);a.rootNode().appendChild(e);f&&e.element.classList.add("resource-websocket-row-"+f)}a.show(this.element)};WebInspector.ResourceWebSocketFrameView.OpCodes={ContinuationFrame:0,TextFrame:1,BinaryFrame:2,ConnectionCloseFrame:8,PingFrame:9,PongFrame:10};WebInspector.ResourceWebSocketFrameView.prototype={__proto__:WebInspector.View.prototype};
WebInspector.NetworkLogView=function(a){WebInspector.View.call(this);this.registerRequiredCSS("networkLogView.css");this._coulmnsVisibilitySetting=a;this._allowRequestSelection=!1;this._requests=[];this._requestsById={};this._requestsByURL={};this._staleRequests={};this._requestGridNodes={};this._lastRequestGridNodeId=0;this._mainRequestDOMContentTime=this._mainRequestLoadTime=-1;this._hiddenCategories={};this._matchedRequests=[];this._highlightedSubstringChanges=[];this._filteredOutRequests=new Map;
this._matchedRequestsMap={};this._currentMatchedRequestIndex=-1;this._createStatusbarButtons();this._createStatusBarItems();this._linkifier=new WebInspector.Linkifier;WebInspector.networkManager.addEventListener(WebInspector.NetworkManager.EventTypes.RequestStarted,this._onRequestStarted,this);WebInspector.networkManager.addEventListener(WebInspector.NetworkManager.EventTypes.RequestUpdated,this._onRequestUpdated,this);WebInspector.networkManager.addEventListener(WebInspector.NetworkManager.EventTypes.RequestFinished,
this._onRequestUpdated,this);WebInspector.resourceTreeModel.addEventListener(WebInspector.ResourceTreeModel.EventTypes.MainFrameNavigated,this._mainFrameNavigated,this);WebInspector.resourceTreeModel.addEventListener(WebInspector.ResourceTreeModel.EventTypes.OnLoad,this._onLoadEventFired,this);WebInspector.resourceTreeModel.addEventListener(WebInspector.ResourceTreeModel.EventTypes.DOMContentLoaded,this._domContentLoadedEventFired,this);this._initializeView();NetworkAgent.canClearBrowserCache(function(a,
c){this._canClearBrowserCache=c}.bind(this));NetworkAgent.canClearBrowserCookies(function(a,c){this._canClearBrowserCookies=c}.bind(this));WebInspector.networkLog.requests.forEach(this._appendRequest.bind(this))};WebInspector.NetworkLogView._defaultColumnsVisivility={method:!0,status:!0,domain:!1,type:!0,initiator:!0,cookies:!1,setCookies:!1,size:!0,time:!0};
WebInspector.NetworkLogView.prototype={_initializeView:function(){this.element.id="network-container";this._createSortingFunctions();this._createTable();this._createTimelineGrid();this._createSummaryBar();this.useLargeRows||this._setLargerRequests(this.useLargeRows);this._allowPopover=!0;this._popoverHelper=new WebInspector.PopoverHelper(this.element,this._getPopoverAnchor.bind(this),this._showPopover.bind(this));this._popoverHelper.setTimeout(100);this.calculator=new WebInspector.NetworkTransferTimeCalculator;
this._filter(this._filterAllElement,!1);this.switchToDetailedView()},statusBarItems:function(){return[this._largerRequestsButton.element,this._preserveLogToggle.element,this._clearButton.element,this._filterBarElement,this._progressBarContainer]},get useLargeRows(){return WebInspector.settings.resourcesLargeRows.get()},set allowPopover(a){this._allowPopover=a},elementsToRestoreScrollPositionsFor:function(){return this._dataGrid?[this._dataGrid.scrollContainer]:[]},onResize:function(){this._updateOffscreenRows()},
_createTimelineGrid:function(){this._timelineGrid=new WebInspector.TimelineGrid;this._timelineGrid.element.addStyleClass("network-timeline-grid");this._dataGrid.element.appendChild(this._timelineGrid.element)},_createTable:function(){var a=[];a.push({id:"name",titleDOMFragment:this._makeHeaderFragment(WebInspector.UIString("Name"),WebInspector.UIString("Path")),title:WebInspector.UIString("Name"),sortable:!0,weight:20,disclosure:!0});a.push({id:"method",title:WebInspector.UIString("Method"),sortable:!0,
weight:6});a.push({id:"status",titleDOMFragment:this._makeHeaderFragment(WebInspector.UIString("Status"),WebInspector.UIString("Text")),title:WebInspector.UIString("Status"),sortable:!0,weight:6});a.push({id:"domain",title:WebInspector.UIString("Domain"),sortable:!0,weight:6});a.push({id:"type",title:WebInspector.UIString("Type"),sortable:!0,weight:6});a.push({id:"initiator",title:WebInspector.UIString("Initiator"),sortable:!0,weight:10});a.push({id:"cookies",title:WebInspector.UIString("Cookies"),
sortable:!0,weight:6,align:WebInspector.DataGrid.Align.Right});a.push({id:"setCookies",title:WebInspector.UIString("Set-Cookies"),sortable:!0,weight:6,align:WebInspector.DataGrid.Align.Right});a.push({id:"size",titleDOMFragment:this._makeHeaderFragment(WebInspector.UIString("Size"),WebInspector.UIString("Content")),title:WebInspector.UIString("Size"),sortable:!0,weight:6,align:WebInspector.DataGrid.Align.Right});a.push({id:"time",titleDOMFragment:this._makeHeaderFragment(WebInspector.UIString("Time"),
WebInspector.UIString("Latency")),title:WebInspector.UIString("Time"),sortable:!0,weight:6,align:WebInspector.DataGrid.Align.Right});a.push({id:"timeline",titleDOMFragment:document.createDocumentFragment(),title:WebInspector.UIString("Timeline"),sortable:!1,weight:40,sort:WebInspector.DataGrid.Order.Ascending});this._dataGrid=new WebInspector.DataGrid(a);this._dataGrid.resizeMethod=WebInspector.DataGrid.ResizeMethod.Last;this._dataGrid.element.addStyleClass("network-log-grid");this._dataGrid.element.addEventListener("contextmenu",
this._contextMenu.bind(this),!0);this._dataGrid.show(this.element);this._dataGrid.addEventListener(WebInspector.DataGrid.Events.SortingChanged,this._sortItems,this);this._dataGrid.addEventListener(WebInspector.DataGrid.Events.ColumnsResized,this._updateDividersIfNeeded,this);this._dataGrid.scrollContainer.addEventListener("scroll",this._updateOffscreenRows.bind(this));this._patchTimelineHeader()},_makeHeaderFragment:function(a,b){var c=document.createDocumentFragment();c.createTextChild(a);c.createChild("div",
"network-header-subtitle").createTextChild(b);return c},_patchTimelineHeader:function(){var a=document.createElement("select"),b=document.createElement("option");b.value="startTime";b.label=WebInspector.UIString("Timeline");a.appendChild(b);b=document.createElement("option");b.value="startTime";b.label=WebInspector.UIString("Start Time");a.appendChild(b);b=document.createElement("option");b.value="responseTime";b.label=WebInspector.UIString("Response Time");a.appendChild(b);b=document.createElement("option");
b.value="endTime";b.label=WebInspector.UIString("End Time");a.appendChild(b);b=document.createElement("option");b.value="duration";b.label=WebInspector.UIString("Duration");a.appendChild(b);b=document.createElement("option");b.value="latency";b.label=WebInspector.UIString("Latency");a.appendChild(b);b=this._dataGrid.headerTableHeader("timeline");b.replaceChild(a,b.firstChild);a.addEventListener("click",function(a){a.consume()},!1);a.addEventListener("change",this._sortByTimeline.bind(this),!1);this._timelineSortSelector=
a},_createSortingFunctions:function(){this._sortingFunctions={};this._sortingFunctions.name=WebInspector.NetworkDataGridNode.NameComparator;this._sortingFunctions.method=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"method",!1);this._sortingFunctions.status=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"statusCode",!1);this._sortingFunctions.domain=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"domain",!1);this._sortingFunctions.type=
WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"mimeType",!1);this._sortingFunctions.initiator=WebInspector.NetworkDataGridNode.InitiatorComparator;this._sortingFunctions.cookies=WebInspector.NetworkDataGridNode.RequestCookiesCountComparator;this._sortingFunctions.setCookies=WebInspector.NetworkDataGridNode.ResponseCookiesCountComparator;this._sortingFunctions.size=WebInspector.NetworkDataGridNode.SizeComparator;this._sortingFunctions.time=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,
"duration",!1);this._sortingFunctions.timeline=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"startTime",!1);this._sortingFunctions.startTime=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"startTime",!1);this._sortingFunctions.endTime=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"endTime",!1);this._sortingFunctions.responseTime=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"responseReceivedTime",!1);this._sortingFunctions.duration=
WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"duration",!0);this._sortingFunctions.latency=WebInspector.NetworkDataGridNode.RequestPropertyComparator.bind(null,"latency",!0);var a=new WebInspector.NetworkTransferTimeCalculator,b=new WebInspector.NetworkTransferDurationCalculator;this._calculators={};this._calculators.timeline=a;this._calculators.startTime=a;this._calculators.endTime=a;this._calculators.responseTime=a;this._calculators.duration=b;this._calculators.latency=b},
_sortItems:function(){this._removeAllNodeHighlights();var a=this._dataGrid.sortColumnIdentifier();if("timeline"===a)this._sortByTimeline();else{var b=this._sortingFunctions[a];b&&(this._dataGrid.sortNodes(b,!this._dataGrid.isSortOrderAscending()),this._timelineSortSelector.selectedIndex=0,this._updateOffscreenRows(),this.searchCanceled(),WebInspector.notifications.dispatchEventToListeners(WebInspector.UserMetrics.UserAction,{action:WebInspector.UserMetrics.UserActionNames.NetworkSort,column:a,sortOrder:this._dataGrid.sortOrder()}))}},
_sortByTimeline:function(){this._removeAllNodeHighlights();var a=this._timelineSortSelector.selectedIndex;a||(a=1);a=this._timelineSortSelector[a].value;this._dataGrid.sortNodes(this._sortingFunctions[a]);this.calculator=this._calculators[a];this.calculator.startAtZero?this._timelineGrid.hideEventDividers():this._timelineGrid.showEventDividers();this._dataGrid.markColumnAsSortedBy("timeline",WebInspector.DataGrid.Order.Ascending);this._updateOffscreenRows()},_createStatusBarItems:function(){function a(a,
c){var e=document.createElement("li");e.typeName=a;e.className=a;e.createTextChild(c);e.addEventListener("click",this._updateFilter.bind(this),!1);b.appendChild(e);return e}var b=document.createElement("div");b.className="scope-bar status-bar-item";b.title=WebInspector.UIString("Use %s Click to select multiple types.",WebInspector.KeyboardShortcut.shortcutToString("",WebInspector.KeyboardShortcut.Modifiers.CtrlOrMeta));this._filterAllElement=a.call(this,"all",WebInspector.UIString("All"));b.createChild("div",
"scope-bar-divider");for(var c in WebInspector.resourceTypes){var e=WebInspector.resourceTypes[c];a.call(this,e.name(),e.categoryTitle())}this._filterBarElement=b;this._progressBarContainer=document.createElement("div");this._progressBarContainer.className="status-bar-item"},_createSummaryBar:function(){var a=this._dataGrid.dataTableBody,b=document.createElement("tfoot"),c=b.createChild("tr","revealed network-summary-bar").createChild("td");c.setAttribute("colspan",7);a.parentNode.insertBefore(b,
a);this._summaryBarElement=c},_updateSummaryBar:function(){var a=this._requests.length;if(a){delete this._summaryBarElement._isDisplayingWarning;for(var b=0,c=0,e=0,d=-1,f=-1,g=0;g<this._requests.length;++g){var h=this._requests[g],k=h.cached||!h.transferSize?0:h.transferSize,b=b+k;this._hiddenCategories.all&&this._hiddenCategories[h.type.name()]||this._filteredOutRequests.get(h)||(c++,e+=k);h.url===WebInspector.inspectedPageURL&&(d=h.startTime);h.endTime>f&&(f=h.endTime)}g="";c!==a?(g+=String.sprintf(WebInspector.UIString("%d / %d requests"),
c,a),g+="  \u2758  "+String.sprintf(WebInspector.UIString("%s / %s transferred"),Number.bytesToString(e),Number.bytesToString(b))):(g+=String.sprintf(WebInspector.UIString("%d requests"),a),g+="  \u2758  "+String.sprintf(WebInspector.UIString("%s transferred"),Number.bytesToString(b)));-1!==d&&-1!==this._mainRequestLoadTime&&-1!==this._mainRequestDOMContentTime&&this._mainRequestDOMContentTime>d&&(g+="  \u2758  "+String.sprintf(WebInspector.UIString("%s (onload: %s, DOMContentLoaded: %s)"),Number.secondsToString(f-
d),Number.secondsToString(this._mainRequestLoadTime-d),Number.secondsToString(this._mainRequestDOMContentTime-d)));this._summaryBarElement.textContent=g}else this._summaryBarElement._isDisplayingWarning||(this._summaryBarElement._isDisplayingWarning=!0,a=document.createElement("img"),a.src="Images/warningIcon.png",this._summaryBarElement.removeChildren(),this._summaryBarElement.appendChild(a),this._summaryBarElement.appendChild(document.createTextNode(WebInspector.UIString("No requests captured. Reload the page to see detailed information on the network activity."))))},
_showCategory:function(a){this._dataGrid.element.addStyleClass("filter-"+a);delete this._hiddenCategories[a]},_hideCategory:function(a){this._dataGrid.element.removeStyleClass("filter-"+a);this._hiddenCategories[a]=!0},_updateFilter:function(a){this._removeAllNodeHighlights();var b=WebInspector.isMac(),c=!1;!b||!a.metaKey||a.ctrlKey||a.altKey||a.shiftKey||(c=!0);b||!a.ctrlKey||a.metaKey||a.altKey||a.shiftKey||(c=!0);this._filter(a.target,c);this.searchCanceled();this._updateSummaryBar()},_filter:function(a,
b){function c(){for(var a=0;a<this._filterBarElement.childNodes.length;++a){var b=this._filterBarElement.childNodes[a];b.typeName&&(b.removeStyleClass("selected"),this._hideCategory(b.typeName))}}if(a===this._filterAllElement){if(a.hasStyleClass("selected"))return;c.call(this)}else this._filterAllElement.hasStyleClass("selected")&&(this._filterAllElement.removeStyleClass("selected"),this._hideCategory("all"));b?a.hasStyleClass("selected")?(a.removeStyleClass("selected"),this._hideCategory(a.typeName)):
(a.addStyleClass("selected"),this._showCategory(a.typeName)):(c.call(this),a.addStyleClass("selected"),this._showCategory(a.typeName));this._updateOffscreenRows()},_defaultRefreshDelay:500,_scheduleRefresh:function(){this._needsRefresh||(this._needsRefresh=!0,this.isShowing()&&!this._refreshTimeout&&(this._refreshTimeout=setTimeout(this.refresh.bind(this),this._defaultRefreshDelay)))},_updateDividersIfNeeded:function(){if(this._dataGrid){for(var a=this._dataGrid.columns.timeline,b=0;b<this._dataGrid.resizers.length;++b)a.ordinal===
this._dataGrid.resizers[b].rightNeighboringColumnIndex&&(this._timelineGrid.element.style.left=this._dataGrid.resizers[b].style.left);a=!0;this.isShowing()?(this.calculator.setDisplayWindow(this._timelineGrid.dividersElement.clientWidth),a=this._timelineGrid.updateDividers(this.calculator)):(this._scheduleRefresh(),a=!1);if(a&&!this.calculator.startAtZero&&this.calculator.computePercentageFromEventTime){this._timelineGrid.removeEventDividers();if(-1!==this._mainRequestLoadTime){a=this.calculator.computePercentageFromEventTime(this._mainRequestLoadTime);
b=document.createElement("div");b.className="network-event-divider network-red-divider";var c=document.createElement("div");c.className="network-event-divider-padding";c.title=WebInspector.UIString("Load event fired");c.appendChild(b);c.style.left=a+"%";this._timelineGrid.addEventDivider(c)}-1!==this._mainRequestDOMContentTime&&(a=this.calculator.computePercentageFromEventTime(this._mainRequestDOMContentTime),b=document.createElement("div"),b.className="network-event-divider network-blue-divider",
c=document.createElement("div"),c.className="network-event-divider-padding",c.title=WebInspector.UIString("DOMContent event fired"),c.appendChild(b),c.style.left=a+"%",this._timelineGrid.addEventDivider(c))}}},_refreshIfNeeded:function(){this._needsRefresh&&this.refresh()},_invalidateAllItems:function(){for(var a=0;a<this._requests.length;++a){var b=this._requests[a];this._staleRequests[b.requestId]=b}},get calculator(){return this._calculator},set calculator(a){a&&this._calculator!==a&&(this._calculator=
a,this._calculator.reset(),this._invalidateAllItems(),this.refresh())},_requestGridNode:function(a){return this._requestGridNodes[a.__gridNodeId]},_createRequestGridNode:function(a){var b=new WebInspector.NetworkDataGridNode(this,a);a.__gridNodeId=this._lastRequestGridNodeId++;return this._requestGridNodes[a.__gridNodeId]=b},_createStatusbarButtons:function(){this._preserveLogToggle=new WebInspector.StatusBarButton(WebInspector.UIString("Preserve Log upon Navigation"),"record-profile-status-bar-item");
this._preserveLogToggle.addEventListener("click",this._onPreserveLogClicked,this);this._clearButton=new WebInspector.StatusBarButton(WebInspector.UIString("Clear"),"clear-status-bar-item");this._clearButton.addEventListener("click",this._reset,this);this._largerRequestsButton=new WebInspector.StatusBarButton(WebInspector.UIString("Use small resource rows."),"network-larger-resources-status-bar-item");this._largerRequestsButton.toggled=WebInspector.settings.resourcesLargeRows.get();this._largerRequestsButton.addEventListener("click",
this._toggleLargerRequests,this)},_onLoadEventFired:function(a){this._mainRequestLoadTime=a.data||-1;this._scheduleRefresh()},_domContentLoadedEventFired:function(a){this._mainRequestDOMContentTime=a.data||-1;this._scheduleRefresh()},wasShown:function(){this._refreshIfNeeded()},willHide:function(){this._popoverHelper.hidePopover()},refresh:function(){this._needsRefresh=!1;this._refreshTimeout&&(clearTimeout(this._refreshTimeout),delete this._refreshTimeout);this._removeAllNodeHighlights();var a=this._dataGrid.isScrolledToLastRow(),
b=!1;this.calculator.updateBoundariesForEventTime&&(b=this.calculator.updateBoundariesForEventTime(this._mainRequestLoadTime)||b,b=this.calculator.updateBoundariesForEventTime(this._mainRequestDOMContentTime)||b);for(var c in this._staleRequests){var e=this._staleRequests[c],d=this._requestGridNode(e);d?d.refreshRequest():(d=this._createRequestGridNode(e),this._dataGrid.rootNode().appendChild(d),d.refreshRequest(),this._applyFilter(d));this.calculator.updateBoundaries(e)&&(b=!0);d.isFilteredOut()||
this._updateHighlightIfMatched(e)}b&&this._invalidateAllItems();for(c in this._staleRequests)this._requestGridNode(this._staleRequests[c]).refreshGraph(this.calculator);this._staleRequests={};this._sortItems();this._updateSummaryBar();this._dataGrid.updateWidths();a&&this._dataGrid.scrollToLastRow()},_onPreserveLogClicked:function(a){this._preserveLogToggle.toggled=!this._preserveLogToggle.toggled},_reset:function(){this.dispatchEventToListeners(WebInspector.NetworkLogView.EventTypes.ViewCleared);
this._clearSearchMatchedList();this._popoverHelper&&this._popoverHelper.hidePopover();this._calculator&&this._calculator.reset();this._requests=[];this._requestsById={};this._requestsByURL={};this._staleRequests={};this._requestGridNodes={};this._dataGrid&&(this._dataGrid.rootNode().removeChildren(),this._updateDividersIfNeeded(),this._updateSummaryBar());this._mainRequestDOMContentTime=this._mainRequestLoadTime=-1;this._linkifier.reset()},get requests(){return this._requests},requestById:function(a){return this._requestsById[a]},
_onRequestStarted:function(a){this._appendRequest(a.data)},_appendRequest:function(a){this._requests.push(a);if(this._requestsById[a.requestId]){var b=a.redirects[a.redirects.length-1];this._requestsById[b.requestId]=b;this._updateSearchMatchedListAfterRequestIdChanged(a.requestId,b.requestId)}this._requestsById[a.requestId]=a;this._requestsByURL[a.url]=a;if(a.redirects)for(b=0;b<a.redirects.length;++b)this._refreshRequest(a.redirects[b]);this._refreshRequest(a)},_onRequestUpdated:function(a){this._refreshRequest(a.data)},
_refreshRequest:function(a){this._staleRequests[a.requestId]=a;this._scheduleRefresh()},clear:function(){this._preserveLogToggle.toggled||this._reset()},_mainFrameNavigated:function(a){if(!this._preserveLogToggle.toggled){a=a.data.loaderId;for(var b=[],c=0;c<this._requests.length;++c){var e=this._requests[c];e.loaderId===a&&b.push(e)}this._reset();for(c=0;c<b.length;++c)this._appendRequest(b[c])}},switchToDetailedView:function(){this._dataGrid&&(this._dataGrid.selectedNode&&(this._dataGrid.selectedNode.selected=
!1),this.element.removeStyleClass("brief-mode"),this._detailedMode=!0,this._updateColumns())},switchToBriefView:function(){this.element.addStyleClass("brief-mode");this._removeAllNodeHighlights();this._detailedMode=!1;this._updateColumns();this._popoverHelper.hidePopover()},_toggleLargerRequests:function(){WebInspector.settings.resourcesLargeRows.set(!WebInspector.settings.resourcesLargeRows.get());this._setLargerRequests(WebInspector.settings.resourcesLargeRows.get())},_setLargerRequests:function(a){(this._largerRequestsButton.toggled=
a)?(this._largerRequestsButton.title=WebInspector.UIString("Use small resource rows."),this._dataGrid.element.removeStyleClass("small"),this._timelineGrid.element.removeStyleClass("small")):(this._largerRequestsButton.title=WebInspector.UIString("Use large resource rows."),this._dataGrid.element.addStyleClass("small"),this._timelineGrid.element.addStyleClass("small"));this.dispatchEventToListeners(WebInspector.NetworkLogView.EventTypes.RowSizeChanged,{largeRows:a});this._updateOffscreenRows()},_getPopoverAnchor:function(a){if(this._allowPopover){var b=
a.enclosingNodeOrSelfWithClass("network-graph-bar")||a.enclosingNodeOrSelfWithClass("network-graph-label");return b&&b.parentElement.request&&b.parentElement.request.timing?b:(b=a.enclosingNodeOrSelfWithClass("network-script-initiated"))&&b.request&&b.request.initiator?b:null}},_showPopover:function(a,b){var c;c=a.hasStyleClass("network-script-initiated")?this._generateScriptInitiatedPopoverContent(a.request):WebInspector.RequestTimingView.createTimingTable(a.parentElement.request);b.show(c,a)},_generateScriptInitiatedPopoverContent:function(a){a=
a.initiator.stackTrace;for(var b=document.createElement("table"),c=0;c<a.length;++c){var e=a[c],d=document.createElement("tr");d.createChild("td").textContent=e.functionName?e.functionName:WebInspector.UIString("(anonymous function)");d.createChild("td").textContent=" @ ";d.createChild("td").appendChild(this._linkifier.linkifyLocation(e.url,e.lineNumber-1,0));b.appendChild(d)}return b},_updateColumns:function(){var a=this._coulmnsVisibilitySetting.get(),b=!!this._detailedMode,c;for(c in a)this._dataGrid.setColumnVisible(c,
b&&a[c]);this._dataGrid.setColumnVisible("timeline",b);this._dataGrid.applyColumnWeights()},_toggleColumnVisibility:function(a){var b=this._coulmnsVisibilitySetting.get();b[a]=!b[a];this._coulmnsVisibilitySetting.set(b);this._updateColumns()},_getConfigurableColumnIDs:function(){if(this._configurableColumnIDs)return this._configurableColumnIDs;var a=this._dataGrid.columns;return this._configurableColumnIDs=Object.keys(this._coulmnsVisibilitySetting.get()).sort(function(b,c){return a[b].title.compareTo(a[c].title)})},
_contextMenu:function(a){var b=new WebInspector.ContextMenu(a);if(this._detailedMode&&a.target.isSelfOrDescendant(this._dataGrid.headerTableBody)){a=this._coulmnsVisibilitySetting.get();for(var c=this._getConfigurableColumnIDs(),e=0;e<c.length;++e){var d=c[e];b.appendCheckboxItem(this._dataGrid.columns[d].title,this._toggleColumnVisibility.bind(this,d),!!a[d])}}else{if(a=(a=this._dataGrid.dataGridNodeFromNode(a.target))&&a._request)b.appendItem(WebInspector.openLinkExternallyLabel(),WebInspector.openResource.bind(WebInspector,
a.url,!1)),b.appendSeparator(),b.appendItem(WebInspector.copyLinkAddressLabel(),this._copyLocation.bind(this,a)),a.requestHeadersText&&b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Copy request headers":"Copy Request Headers"),this._copyRequestHeaders.bind(this,a)),a.responseHeadersText&&b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Copy response headers":"Copy Response Headers"),this._copyResponseHeaders.bind(this,a)),b.appendItem(WebInspector.UIString("Copy as cURL"),
this._copyCurlCommand.bind(this,a));b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Copy all as HAR":"Copy All as HAR"),this._copyAll.bind(this));InspectorFrontendHost.canSave()&&(b.appendSeparator(),b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Save as HAR with content":"Save as HAR with Content"),this._exportAll.bind(this)));(this._canClearBrowserCache||this._canClearBrowserCookies)&&b.appendSeparator();this._canClearBrowserCache&&b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?
"Clear browser cache":"Clear Browser Cache"),this._clearBrowserCache.bind(this));this._canClearBrowserCookies&&b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Clear browser cookies":"Clear Browser Cookies"),this._clearBrowserCookies.bind(this));a&&a.type===WebInspector.resourceTypes.XHR&&(b.appendSeparator(),b.appendItem(WebInspector.UIString("Replay XHR"),this._replayXHR.bind(this,a.requestId)),b.appendSeparator())}b.show()},_replayXHR:function(a){NetworkAgent.replayXHR(a)},
_copyAll:function(){var a={log:(new WebInspector.HARLog(this._requests)).build()};InspectorFrontendHost.copyText(JSON.stringify(a,null,2))},_copyLocation:function(a){InspectorFrontendHost.copyText(a.url)},_copyRequestHeaders:function(a){InspectorFrontendHost.copyText(a.requestHeadersText)},_copyResponseHeaders:function(a){InspectorFrontendHost.copyText(a.responseHeadersText)},_copyCurlCommand:function(a){InspectorFrontendHost.copyText(this._generateCurlCommand(a))},_exportAll:function(){var a=WebInspector.inspectedPageDomain+
".har",b=new WebInspector.FileOutputStream;b.open(a,function(){var a=new WebInspector.ProgressIndicator;this._progressBarContainer.appendChild(a.element);(new WebInspector.HARWriter).write(b,this._requests,a)}.bind(this))},_clearBrowserCache:function(){confirm(WebInspector.UIString("Are you sure you want to clear browser cache?"))&&NetworkAgent.clearBrowserCache()},_clearBrowserCookies:function(){confirm(WebInspector.UIString("Are you sure you want to clear browser cookies?"))&&NetworkAgent.clearBrowserCookies()},
_updateOffscreenRows:function(){var a=this._dataGrid.dataTableBody.children,b=a.length;if(!(2>b))for(var c=this._dataGrid.scrollContainer.scrollTop,e=c+this._dataGrid.scrollContainer.offsetHeight,d=0,f=0,g=0;g<b-1;++g){var h=a[g];if(this._dataGrid.dataGridNodeFromNode(h).isFilteredOut())h.removeStyleClass("offscreen");else{d||(d=h.offsetHeight);var k=f*d<e&&(f+1)*d>c;k!==h.rowIsVisible&&(h.enableStyleClass("offscreen",!k),h.rowIsVisible=k);f++}}},_matchRequest:function(a){if(!this._searchRegExp||
!a.name().match(this._searchRegExp)&&!a.path().match(this._searchRegExp))return-1;if(a.requestId in this._matchedRequestsMap)return this._matchedRequestsMap[a.requestId];var b=this._matchedRequests.length;this._matchedRequestsMap[a.requestId]=b;this._matchedRequests.push(a.requestId);return b},_clearSearchMatchedList:function(){delete this._searchRegExp;this._matchedRequests=[];this._matchedRequestsMap={};this._removeAllHighlights()},_updateSearchMatchedListAfterRequestIdChanged:function(a,b){var c=
this._matchedRequestsMap[a];c&&(delete this._matchedRequestsMap[a],this._matchedRequestsMap[b]=c,this._matchedRequests[c]=b)},_updateHighlightIfMatched:function(a){a=this._matchRequest(a);-1!==a&&(this.dispatchEventToListeners(WebInspector.NetworkLogView.EventTypes.SearchCountUpdated,this._matchedRequests.length),-1!==this._currentMatchedRequestIndex&&this._currentMatchedRequestIndex!==a||this._highlightNthMatchedRequestForSearch(a,!1))},_removeAllHighlights:function(){for(var a=0;a<this._highlightedSubstringChanges.length;++a)WebInspector.revertDomChanges(this._highlightedSubstringChanges[a]);
this._highlightedSubstringChanges=[]},_highlightMatchedRequest:function(a,b,c){var e=this._requestGridNode(a);if(e){var d=a.name().match(c);a=a.path().match(c);d||!a||this._largerRequestsButton.toggled||this._toggleLargerRequests();c=e._highlightMatchedSubstring(c);this._highlightedSubstringChanges.push(c);b&&e.reveal()}},_highlightNthMatchedRequestForSearch:function(a,b){var c=this.requestById(this._matchedRequests[a]);c&&(this._removeAllHighlights(),this._highlightMatchedRequest(c,b,this._searchRegExp),
this._requestGridNode(c)&&(this._currentMatchedRequestIndex=a),this.dispatchEventToListeners(WebInspector.NetworkLogView.EventTypes.SearchIndexUpdated,this._currentMatchedRequestIndex))},performSearch:function(a){var b=0,c;-1!==this._currentMatchedRequestIndex&&(c=this._matchedRequests[this._currentMatchedRequestIndex]);this._clearSearchMatchedList();this._searchRegExp=createPlainTextSearchRegex(a,"i");a=this._dataGrid.dataTableBody.childNodes;a=Array.prototype.slice.call(a,0,a.length-1);for(var e=
0;e<a.length;++e){var d=this._dataGrid.dataGridNodeFromNode(a[e]);d.isFilteredOut()||-1!==this._matchRequest(d._request)&&d._request.requestId===c&&(b=this._matchedRequests.length-1)}this.dispatchEventToListeners(WebInspector.NetworkLogView.EventTypes.SearchCountUpdated,this._matchedRequests.length);this._highlightNthMatchedRequestForSearch(b,!1)},_applyFilter:function(a){var b=this._filterRegExp,c=a._request;b&&(b.test(c.name())||b.test(c.path())?this._highlightMatchedRequest(c,!1,b):(a.element.addStyleClass("filtered-out"),
this._filteredOutRequests.put(c,!0)))},performFilter:function(a){this._removeAllHighlights();this._filteredOutRequests.clear();delete this._filterRegExp;a&&(this._filterRegExp=createPlainTextSearchRegex(a,"i"));a=this._dataGrid.rootNode().children;for(var b=0;b<a.length;++b)a[b].element.removeStyleClass("filtered-out"),this._applyFilter(a[b]);this._updateSummaryBar();this._updateOffscreenRows()},jumpToPreviousSearchResult:function(){this._matchedRequests.length&&this._highlightNthMatchedRequestForSearch((this._currentMatchedRequestIndex+
this._matchedRequests.length-1)%this._matchedRequests.length,!0)},jumpToNextSearchResult:function(){this._matchedRequests.length&&this._highlightNthMatchedRequestForSearch((this._currentMatchedRequestIndex+1)%this._matchedRequests.length,!0)},searchCanceled:function(){this._clearSearchMatchedList();this.dispatchEventToListeners(WebInspector.NetworkLogView.EventTypes.SearchCountUpdated,0)},revealAndHighlightRequest:function(a){this._removeAllNodeHighlights();if(a=this._requestGridNode(a))this._dataGrid.element.focus(),
a.reveal(),this._highlightNode(a)},_removeAllNodeHighlights:function(){this._highlightedNode&&(this._highlightedNode.element.removeStyleClass("highlighted-row"),delete this._highlightedNode)},_highlightNode:function(a){a.element.addStyleClass("highlighted-row");this._highlightedNode=a},_generateCurlCommand:function(a){function b(a){return'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/\$/g,"\\$").replace(/\n/g,"\\\n").replace(/\`/g,"\\`")+'"'}var c=["curl"],e={};c.push(b(a.url));var d="GET",
f=[],g=a.requestContentType();g&&g.startsWith("application/x-www-form-urlencoded")&&a.requestFormData?(f.push("--data"),f.push(b(a.requestFormData)),e["Content-Length"]=!0,d="POST"):a.requestFormData&&(f.push("--data-binary"),f.push(b(a.requestFormData)),e["Content-Length"]=!0,d="POST");a.requestMethod!==d&&(c.push("-X"),c.push(a.requestMethod));for(d=0;d<a.requestHeaders.length;d++)g=a.requestHeaders[d],g.name in e||(c.push("-H"),c.push(b(g.name+": "+g.value)));c=c.concat(f);return c.join(" ")},
__proto__:WebInspector.View.prototype};WebInspector.NetworkLogView.EventTypes={ViewCleared:"ViewCleared",RowSizeChanged:"RowSizeChanged",RequestSelected:"RequestSelected",SearchCountUpdated:"SearchCountUpdated",SearchIndexUpdated:"SearchIndexUpdated"};
WebInspector.NetworkPanel=function(){WebInspector.Panel.call(this,"network");this.registerRequiredCSS("networkPanel.css");this._injectStyles();this.createSidebarView();this.splitView.hideMainElement();var a=WebInspector.NetworkLogView._defaultColumnsVisivility,b=WebInspector.settings.createSetting("networkLogColumnsVisibility",a),c=b.get(),e={},d;for(d in a)e[d]=c.hasOwnProperty(d)?c[d]:a[d];b.set(e);this._networkLogView=new WebInspector.NetworkLogView(b);this._networkLogView.show(this.sidebarElement);
this._viewsContainerElement=this.splitView.mainElement;this._viewsContainerElement.id="network-views";this._viewsContainerElement.addStyleClass("hidden");this._networkLogView.useLargeRows||this._viewsContainerElement.addStyleClass("small");this._networkLogView.addEventListener(WebInspector.NetworkLogView.EventTypes.ViewCleared,this._onViewCleared,this);this._networkLogView.addEventListener(WebInspector.NetworkLogView.EventTypes.RowSizeChanged,this._onRowSizeChanged,this);this._networkLogView.addEventListener(WebInspector.NetworkLogView.EventTypes.RequestSelected,
this._onRequestSelected,this);this._networkLogView.addEventListener(WebInspector.NetworkLogView.EventTypes.SearchCountUpdated,this._onSearchCountUpdated,this);this._networkLogView.addEventListener(WebInspector.NetworkLogView.EventTypes.SearchIndexUpdated,this._onSearchIndexUpdated,this);this._closeButtonElement=document.createElement("button");this._closeButtonElement.id="network-close-button";this._closeButtonElement.addEventListener("click",this._toggleGridMode.bind(this),!1);this._viewsContainerElement.appendChild(this._closeButtonElement);
WebInspector.GoToLineDialog.install(this,function(){return this.visibleView}.bind(this))};
WebInspector.NetworkPanel.prototype={statusBarItems:function(){return this._networkLogView.statusBarItems()},elementsToRestoreScrollPositionsFor:function(){return this._networkLogView.elementsToRestoreScrollPositionsFor()},_reset:function(){this._networkLogView._reset()},handleShortcut:function(a){this._viewingRequestMode&&a.keyCode===WebInspector.KeyboardShortcut.Keys.Esc.code?(this._toggleGridMode(),a.handled=!0):WebInspector.Panel.prototype.handleShortcut.call(this,a)},wasShown:function(){WebInspector.Panel.prototype.wasShown.call(this)},
get requests(){return this._networkLogView.requests},requestById:function(a){return this._networkLogView.requestById(a)},_requestByAnchor:function(a){return a.requestId?this.requestById(a.requestId):this._networkLogView._requestsByURL[a.href]},canShowAnchorLocation:function(a){return!!this._requestByAnchor(a)},showAnchorLocation:function(a){a=this._requestByAnchor(a);this.revealAndHighlightRequest(a)},revealAndHighlightRequest:function(a){this._toggleGridMode();a&&this._networkLogView.revealAndHighlightRequest(a)},
_onViewCleared:function(a){this._closeVisibleRequest();this._toggleGridMode();this._viewsContainerElement.removeChildren();this._viewsContainerElement.appendChild(this._closeButtonElement)},_onRowSizeChanged:function(a){this._viewsContainerElement.enableStyleClass("small",!a.data.largeRows)},_onSearchCountUpdated:function(a){WebInspector.searchController.updateSearchMatchesCount(a.data,this)},_onSearchIndexUpdated:function(a){WebInspector.searchController.updateCurrentMatchIndex(a.data,this)},_onRequestSelected:function(a){this._showRequest(a.data)},
_showRequest:function(a){a&&(this._toggleViewingRequestMode(),this.visibleView&&(this.visibleView.detach(),delete this.visibleView),a=new WebInspector.NetworkItemView(a),a.show(this._viewsContainerElement),this.visibleView=a)},_closeVisibleRequest:function(){this.element.removeStyleClass("viewing-resource");this.visibleView&&(this.visibleView.detach(),delete this.visibleView)},_toggleGridMode:function(){this._viewingRequestMode&&(this._viewingRequestMode=!1,this.element.removeStyleClass("viewing-resource"),
this.splitView.hideMainElement());this._networkLogView.switchToDetailedView();this._networkLogView.allowPopover=!0;this._networkLogView._allowRequestSelection=!1},_toggleViewingRequestMode:function(){this._viewingRequestMode||(this._viewingRequestMode=!0,this.element.addStyleClass("viewing-resource"),this.splitView.showMainElement(),this._networkLogView.allowPopover=!1,this._networkLogView._allowRequestSelection=!0,this._networkLogView.switchToBriefView())},performSearch:function(a){this._networkLogView.performSearch(a)},
canFilter:function(){return!0},performFilter:function(a){this._networkLogView.performFilter(a)},jumpToPreviousSearchResult:function(){this._networkLogView.jumpToPreviousSearchResult()},jumpToNextSearchResult:function(){this._networkLogView.jumpToNextSearchResult()},searchCanceled:function(){this._networkLogView.searchCanceled()},appendApplicableItems:function(a,b,c){function e(){WebInspector.inspectorView.setCurrentPanel(this);this.revealAndHighlightRequest(c)}c instanceof WebInspector.NetworkRequest&&
(this.visibleView&&this.visibleView.isShowing()&&this.visibleView.request()===c||b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Reveal in Network panel":"Reveal in Network Panel"),e.bind(this)))},_injectStyles:function(){var a=document.createElement("style"),b=[],c=WebInspector.NetworkLogView._defaultColumnsVisivility,e=[],d=[],f;for(f in c)e.push("#network-container .hide-"+f+"-column ."+f+"-column"),d.push(".network-log-grid.data-grid td."+f+"-column");b.push(e.join(", ")+
"{border-right: 0 none transparent;}");b.push(d.join(", ")+"{background-color: rgba(0, 0, 0, 0.07);}");var c=[],g;for(g in WebInspector.resourceTypes)e=WebInspector.resourceTypes[g].name(),c.push(".network-log-grid.data-grid.filter-"+e+" table.data tr.revealed.network-type-"+e+":not(.filtered-out)");c.push(".network-log-grid.data-grid.filter-all table.data tr.revealed.network-item:not(.filtered-out)");b.push(c.join(", ")+"{display: table-row;}");a.textContent=b.join("\n");document.head.appendChild(a)},
__proto__:WebInspector.Panel.prototype};WebInspector.NetworkBaseCalculator=function(){};
WebInspector.NetworkBaseCalculator.prototype={computePosition:function(a){return(a-this._minimumBoundary)/this.boundarySpan()*this._workingArea},computeBarGraphPercentages:function(a){return{start:0,middle:0,end:this._value(a)/this.boundarySpan()*100}},computeBarGraphLabels:function(a){a=this.formatTime(this._value(a));return{left:a,right:a,tooltip:a}},boundarySpan:function(){return this._maximumBoundary-this._minimumBoundary},updateBoundaries:function(a){this._minimumBoundary=0;a=this._value(a);
return"undefined"===typeof this._maximumBoundary||a>this._maximumBoundary?(this._maximumBoundary=a,!0):!1},reset:function(){delete this._minimumBoundary;delete this._maximumBoundary},maximumBoundary:function(){return this._maximumBoundary},minimumBoundary:function(){return this._minimumBoundary},zeroTime:function(){return this._minimumBoundary},_value:function(a){return 0},formatTime:function(a){return a.toString()},setDisplayWindow:function(a){this._workingArea=a;this.paddingLeft=0}};
WebInspector.NetworkTimeCalculator=function(a){WebInspector.NetworkBaseCalculator.call(this);this.startAtZero=a};
WebInspector.NetworkTimeCalculator.prototype={computeBarGraphPercentages:function(a){var b=-1!==a.startTime?(a.startTime-this._minimumBoundary)/this.boundarySpan()*100:0,c=-1!==a.responseReceivedTime?(a.responseReceivedTime-this._minimumBoundary)/this.boundarySpan()*100:this.startAtZero?b:100;a=-1!==a.endTime?(a.endTime-this._minimumBoundary)/this.boundarySpan()*100:this.startAtZero?c:100;this.startAtZero&&(a-=b,c-=b,b=0);return{start:b,middle:c,end:a}},computePercentageFromEventTime:function(a){return-1===
a||this.startAtZero?0:(a-this._minimumBoundary)/this.boundarySpan()*100},updateBoundariesForEventTime:function(a){return-1===a||this.startAtZero?!1:"undefined"===typeof this._maximumBoundary||a>this._maximumBoundary?(this._maximumBoundary=a,!0):!1},computeBarGraphLabels:function(a){var b="";-1!==a.responseReceivedTime&&-1!==a.endTime&&(b=this.formatTime(a.endTime-a.responseReceivedTime));var c=0<a.latency,e=c?this.formatTime(a.latency):b;if(a.timing)return{left:e,right:b};if(c&&b)var c=this.formatTime(a.duration),
d=WebInspector.UIString("%s latency, %s download (%s total)",e,b,c);else c?d=WebInspector.UIString("%s latency",e):b&&(d=WebInspector.UIString("%s download",b));a.cached&&(d=WebInspector.UIString("%s (from cache)",d));return{left:e,right:b,tooltip:d}},updateBoundaries:function(a){var b=!1,c;c=this.startAtZero?0:this._lowerBound(a);-1!==c&&("undefined"===typeof this._minimumBoundary||c<this._minimumBoundary)&&(this._minimumBoundary=c,b=!0);a=this._upperBound(a);-1!==a&&("undefined"===typeof this._maximumBoundary||
a>this._maximumBoundary)&&(this._maximumBoundary=a,b=!0);return b},formatTime:function(a){return Number.secondsToString(a)},_lowerBound:function(a){return 0},_upperBound:function(a){return 0},__proto__:WebInspector.NetworkBaseCalculator.prototype};WebInspector.NetworkTransferTimeCalculator=function(){WebInspector.NetworkTimeCalculator.call(this,!1)};
WebInspector.NetworkTransferTimeCalculator.prototype={formatTime:function(a){return Number.secondsToString(a)},_lowerBound:function(a){return a.startTime},_upperBound:function(a){return a.endTime},__proto__:WebInspector.NetworkTimeCalculator.prototype};WebInspector.NetworkTransferDurationCalculator=function(){WebInspector.NetworkTimeCalculator.call(this,!0)};
WebInspector.NetworkTransferDurationCalculator.prototype={formatTime:function(a){return Number.secondsToString(a)},_upperBound:function(a){return a.duration},__proto__:WebInspector.NetworkTimeCalculator.prototype};WebInspector.NetworkDataGridNode=function(a,b){WebInspector.DataGridNode.call(this,{});this._parentView=a;this._request=b};
WebInspector.NetworkDataGridNode.prototype={createCells:function(){this._element.addStyleClass("offscreen");this._nameCell=this._createDivInTD("name");this._methodCell=this._createDivInTD("method");this._statusCell=this._createDivInTD("status");this._domainCell=this._createDivInTD("domain");this._typeCell=this._createDivInTD("type");this._initiatorCell=this._createDivInTD("initiator");this._cookiesCell=this._createDivInTD("cookies");this._setCookiesCell=this._createDivInTD("setCookies");this._sizeCell=
this._createDivInTD("size");this._timeCell=this._createDivInTD("time");this._createTimelineCell();this._nameCell.addEventListener("click",this._onClick.bind(this),!1);this._nameCell.addEventListener("dblclick",this._openInNewTab.bind(this),!1)},isFilteredOut:function(){return this._parentView._filteredOutRequests.get(this._request)?!0:this._parentView._hiddenCategories.all?this._request.type.name()in this._parentView._hiddenCategories:!1},_onClick:function(){this._parentView._allowRequestSelection||
this.select()},select:function(){this._parentView.dispatchEventToListeners(WebInspector.NetworkLogView.EventTypes.RequestSelected,this._request);WebInspector.DataGridNode.prototype.select.apply(this,arguments);WebInspector.notifications.dispatchEventToListeners(WebInspector.UserMetrics.UserAction,{action:WebInspector.UserMetrics.UserActionNames.NetworkRequestSelected,url:this._request.url})},_highlightMatchedSubstring:function(a){var b=[];(a=this._element.textContent.match(a))&&WebInspector.highlightSearchResult(this._nameCell,
a.index,a[0].length,b);return b},_openInNewTab:function(){InspectorFrontendHost.openInNewTab(this._request.url)},get selectable(){return this._parentView._allowRequestSelection&&!this.isFilteredOut()},_createDivInTD:function(a){a=this.createTD(a);var b=a.createChild("div");this._element.appendChild(a);return b},_createTimelineCell:function(){this._graphElement=document.createElement("div");this._graphElement.className="network-graph-side";this._barAreaElement=document.createElement("div");this._barAreaElement.className=
"network-graph-bar-area";this._barAreaElement.request=this._request;this._graphElement.appendChild(this._barAreaElement);this._barLeftElement=document.createElement("div");this._barLeftElement.className="network-graph-bar waiting";this._barAreaElement.appendChild(this._barLeftElement);this._barRightElement=document.createElement("div");this._barRightElement.className="network-graph-bar";this._barAreaElement.appendChild(this._barRightElement);this._labelLeftElement=document.createElement("div");this._labelLeftElement.className=
"network-graph-label waiting";this._barAreaElement.appendChild(this._labelLeftElement);this._labelRightElement=document.createElement("div");this._labelRightElement.className="network-graph-label";this._barAreaElement.appendChild(this._labelRightElement);this._graphElement.addEventListener("mouseover",this._refreshLabelPositions.bind(this),!1);this._timelineCell=document.createElement("td");this._timelineCell.className="timeline-column";this._element.appendChild(this._timelineCell);this._timelineCell.appendChild(this._graphElement)},
refreshRequest:function(){this._refreshNameCell();this._methodCell.setTextAndTitle(this._request.requestMethod);this._refreshStatusCell();this._refreshDomainCell();this._refreshTypeCell();this._refreshInitiatorCell();this._refreshCookiesCell();this._refreshSetCookiesCell();this._refreshSizeCell();this._refreshTimeCell();this._request.cached&&this._graphElement.addStyleClass("resource-cached");this._element.addStyleClass("network-item");this._updateElementStyleClasses(this._element)},_updateElementStyleClasses:function(a){var b=
"network-type-"+this._request.type.name();a.hasStyleClass(b)||(a.removeMatchingStyleClasses("network-type-\\w+"),a.addStyleClass(b))},_refreshNameCell:function(){this._nameCell.removeChildren();if(this._request.type===WebInspector.resourceTypes.Image){var a=document.createElement("img");a.className="image-network-icon-preview";this._request.populateImageSource(a);var b=document.createElement("div");b.className="icon";b.appendChild(a)}else b=document.createElement("img"),b.className="icon";this._nameCell.appendChild(b);
this._nameCell.appendChild(document.createTextNode(this._request.name()));this._appendSubtitle(this._nameCell,this._request.path());this._nameCell.title=this._request.url},_refreshStatusCell:function(){this._statusCell.removeChildren();if(this._request.failed){var a=this._request.canceled?WebInspector.UIString("(canceled)"):WebInspector.UIString("(failed)");this._request.localizedFailDescription?(this._statusCell.appendChild(document.createTextNode(a)),this._appendSubtitle(this._statusCell,this._request.localizedFailDescription),
this._statusCell.title=a+" "+this._request.localizedFailDescription):this._statusCell.setTextAndTitle(a);this._statusCell.addStyleClass("network-dim-cell");this.element.addStyleClass("network-error-row")}else this._statusCell.removeStyleClass("network-dim-cell"),this.element.removeStyleClass("network-error-row"),this._request.statusCode?(this._statusCell.appendChild(document.createTextNode(""+this._request.statusCode)),this._appendSubtitle(this._statusCell,this._request.statusText),this._statusCell.title=
this._request.statusCode+" "+this._request.statusText,400<=this._request.statusCode&&this.element.addStyleClass("network-error-row"),this._request.cached&&this._statusCell.addStyleClass("network-dim-cell")):(!this._request.isHttpFamily()&&this._request.finished?this._statusCell.setTextAndTitle(WebInspector.UIString("Success")):this._request.isPingRequest()?this._statusCell.setTextAndTitle(WebInspector.UIString("(ping)")):this._statusCell.setTextAndTitle(WebInspector.UIString("(pending)")),this._statusCell.addStyleClass("network-dim-cell"))},
_refreshDomainCell:function(){this._domainCell.removeChildren();this._domainCell.appendChild(document.createTextNode(this._request.domain));this._domainCell.title=this._request.parsedURL.host},_refreshTypeCell:function(){this._request.mimeType?(this._typeCell.removeStyleClass("network-dim-cell"),this._typeCell.setTextAndTitle(this._request.mimeType)):this._request.isPingRequest()?(this._typeCell.removeStyleClass("network-dim-cell"),this._typeCell.setTextAndTitle(this._request.requestContentType())):
(this._typeCell.addStyleClass("network-dim-cell"),this._typeCell.setTextAndTitle(WebInspector.UIString("Pending")))},_refreshInitiatorCell:function(){this._initiatorCell.removeChildren();this._initiatorCell.removeStyleClass("network-dim-cell");this._initiatorCell.removeStyleClass("network-script-initiated");delete this._initiatorCell.request;var a=this._request,b=a.initiatorInfo();switch(b.type){case WebInspector.NetworkRequest.InitiatorType.Parser:this._initiatorCell.title=b.url+":"+b.lineNumber;
this._initiatorCell.appendChild(WebInspector.linkifyResourceAsNode(b.url,b.lineNumber-1));this._appendSubtitle(this._initiatorCell,WebInspector.UIString("Parser"));break;case WebInspector.NetworkRequest.InitiatorType.Redirect:this._initiatorCell.title=b.url;this._initiatorCell.appendChild(WebInspector.linkifyRequestAsNode(a.redirectSource));this._appendSubtitle(this._initiatorCell,WebInspector.UIString("Redirect"));break;case WebInspector.NetworkRequest.InitiatorType.Script:b=this._parentView._linkifier.linkifyLocation(b.url,
b.lineNumber-1,0);b.title="";this._initiatorCell.appendChild(b);this._appendSubtitle(this._initiatorCell,WebInspector.UIString("Script"));this._initiatorCell.addStyleClass("network-script-initiated");this._initiatorCell.request=a;break;default:this._initiatorCell.title="",this._initiatorCell.addStyleClass("network-dim-cell"),this._initiatorCell.setTextAndTitle(WebInspector.UIString("Other"))}},_refreshCookiesCell:function(){var a=this._request.requestCookies;this._cookiesCell.setTextAndTitle(a?""+
a.length:"")},_refreshSetCookiesCell:function(){var a=this._request.responseCookies;this._setCookiesCell.setTextAndTitle(a?""+a.length:"")},_refreshSizeCell:function(){if(this._request.cached)this._sizeCell.setTextAndTitle(WebInspector.UIString("(from cache)")),this._sizeCell.addStyleClass("network-dim-cell");else{var a="number"===typeof this._request.resourceSize?Number.bytesToString(this._request.resourceSize):"?",b="number"===typeof this._request.transferSize?Number.bytesToString(this._request.transferSize):
"?";this._sizeCell.setTextAndTitle(b);this._sizeCell.removeStyleClass("network-dim-cell");this._appendSubtitle(this._sizeCell,a)}},_refreshTimeCell:function(){0<this._request.duration?(this._timeCell.removeStyleClass("network-dim-cell"),this._timeCell.setTextAndTitle(Number.secondsToString(this._request.duration)),this._appendSubtitle(this._timeCell,Number.secondsToString(this._request.latency))):(this._timeCell.addStyleClass("network-dim-cell"),this._timeCell.setTextAndTitle(WebInspector.UIString("Pending")))},
_appendSubtitle:function(a,b){var c=document.createElement("div");c.className="network-cell-subtitle";c.textContent=b;a.appendChild(c)},refreshGraph:function(a){var b=a.computeBarGraphPercentages(this._request);this._percentages=b;this._barAreaElement.removeStyleClass("hidden");this._updateElementStyleClasses(this._graphElement);this._barLeftElement.style.setProperty("left",b.start+"%");this._barRightElement.style.setProperty("right",100-b.end+"%");this._barLeftElement.style.setProperty("right",100-
b.end+"%");this._barRightElement.style.setProperty("left",b.middle+"%");a=a.computeBarGraphLabels(this._request);this._labelLeftElement.textContent=a.left;this._labelRightElement.textContent=a.right;a=a.tooltip||"";this._barLeftElement.title=a;this._labelLeftElement.title=a;this._labelRightElement.title=a;this._barRightElement.title=a},_refreshLabelPositions:function(){if(this._percentages){this._labelLeftElement.style.removeProperty("left");this._labelLeftElement.style.removeProperty("right");this._labelLeftElement.removeStyleClass("before");
this._labelLeftElement.removeStyleClass("hidden");this._labelRightElement.style.removeProperty("left");this._labelRightElement.style.removeProperty("right");this._labelRightElement.removeStyleClass("after");this._labelRightElement.removeStyleClass("hidden");var a=this._barRightElement.offsetWidth,b=this._barLeftElement.offsetWidth;if(this._barLeftElement)var c=b-10,e=a-b-10;else c=b-a-10,e=a-10;var d=this._labelLeftElement.offsetWidth,f=this._labelRightElement.offsetWidth,c=d>c,e=f>e,g=this._graphElement.offsetWidth;
if(c&&this._percentages.start/100*g<d+10)var h=!0;if(e&&(100-this._percentages.end)/100*g<f+10)var k=!0;b==a&&(c&&!e?h=!0:e&&!c&&(k=!0));c?(h&&this._labelLeftElement.addStyleClass("hidden"),this._labelLeftElement.style.setProperty("right",100-this._percentages.start+"%"),this._labelLeftElement.addStyleClass("before")):(this._labelLeftElement.style.setProperty("left",this._percentages.start+"%"),this._labelLeftElement.style.setProperty("right",100-this._percentages.middle+"%"));e?(k&&this._labelRightElement.addStyleClass("hidden"),
this._labelRightElement.style.setProperty("left",this._percentages.end+"%"),this._labelRightElement.addStyleClass("after")):(this._labelRightElement.style.setProperty("left",this._percentages.middle+"%"),this._labelRightElement.style.setProperty("right",100-this._percentages.end+"%"))}},__proto__:WebInspector.DataGridNode.prototype};WebInspector.NetworkDataGridNode.NameComparator=function(a,b){var c=a._request.name(),e=b._request.name();return c>e?1:e>c?-1:0};
WebInspector.NetworkDataGridNode.SizeComparator=function(a,b){return b._request.cached&&!a._request.cached?1:a._request.cached&&!b._request.cached?-1:a._request.transferSize===b._request.transferSize?0:a._request.transferSize-b._request.transferSize};
WebInspector.NetworkDataGridNode.InitiatorComparator=function(a,b){var c=a._request.initiatorInfo(),e=b._request.initiatorInfo();return c.type<e.type?-1:c.type>e.type?1:c.source<e.source?-1:c.source>e.source?1:c.lineNumber<e.lineNumber?-1:c.lineNumber>e.lineNumber?1:0};WebInspector.NetworkDataGridNode.RequestCookiesCountComparator=function(a,b){return(a._request.requestCookies?a._request.requestCookies.length:0)-(b._request.requestCookies?b._request.requestCookies.length:0)};
WebInspector.NetworkDataGridNode.ResponseCookiesCountComparator=function(a,b){return(a._request.responseCookies?a._request.responseCookies.length:0)-(b._request.responseCookies?b._request.responseCookies.length:0)};WebInspector.NetworkDataGridNode.RequestPropertyComparator=function(a,b,c,e){c=c._request[a];a=e._request[a];return c>a?b?-1:1:a>c?b?1:-1:0};
