WebInspector.CSSNamedFlowCollectionsView=function(){WebInspector.SidebarView.call(this,WebInspector.SidebarView.SidebarPosition.Start);this.registerRequiredCSS("cssNamedFlows.css");this._namedFlows={};this._contentNodes={};this._regionNodes={};this.element.addStyleClass("css-named-flow-collections-view");this.element.addStyleClass("fill");this._statusElement=document.createElement("span");this._statusElement.textContent=WebInspector.UIString("CSS Named Flows");this.firstElement().createChild("div",
"tabbed-pane-header selected sidebar-header").createChild("div","tabbed-pane-header-tab").createChild("span","tabbed-pane-header-tab-title").textContent=WebInspector.UIString("CSS Named Flows");this._sidebarContentElement=this.firstElement().createChild("div","sidebar-content outline-disclosure");this._flowListElement=this._sidebarContentElement.createChild("ol");this._flowTree=new TreeOutline(this._flowListElement);this._emptyElement=document.createElement("div");this._emptyElement.addStyleClass("info");
this._emptyElement.textContent=WebInspector.UIString("No CSS Named Flows");this._tabbedPane=new WebInspector.TabbedPane;this._tabbedPane.closeableTabs=!0;this._tabbedPane.show(this.secondElement())};
WebInspector.CSSNamedFlowCollectionsView.prototype={showInDrawer:function(){WebInspector.showViewInDrawer(this._statusElement,this)},reset:function(){this._document&&WebInspector.cssModel.getNamedFlowCollectionAsync(this._document.id,this._resetNamedFlows.bind(this))},_setDocument:function(a){this._document=a;this.reset()},_documentUpdated:function(a){this._setDocument(a.data)},_setSidebarHasContent:function(a){a?this._emptyElement.parentNode&&(this._sidebarContentElement.removeChild(this._emptyElement),
this._sidebarContentElement.appendChild(this._flowListElement)):this._flowListElement.parentNode&&(this._sidebarContentElement.removeChild(this._flowListElement),this._sidebarContentElement.appendChild(this._emptyElement))},_appendNamedFlow:function(a){for(var b=this._hashNamedFlow(a.documentNodeId,a.name),c={flow:a,flowHash:b},e=0;e<a.content.length;++e)this._contentNodes[a.content[e]]=b;for(e=0;e<a.regions.length;++e)this._regionNodes[a.regions[e].nodeId]=b;a=new WebInspector.FlowTreeElement(c);
a.onselect=this._selectNamedFlowTab.bind(this,b);c.flowTreeItem=a;this._namedFlows[b]=c;this._flowTree.children.length||this._setSidebarHasContent(!0);this._flowTree.appendChild(a)},_removeNamedFlow:function(a){var b=this._namedFlows[a];this._tabbedPane._tabsById[a]&&this._tabbedPane.closeTab(a);this._flowTree.removeChild(b.flowTreeItem);for(var b=b.flow,c=0;c<b.content.length;++c)delete this._contentNodes[b.content[c]];for(c=0;c<b.regions.length;++c)delete this._regionNodes[b.regions[c].nodeId];
delete this._namedFlows[a];this._flowTree.children.length||this._setSidebarHasContent(!1)},_updateNamedFlow:function(a){var b=this._hashNamedFlow(a.documentNodeId,a.name),c=this._namedFlows[b];if(c){var e=c.flow;c.flow=a;for(var d=0;d<e.content.length;++d)delete this._contentNodes[e.content[d]];for(d=0;d<e.regions.length;++d)delete this._regionNodes[e.regions[d].nodeId];for(d=0;d<a.content.length;++d)this._contentNodes[a.content[d]]=b;for(d=0;d<a.regions.length;++d)this._regionNodes[a.regions[d].nodeId]=
b;c.flowTreeItem.setOverset(a.overset);c.flowView&&(c.flowView.flow=a)}},_resetNamedFlows:function(a){for(var b in this._namedFlows)this._removeNamedFlow(b);a=a.namedFlowMap;for(var c in a)this._appendNamedFlow(a[c]);this._flowTree.children.length?this._showNamedFlowForNode(WebInspector.panel("elements").treeOutline.selectedDOMNode()):this._setSidebarHasContent(!1)},_namedFlowCreated:function(a){a.data.documentNodeId===this._document.id&&this._appendNamedFlow(a.data)},_namedFlowRemoved:function(a){a.data.documentNodeId===
this._document.id&&this._removeNamedFlow(this._hashNamedFlow(a.data.documentNodeId,a.data.flowName))},_regionLayoutUpdated:function(a){a.data.documentNodeId===this._document.id&&this._updateNamedFlow(a.data)},_hashNamedFlow:function(a,b){return a+"|"+b},_showNamedFlow:function(a){this._selectNamedFlowInSidebar(a);this._selectNamedFlowTab(a)},_selectNamedFlowInSidebar:function(a){this._namedFlows[a].flowTreeItem.select(!0)},_selectNamedFlowTab:function(a){var b=this._namedFlows[a];this._tabbedPane.selectedTabId===
a||this._tabbedPane.selectTab(a)||(b.flowView||(b.flowView=new WebInspector.CSSNamedFlowView(b.flow)),this._tabbedPane.appendTab(a,b.flow.name,b.flowView),this._tabbedPane.selectTab(a))},_selectedNodeChanged:function(a){this._showNamedFlowForNode(a.data)},_tabSelected:function(a){this._selectNamedFlowInSidebar(a.data.tabId)},_tabClosed:function(a){this._namedFlows[a.data.tabId].flowTreeItem.deselect()},_showNamedFlowForNode:function(a){if(a)if(this._regionNodes[a.id])this._showNamedFlow(this._regionNodes[a.id]);
else for(;a;){if(this._contentNodes[a.id]){this._showNamedFlow(this._contentNodes[a.id]);break}a=a.parentNode}},wasShown:function(){WebInspector.SidebarView.prototype.wasShown.call(this);WebInspector.domAgent.requestDocument(this._setDocument.bind(this));WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.DocumentUpdated,this._documentUpdated,this);WebInspector.cssModel.addEventListener(WebInspector.CSSStyleModel.Events.NamedFlowCreated,this._namedFlowCreated,this);WebInspector.cssModel.addEventListener(WebInspector.CSSStyleModel.Events.NamedFlowRemoved,
this._namedFlowRemoved,this);WebInspector.cssModel.addEventListener(WebInspector.CSSStyleModel.Events.RegionLayoutUpdated,this._regionLayoutUpdated,this);WebInspector.panel("elements").treeOutline.addEventListener(WebInspector.ElementsTreeOutline.Events.SelectedNodeChanged,this._selectedNodeChanged,this);this._tabbedPane.addEventListener(WebInspector.TabbedPane.EventTypes.TabSelected,this._tabSelected,this);this._tabbedPane.addEventListener(WebInspector.TabbedPane.EventTypes.TabClosed,this._tabClosed,
this)},willHide:function(){WebInspector.domAgent.removeEventListener(WebInspector.DOMAgent.Events.DocumentUpdated,this._documentUpdated,this);WebInspector.cssModel.removeEventListener(WebInspector.CSSStyleModel.Events.NamedFlowCreated,this._namedFlowCreated,this);WebInspector.cssModel.removeEventListener(WebInspector.CSSStyleModel.Events.NamedFlowRemoved,this._namedFlowRemoved,this);WebInspector.cssModel.removeEventListener(WebInspector.CSSStyleModel.Events.RegionLayoutUpdated,this._regionLayoutUpdated,
this);WebInspector.panel("elements").treeOutline.removeEventListener(WebInspector.ElementsTreeOutline.Events.SelectedNodeChanged,this._selectedNodeChanged,this);this._tabbedPane.removeEventListener(WebInspector.TabbedPane.EventTypes.TabSelected,this._tabSelected,this);this._tabbedPane.removeEventListener(WebInspector.TabbedPane.EventTypes.TabClosed,this._tabClosed,this)},__proto__:WebInspector.SidebarView.prototype};
WebInspector.FlowTreeElement=function(a){var b=document.createElement("div");b.createChild("div","selection");b.createChild("span","title").createChild("span").textContent=a.flow.name;TreeElement.call(this,b,a,!1);this._overset=!1;this.setOverset(a.flow.overset)};
WebInspector.FlowTreeElement.prototype={setOverset:function(a){this._overset!==a&&(a?(this.title.addStyleClass("named-flow-overflow"),this.tooltip=WebInspector.UIString("Overflows.")):(this.title.removeStyleClass("named-flow-overflow"),this.tooltip=""),this._overset=a)},__proto__:TreeElement.prototype};
WebInspector.CSSNamedFlowView=function(a){WebInspector.View.call(this);this.element.addStyleClass("css-named-flow");this.element.addStyleClass("outline-disclosure");this._treeOutline=new TreeOutline(this.element.createChild("ol"),!0);this._contentTreeItem=new TreeElement(WebInspector.UIString("content"),null,!0);this._treeOutline.appendChild(this._contentTreeItem);this._regionsTreeItem=new TreeElement(WebInspector.UIString("region chain"),null,!0);this._regionsTreeItem.expand();this._treeOutline.appendChild(this._regionsTreeItem);
this._flow=a;for(var b=a.content,c=0;c<b.length;++c)this._insertContentNode(b[c]);a=a.regions;for(c=0;c<a.length;++c)this._insertRegion(a[c])};WebInspector.CSSNamedFlowView.OversetTypeMessageMap={empty:"empty",fit:"fit",overset:"overset"};
WebInspector.CSSNamedFlowView.prototype={_createFlowTreeOutline:function(a){if(!a)return null;var b=new WebInspector.ElementsTreeOutline(!1,!1,!0);b.element.addStyleClass("named-flow-element");b.setVisible(!0);b.rootDOMNode=a;b.wireToDomAgent();WebInspector.domAgent.removeEventListener(WebInspector.DOMAgent.Events.DocumentUpdated,b._elementsTreeUpdater._documentUpdated,b._elementsTreeUpdater);return b},_insertContentNode:function(a,b){var c=this._createFlowTreeOutline(WebInspector.domAgent.nodeForId(a)),
c=new TreeElement(c.element,c);void 0===b?this._contentTreeItem.appendChild(c):this._contentTreeItem.insertChild(c,b)},_insertRegion:function(a,b){var c=this._createFlowTreeOutline(WebInspector.domAgent.nodeForId(a.nodeId));c.element.addStyleClass("region-"+a.regionOverset);var c=new TreeElement(c.element,c),e=WebInspector.UIString(WebInspector.CSSNamedFlowView.OversetTypeMessageMap[a.regionOverset]);c.tooltip=WebInspector.UIString("Region is %s.",e);void 0===b?this._regionsTreeItem.appendChild(c):
this._regionsTreeItem.insertChild(c,b)},get flow(){return this._flow},set flow(a){this._update(a)},_updateRegionOverset:function(a,b,c){var e=a.representedObject.element;e.removeStyleClass("region-"+c);e.addStyleClass("region-"+b);b=WebInspector.UIString(WebInspector.CSSNamedFlowView.OversetTypeMessageMap[b]);a.tooltip=WebInspector.UIString("Region is %s.",b)},_mergeContentNodes:function(a,b){for(var c={},e=0;e<b.length;++e)c[b[e]]=!0;for(var d=e=0,f=0;e<a.length||d<b.length;)e===a.length?(this._insertContentNode(b[d]),
++d):d===b.length?(this._contentTreeItem.removeChildAtIndex(f),++e):a[e]===b[d]?(++e,++d,++f):c[a[e]]?(this._insertContentNode(b[d],f),++d,++f):(this._contentTreeItem.removeChildAtIndex(f),++e)},_mergeRegions:function(a,b){for(var c={},e=0;e<b.length;++e)c[b[e].nodeId]=!0;for(var d=e=0,f=0;e<a.length||d<b.length;)e===a.length?(this._insertRegion(b[d]),++d):d===b.length?(this._regionsTreeItem.removeChildAtIndex(f),++e):a[e].nodeId===b[d].nodeId?(a[e].regionOverset!==b[d].regionOverset&&this._updateRegionOverset(this._regionsTreeItem.children[f],
b[d].regionOverset,a[e].regionOverset),++e,++d,++f):c[a[e].nodeId]?(this._insertRegion(b[d],f),++d,++f):(this._regionsTreeItem.removeChildAtIndex(f),++e)},_update:function(a){this._mergeContentNodes(this._flow.content,a.content);this._mergeRegions(this._flow.regions,a.regions);this._flow=a},__proto__:WebInspector.View.prototype};
WebInspector.EventListenersSidebarPane=function(){WebInspector.SidebarPane.call(this,WebInspector.UIString("Event Listeners"));this.bodyElement.addStyleClass("events-pane");this.sections=[];this.settingsSelectElement=document.createElement("select");this.settingsSelectElement.className="select-filter";var a=document.createElement("option");a.value="all";a.label=WebInspector.UIString("All Nodes");this.settingsSelectElement.appendChild(a);a=document.createElement("option");a.value="selected";a.label=
WebInspector.UIString("Selected Node Only");this.settingsSelectElement.appendChild(a);a=WebInspector.settings.eventListenersFilter.get();"all"===a?this.settingsSelectElement[0].selected=!0:"selected"===a&&(this.settingsSelectElement[1].selected=!0);this.settingsSelectElement.addEventListener("click",function(a){a.consume()},!1);this.settingsSelectElement.addEventListener("change",this._changeSetting.bind(this),!1);this.titleElement.appendChild(this.settingsSelectElement);this._linkifier=new WebInspector.Linkifier};
WebInspector.EventListenersSidebarPane._objectGroupName="event-listeners-sidebar-pane";
WebInspector.EventListenersSidebarPane.prototype={update:function(a){function b(b,f){if(!b){for(var g="selected"===WebInspector.settings.eventListenersFilter.get(),h=[],k={},l=0;l<f.length;++l){var m=f[l];if(!g||a.id===m.nodeId)if(m.node=WebInspector.domAgent.nodeForId(m.nodeId),delete m.nodeId,!/^function _inspectorCommandLineAPI_logEvent\(/.test(m.handlerBody.toString())){var n=m.type,p=k[n];p||(p=new WebInspector.EventListenersSection(n,a.id,e._linkifier),k[n]=p,h.push(n),e.sections.push(p));p.addListener(m)}}if(0===
h.length)g=document.createElement("div"),g.className="info",g.textContent=WebInspector.UIString("No Event Listeners"),c.appendChild(g);else for(h.sort(),l=0;l<h.length;++l)p=k[h[l]],c.appendChild(p.element)}}RuntimeAgent.releaseObjectGroup(WebInspector.EventListenersSidebarPane._objectGroupName);this._linkifier.reset();var c=this.bodyElement;c.removeChildren();this.sections=[];var e=this;a&&a.eventListeners(WebInspector.EventListenersSidebarPane._objectGroupName,b);this._selectedNode=a},willHide:function(){delete this._selectedNode},
_changeSetting:function(){WebInspector.settings.eventListenersFilter.set(this.settingsSelectElement[this.settingsSelectElement.selectedIndex].value);this.update(this._selectedNode)},__proto__:WebInspector.SidebarPane.prototype};
WebInspector.EventListenersSection=function(a,b,c){this.eventListeners=[];this._nodeId=b;this._linkifier=c;WebInspector.PropertiesSection.call(this,a);this.propertiesElement.parentNode.removeChild(this.propertiesElement);delete this.propertiesElement;delete this.propertiesTreeOutline;this._eventBars=document.createElement("div");this._eventBars.className="event-bars";this.element.appendChild(this._eventBars)};
WebInspector.EventListenersSection.prototype={addListener:function(a){a=new WebInspector.EventListenerBar(a,this._nodeId,this._linkifier);this._eventBars.appendChild(a.element)},__proto__:WebInspector.PropertiesSection.prototype};
WebInspector.EventListenerBar=function(a,b,c){WebInspector.ObjectPropertiesSection.call(this,WebInspector.RemoteObject.fromPrimitiveValue(""));this.eventListener=a;this._nodeId=b;this._setNodeTitle();this._setFunctionSubtitle(c);this.editable=!1;this.element.className="event-bar";this.headerElement.addStyleClass("source-code");this.propertiesElement.className="event-properties properties-tree source-code"};
WebInspector.EventListenerBar.prototype={update:function(){WebInspector.RemoteObject.resolveNode(this.eventListener.node,WebInspector.EventListenersSidebarPane._objectGroupName,function(a){var b=[];this.eventListener.type&&b.push(WebInspector.RemoteObjectProperty.fromPrimitiveValue("type",this.eventListener.type));"undefined"!==typeof this.eventListener.useCapture&&b.push(WebInspector.RemoteObjectProperty.fromPrimitiveValue("useCapture",this.eventListener.useCapture));"undefined"!==typeof this.eventListener.isAttribute&&
b.push(WebInspector.RemoteObjectProperty.fromPrimitiveValue("isAttribute",this.eventListener.isAttribute));a&&b.push(new WebInspector.RemoteObjectProperty("node",a));"undefined"!==typeof this.eventListener.handler&&(a=WebInspector.RemoteObject.fromPayload(this.eventListener.handler),b.push(new WebInspector.RemoteObjectProperty("handler",a)));"undefined"!==typeof this.eventListener.handlerBody&&b.push(WebInspector.RemoteObjectProperty.fromPrimitiveValue("listenerBody",this.eventListener.handlerBody));
this.eventListener.sourceName&&b.push(WebInspector.RemoteObjectProperty.fromPrimitiveValue("sourceName",this.eventListener.sourceName));this.eventListener.location&&b.push(WebInspector.RemoteObjectProperty.fromPrimitiveValue("lineNumber",this.eventListener.location.lineNumber+1));this.updateProperties(b)}.bind(this))},_setNodeTitle:function(){var a=this.eventListener.node;a&&(a.nodeType()===Node.DOCUMENT_NODE?this.titleElement.textContent="document":a.id===this._nodeId?this.titleElement.textContent=
a.appropriateSelectorFor():(this.titleElement.removeChildren(),this.titleElement.appendChild(WebInspector.DOMPresentationUtils.linkifyNodeReference(this.eventListener.node))))},_setFunctionSubtitle:function(a){if(this.eventListener.location){this.subtitleElement.removeChildren();var b;this.eventListener.location.scriptId&&(b=a.linkifyRawLocation(this.eventListener.location));b||(b=a.linkifyLocation(this.eventListener.sourceName,this.eventListener.location.lineNumber,0));this.subtitleElement.appendChild(b)}else a=
this.eventListener.handlerBody.match(/function ([^\(]+?)\(/),this.subtitleElement.textContent=a?a[1]:WebInspector.UIString("(anonymous function)")},__proto__:WebInspector.ObjectPropertiesSection.prototype};
WebInspector.MetricsSidebarPane=function(){WebInspector.SidebarPane.call(this,WebInspector.UIString("Metrics"));WebInspector.cssModel.addEventListener(WebInspector.CSSStyleModel.Events.StyleSheetChanged,this._styleSheetOrMediaQueryResultChanged,this);WebInspector.cssModel.addEventListener(WebInspector.CSSStyleModel.Events.MediaQueryResultChanged,this._styleSheetOrMediaQueryResultChanged,this);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.AttrModified,this._attributesUpdated,
this);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.AttrRemoved,this._attributesUpdated,this)};
WebInspector.MetricsSidebarPane.prototype={update:function(a){a&&(this.node=a);this._innerUpdate()},_innerUpdate:function(){function a(a){a&&this.node===c&&this._updateMetrics(a)}function b(a){a&&this.node===c&&(this.inlineStyle=a)}if(!this._isEditingMetrics){var c=this.node;c&&c.nodeType()===Node.ELEMENT_NODE?(WebInspector.cssModel.getComputedStyleAsync(c.id,a.bind(this)),WebInspector.cssModel.getInlineStylesAsync(c.id,b.bind(this))):this.bodyElement.removeChildren()}},_styleSheetOrMediaQueryResultChanged:function(){this._innerUpdate()},
_attributesUpdated:function(a){this.node===a.data.node&&this._innerUpdate()},_getPropertyValueAsPx:function(a,b){return Number(a.getPropertyValue(b).replace(/px$/,"")||0)},_getBox:function(a,b){var c="border"===b?"-width":"",e=this._getPropertyValueAsPx(a,b+"-left"+c),d=this._getPropertyValueAsPx(a,b+"-top"+c),f=this._getPropertyValueAsPx(a,b+"-right"+c),c=this._getPropertyValueAsPx(a,b+"-bottom"+c);return{left:e,top:d,right:f,bottom:c}},_highlightDOMNode:function(a,b,c){c.consume();if(a=a&&this.node?
this.node.id:0){if(this._highlightMode===b)return;this._highlightMode=b;WebInspector.domAgent.highlightDOMNode(a,b)}else delete this._highlightMode,WebInspector.domAgent.hideDOMNodeHighlight();for(c=0;this._boxElements&&c<this._boxElements.length;++c){var e=this._boxElements[c];e.style.backgroundColor=a&&"all"!==b&&e._name!==b?"":e._backgroundColor}},_updateMetrics:function(a){function b(a,b,c,d){d=("position"!==b?b+"-":"")+c+d;var e=a.getPropertyValue(d);""===e||"position"!==b&&"0px"===e?e="\u2012":
"position"===b&&"auto"===e&&(e="\u2012");var e=e.replace(/px$/,""),f=document.createElement("div");f.className=c;f.textContent=e;f.addEventListener("dblclick",this.startEditing.bind(this,f,b,d,a),!1);return f}function c(a){var b=a.getPropertyValue("width").replace(/px$/,"");if("border-box"===a.getPropertyValue("box-sizing")){var c=f._getBox(a,"border");a=f._getBox(a,"padding");b=b-c.left-c.right-a.left-a.right}return b}function e(a){var b=a.getPropertyValue("height").replace(/px$/,"");if("border-box"===
a.getPropertyValue("box-sizing")){var c=f._getBox(a,"border");a=f._getBox(a,"padding");b=b-c.top-c.bottom-a.top-a.bottom}return b}var d=document.createElement("div");d.className="metrics";var f=this,g={"table-cell":!0,"table-column":!0,"table-column-group":!0,"table-footer-group":!0,"table-header-group":!0,"table-row":!0,"table-row-group":!0},h={"table-column":!0,"table-column-group":!0,"table-footer-group":!0,"table-header-group":!0,"table-row":!0,"table-row-group":!0},k={"static":!0},l=["content",
"padding","border","margin","position"],m=[WebInspector.Color.PageHighlight.Content,WebInspector.Color.PageHighlight.Padding,WebInspector.Color.PageHighlight.Border,WebInspector.Color.PageHighlight.Margin,WebInspector.Color.fromRGBA(0,0,0,0)],n=[WebInspector.UIString("content"),WebInspector.UIString("padding"),WebInspector.UIString("border"),WebInspector.UIString("margin"),WebInspector.UIString("position")],p=null;this._boxElements=[];for(var q=0;q<l.length;++q){var s=l[q];if("margin"!==s||!g[a.getPropertyValue("display")])if("padding"!==
s||!h[a.getPropertyValue("display")])if("position"!==s||!k[a.getPropertyValue("position")]){var r=document.createElement("div");r.className=s;r._backgroundColor=m[q].toString("original");r._name=s;r.style.backgroundColor=r._backgroundColor;r.addEventListener("mouseover",this._highlightDOMNode.bind(this,!0,"position"===s?"all":s),!1);this._boxElements.push(r);if("content"===s)p=document.createElement("span"),p.textContent=c(a),p.addEventListener("dblclick",this.startEditing.bind(this,p,"width","width",
a),!1),s=document.createElement("span"),s.textContent=e(a),s.addEventListener("dblclick",this.startEditing.bind(this,s,"height","height",a),!1),r.appendChild(p),r.appendChild(document.createTextNode(" \u00d7 ")),r.appendChild(s);else{var t="border"===s?"-width":"",u=document.createElement("div");u.className="label";u.textContent=n[q];r.appendChild(u);r.appendChild(b.call(this,a,s,"top",t));r.appendChild(document.createElement("br"));r.appendChild(b.call(this,a,s,"left",t));p&&r.appendChild(p);r.appendChild(b.call(this,
a,s,"right",t));r.appendChild(document.createElement("br"));r.appendChild(b.call(this,a,s,"bottom",t))}p=r}}d.appendChild(p);d.addEventListener("mouseover",this._highlightDOMNode.bind(this,!1,""),!1);this.bodyElement.removeChildren();this.bodyElement.appendChild(d)},startEditing:function(a,b,c,e){WebInspector.isBeingEdited(a)||(b={box:b,styleProperty:c,computedStyle:e},c=this._handleKeyDown.bind(this,b,c),b.keyDownHandler=c,a.addEventListener("keydown",c,!1),this._isEditingMetrics=!0,c=new WebInspector.EditingConfig(this.editingCommitted.bind(this),
this.editingCancelled.bind(this),b),WebInspector.startEditing(a,c),window.getSelection().setBaseAndExtent(a,0,a,1))},_handleKeyDown:function(a,b,c){var e=c.currentTarget;WebInspector.handleElementValueModifications(c,e,function(b,c){this._applyUserInput(e,c,b,a,!1)}.bind(this),void 0,function(a){"margin"!==b&&0>a&&(a=0);return a})},editingEnded:function(a,b){delete this.originalPropertyData;delete this.previousPropertyDataCandidate;a.removeEventListener("keydown",b.keyDownHandler,!1);delete this._isEditingMetrics},
editingCancelled:function(a,b){if("originalPropertyData"in this&&this.inlineStyle)if(this.originalPropertyData)this.inlineStyle.allProperties[this.originalPropertyData.index].setText(this.originalPropertyData.propertyText,!1);else{var c=this.inlineStyle.pastLastSourcePropertyIndex();c&&this.inlineStyle.allProperties[c-1].setText("",!1)}this.editingEnded(a,b);this.update()},_applyUserInput:function(a,b,c,e,d){if(!this.inlineStyle||d&&b===c)return this.editingCancelled(a,e);"position"===e.box||b&&"\u2012"!==
b?"position"!==e.box||b&&"\u2012"!==b||(b="auto"):b="0px";b=b.toLowerCase();/^\d+$/.test(b)&&(b+="px");a=e.styleProperty;var f=e.computedStyle;if("border-box"===f.getPropertyValue("box-sizing")&&("width"===a||"height"===a)){if(!b.match(/px$/)){WebInspector.log("For elements with box-sizing: border-box, only absolute content area dimensions can be applied",WebInspector.ConsoleMessage.MessageLevel.Error,!0);return}c=this._getBox(f,"border");f=this._getBox(f,"padding");b=Number(b.replace(/px$/,""));
if(isNaN(b))return;b="width"===a?b+(c.left+c.right+f.left+f.right):b+(c.top+c.bottom+f.top+f.bottom);b+="px"}this.previousPropertyDataCandidate=null;var g=this;a=function(a){a&&(g.inlineStyle=a,"originalPropertyData"in g||(g.originalPropertyData=g.previousPropertyDataCandidate),"undefined"!==typeof g._highlightMode&&WebInspector.domAgent.highlightDOMNode(g.node.id,g._highlightMode),d&&(g.dispatchEventToListeners("metrics edited"),g.update()))};c=this.inlineStyle.allProperties;for(f=0;f<c.length;++f){var h=
c[f];if(h.name===e.styleProperty&&!h.inactive){this.previousPropertyDataCandidate=h;h.setValue(b,d,!0,a);return}}this.inlineStyle.appendProperty(e.styleProperty,b,a)},editingCommitted:function(a,b,c,e){this.editingEnded(a,e);this._applyUserInput(a,b,c,e,!0)},__proto__:WebInspector.SidebarPane.prototype};WebInspector.PropertiesSidebarPane=function(){WebInspector.SidebarPane.call(this,WebInspector.UIString("Properties"))};WebInspector.PropertiesSidebarPane._objectGroupName="properties-sidebar-pane";
WebInspector.PropertiesSidebarPane.prototype={update:function(a){function b(a){function b(){for(var a=this,c={},d=1;a;)c[d++]=a,a=a.__proto__;return c}a&&(a.callFunction(b,void 0,c.bind(this)),a.release())}function c(a){a&&a.getOwnProperties(e.bind(this))}function e(a){if(a){var b=this.bodyElement;b.removeChildren();this.sections=[];for(var c=0;c<a.length;++c)if(parseInt(a[c].name,10)){var d=a[c].value,e=d.description;e.match(/Prototype$/)&&(e=e.replace(/Prototype$/,""));d=new WebInspector.ObjectPropertiesSection(d,
e);this.sections.push(d);b.appendChild(d.element)}}}var d=this.bodyElement;a?WebInspector.RemoteObject.resolveNode(a,WebInspector.PropertiesSidebarPane._objectGroupName,b.bind(this)):(d.removeChildren(),this.sections=[])},__proto__:WebInspector.SidebarPane.prototype};
WebInspector.StylesSidebarPane=function(a,b){WebInspector.SidebarPane.call(this,WebInspector.UIString("Styles"));this.settingsSelectElement=document.createElement("select");this.settingsSelectElement.className="select-settings";var c=document.createElement("option");c.value=WebInspector.Color.Format.Original;c.label=WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"As authored":"As Authored");this.settingsSelectElement.appendChild(c);c=document.createElement("option");c.value=WebInspector.Color.Format.HEX;
c.label=WebInspector.UIString("Hex Colors");this.settingsSelectElement.appendChild(c);c=document.createElement("option");c.value=WebInspector.Color.Format.RGB;c.label=WebInspector.UIString("RGB Colors");this.settingsSelectElement.appendChild(c);c=document.createElement("option");c.value=WebInspector.Color.Format.HSL;c.label=WebInspector.UIString("HSL Colors");this.settingsSelectElement.appendChild(c);this.settingsSelectElement.addEventListener("click",function(a){a.consume(!0)},!0);this.settingsSelectElement.addEventListener("change",
this._changeSetting.bind(this),!1);this._updateColorFormatFilter();this.titleElement.appendChild(this.settingsSelectElement);this._elementStateButton=document.createElement("button");this._elementStateButton.className="pane-title-button element-state";this._elementStateButton.title=WebInspector.UIString("Toggle Element State");this._elementStateButton.addEventListener("click",this._toggleElementStatePane.bind(this),!1);this.titleElement.appendChild(this._elementStateButton);c=document.createElement("button");
c.className="pane-title-button add";c.id="add-style-button-test-id";c.title=WebInspector.UIString("New Style Rule");c.addEventListener("click",this._createNewRule.bind(this),!1);this.titleElement.appendChild(c);this._computedStylePane=a;a._stylesSidebarPane=this;this._setPseudoClassCallback=b;this.element.addEventListener("contextmenu",this._contextMenuEventFired.bind(this),!0);WebInspector.settings.colorFormat.addChangeListener(this._colorFormatSettingChanged.bind(this));this._createElementStatePane();
this.bodyElement.appendChild(this._elementStatePane);this._sectionsContainer=document.createElement("div");this.bodyElement.appendChild(this._sectionsContainer);this._spectrumHelper=new WebInspector.SpectrumPopupHelper;this._linkifier=new WebInspector.Linkifier(new WebInspector.Linkifier.DefaultCSSFormatter);WebInspector.cssModel.addEventListener(WebInspector.CSSStyleModel.Events.StyleSheetChanged,this._styleSheetOrMediaQueryResultChanged,this);WebInspector.cssModel.addEventListener(WebInspector.CSSStyleModel.Events.MediaQueryResultChanged,
this._styleSheetOrMediaQueryResultChanged,this);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.AttrModified,this._attributeChanged,this);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.AttrRemoved,this._attributeChanged,this);WebInspector.settings.showUserAgentStyles.addChangeListener(this._showUserAgentStylesSettingChanged.bind(this))};WebInspector.StylesSidebarPane.PseudoIdNames=" first-line first-letter before after selection  -webkit-scrollbar -webkit-file-upload-button -webkit-input-placeholder -webkit-slider-thumb -webkit-search-cancel-button -webkit-search-decoration -webkit-search-results-decoration -webkit-search-results-button -webkit-media-controls-panel -webkit-media-controls-play-button -webkit-media-controls-mute-button -webkit-media-controls-timeline -webkit-media-controls-timeline-container -webkit-media-controls-volume-slider -webkit-media-controls-volume-slider-container -webkit-media-controls-current-time-display -webkit-media-controls-time-remaining-display -webkit-media-controls-seek-back-button -webkit-media-controls-seek-forward-button -webkit-media-controls-fullscreen-button -webkit-media-controls-rewind-button -webkit-media-controls-return-to-realtime-button -webkit-media-controls-toggle-closed-captions-button -webkit-media-controls-status-display -webkit-scrollbar-thumb -webkit-scrollbar-button -webkit-scrollbar-track -webkit-scrollbar-track-piece -webkit-scrollbar-corner -webkit-resizer -webkit-inner-spin-button -webkit-outer-spin-button".split(" ");
WebInspector.StylesSidebarPane.canonicalPropertyName=function(a){if(!a||9>a.length||"-"!==a.charAt(0))return a;var b=a.match(/(?:-webkit-|-khtml-|-apple-)(.+)/);return b?b[1]:a};WebInspector.StylesSidebarPane.createExclamationMark=function(a){var b=document.createElement("img");b.className="exclamation-mark";b.title=WebInspector.CSSMetadata.cssPropertiesMetainfo.keySet()[a.toLowerCase()]?WebInspector.UIString("Invalid property value."):WebInspector.UIString("Unknown property name.");return b};
WebInspector.StylesSidebarPane.prototype={_contextMenuEventFired:function(a){var b=new WebInspector.ContextMenu(a);b.appendApplicableItems(a.target);b.show()},get _forcedPseudoClasses(){return this.node?this.node.getUserProperty("pseudoState")||void 0:void 0},_updateForcedPseudoStateInputs:function(){if(this.node){var a=this._forcedPseudoClasses;a||(a=[]);for(var b=this._elementStatePane.inputs,c=0;c<b.length;++c)b[c].checked=0<=a.indexOf(b[c].state)}},update:function(a,b){this._spectrumHelper.hide();
var c=!1;b&&delete this.node;b||a!==this.node||(c=!0);a&&a.nodeType()===Node.TEXT_NODE&&a.parentNode&&(a=a.parentNode);a&&a.nodeType()!==Node.ELEMENT_NODE&&(a=null);a&&(this.node=a);this._updateForcedPseudoStateInputs();c?this._refreshUpdate():this._rebuildUpdate()},_refreshUpdate:function(a,b,c){function e(e){delete this._refreshUpdateInProgress;this._lastNodeForInnerRefresh?(delete this._lastNodeForInnerRefresh,this._refreshUpdate(a,b,c)):(this.node===d&&e&&this._innerRefreshUpdate(d,e,a),c&&c())}
if(this._refreshUpdateInProgress)this._lastNodeForInnerRefresh=this.node;else{var d=this._validateNode(c);d&&(this._computedStylePane.isShowing()||b?(this._refreshUpdateInProgress=!0,WebInspector.cssModel.getComputedStyleAsync(d.id,e.bind(this))):(this._innerRefreshUpdate(d,null,a),c&&c()))}},_rebuildUpdate:function(){function a(a){delete this._rebuildUpdateInProgress;var b=this._lastNodeForInnerRebuild;if(b&&(delete this._lastNodeForInnerRebuild,b!==this.node)){this._rebuildUpdate();return}a&&this.node===
e&&(d.matchedCSSRules=a.matchedCSSRules,d.pseudoElements=a.pseudoElements,d.inherited=a.inherited,this._innerRebuildUpdate(e,d));b&&this._rebuildUpdate()}function b(a,b){d.inlineStyle=a;d.attributesStyle=b}function c(a){d.computedStyle=a}if(this._rebuildUpdateInProgress)this._lastNodeForInnerRebuild=this.node;else{var e=this._validateNode();if(e){this._rebuildUpdateInProgress=!0;var d={};this._computedStylePane.isShowing()&&WebInspector.cssModel.getComputedStyleAsync(e.id,c.bind(this));WebInspector.cssModel.getInlineStylesAsync(e.id,
b.bind(this));WebInspector.cssModel.getMatchedStylesAsync(e.id,!0,!0,a.bind(this))}}},_validateNode:function(a){return this.node?this.node:(this._sectionsContainer.removeChildren(),this._computedStylePane.bodyElement.removeChildren(),this.sections={},a&&a(),null)},_styleSheetOrMediaQueryResultChanged:function(){this._userOperation||this._isEditingStyle||this._rebuildUpdate()},_attributeChanged:function(a){this._isEditingStyle||this._userOperation||this._canAffectCurrentStyles(a.data.node)&&this._rebuildUpdate()},
_canAffectCurrentStyles:function(a){return this.node&&(this.node===a||a.parentNode===this.node.parentNode||a.isAncestor(this.node))},_innerRefreshUpdate:function(a,b,c){for(var e in this.sections){var d=this._refreshStyleRules(this.sections[e],b),f={};this._markUsedProperties(d,f);this._refreshSectionsForStyleRules(d,f,c)}b&&this.sections[0][0].rebuildComputedTrace(this.sections[0]);this._nodeStylesUpdatedForTest(a,!1)},_innerRebuildUpdate:function(a,b){this._sectionsContainer.removeChildren();this._computedStylePane.bodyElement.removeChildren();
this._linkifier.reset();var c=this._rebuildStyleRules(a,b),e={};this._markUsedProperties(c,e);this.sections[0]=this._rebuildSectionsForStyleRules(c,e,0,null);var d=this.sections[0].inheritedPropertiesSeparatorElement;b.computedStyle&&this.sections[0][0].rebuildComputedTrace(this.sections[0]);for(var f=0;f<b.pseudoElements.length;++f){var e=b.pseudoElements[f],c=[],g=e.pseudoId;c.push({isStyleSeparator:!0,pseudoId:g});for(var h=e.rules.length-1;0<=h;--h){var k=e.rules[h];c.push({style:k.style,selectorText:k.selectorText,
media:k.media,sourceURL:k.sourceURL,rule:k,editable:!(!k.style||!k.style.id)})}e={};this._markUsedProperties(c,e);this.sections[g]=this._rebuildSectionsForStyleRules(c,e,g,d)}this._nodeStylesUpdatedForTest(a,!0)},_nodeStylesUpdatedForTest:function(a,b){},_refreshStyleRules:function(a,b){for(var c=[],e=0;a&&e<a.length;++e){var d=a[e];d.isBlank||(d.computedStyle&&(d.styleRule.style=b),c.push({section:d,style:d.styleRule.style,computedStyle:d.computedStyle,rule:d.rule,editable:!(!d.styleRule.style||
!d.styleRule.style.id),isAttribute:d.styleRule.isAttribute,isInherited:d.styleRule.isInherited}))}return c},_rebuildStyleRules:function(a,b){function c(){if(b.attributesStyle){var c={style:b.attributesStyle,editable:!1};c.selectorText=a.nodeNameInCorrectCase()+"["+WebInspector.UIString("Attributes Style")+"]";f.push(c)}}function e(a){var b={isStyleSeparator:!0};b.node=a;f.push(b)}var d=b.computedStyle;this.sections={};var f=[];f.push({computedStyle:!0,selectorText:"",style:d,editable:!1});b.inlineStyle&&
a.nodeType()===Node.ELEMENT_NODE&&(d={selectorText:"element.style",style:b.inlineStyle,isAttribute:!0},f.push(d));b.matchedCSSRules.length&&f.push({isStyleSeparator:!0,text:WebInspector.UIString("Matched CSS Rules")});for(var g,d=b.matchedCSSRules.length-1;0<=d;--d){var h=b.matchedCSSRules[d];if(WebInspector.settings.showUserAgentStyles.get()||!h.isUser&&!h.isUserAgent)!h.isUser&&!h.isUserAgent||g||(g=!0,c()),f.push({style:h.style,selectorText:h.selectorText,media:h.media,sourceURL:h.sourceURL,rule:h,
editable:!(!h.style||!h.style.id)})}g||c();g=a.parentNode;for(var k=0;k<b.inherited.length;++k){var l=b.inherited[k],m=!1;l.inlineStyle&&this._containsInherited(l.inlineStyle)&&(d={selectorText:WebInspector.UIString("Style Attribute"),style:l.inlineStyle,isAttribute:!0,isInherited:!0,parentNode:g},m||(e(g),m=!0),f.push(d));for(d=l.matchedCSSRules.length-1;0<=d;--d)h=l.matchedCSSRules[d],this._containsInherited(h.style)&&(WebInspector.settings.showUserAgentStyles.get()||!h.isUser&&!h.isUserAgent)&&
(m||(e(g),m=!0),f.push({style:h.style,selectorText:h.selectorText,media:h.media,sourceURL:h.sourceURL,rule:h,isInherited:!0,parentNode:g,editable:!(!h.style||!h.style.id)}));g=g.parentNode}return f},_markUsedProperties:function(a,b){for(var c={},e={},d=0;d<a.length;++d){var f=a[d];if(!(f.computedStyle||f.isStyleSeparator||f.section&&f.section.noAffect)){f.usedProperties={};for(var g=f.style.allProperties,h=0;h<g.length;++h){var k=g[h];if(k.isLive&&k.parsedOk){var l=WebInspector.StylesSidebarPane.canonicalPropertyName(k.name);
f.isInherited&&!WebInspector.CSSMetadata.InheritedProperties[l]||c.hasOwnProperty(l)||!(k=k.priority.length)&&b.hasOwnProperty(l)||(k&&(c[l]=!0,e.hasOwnProperty(l)&&delete e[l].usedProperties[l]),f.usedProperties[l]=!0,b[l]=!0,e[l]=f)}}}}},_refreshSectionsForStyleRules:function(a,b,c){for(var e=0;e<a.length;++e){var d=a[e],f=d.section;d.computedStyle?(f._usedProperties=b,f.update()):(f._usedProperties=d.usedProperties,f.update(f===c))}},_rebuildSectionsForStyleRules:function(a,b,c,e){c=[];for(var d=
!0,f=0;f<a.length;++f){var g=a[f];if(g.isStyleSeparator)d=document.createElement("div"),d.className="sidebar-separator",g.node?(g=WebInspector.DOMPresentationUtils.linkifyNodeReference(g.node),d.appendChild(document.createTextNode(WebInspector.UIString("Inherited from")+" ")),d.appendChild(g),c.inheritedPropertiesSeparatorElement||(c.inheritedPropertiesSeparatorElement=d)):"pseudoId"in g?(g=WebInspector.StylesSidebarPane.PseudoIdNames[g.pseudoId],d.textContent=g?WebInspector.UIString("Pseudo ::%s element",
g):WebInspector.UIString("Pseudo element")):d.textContent=g.text,this._sectionsContainer.insertBefore(d,e),d=!0;else{var h=g.computedStyle,k=g.editable;"undefined"===typeof k&&(k=!0);h?g=new WebInspector.ComputedStylePropertiesSection(this,g,b):(g=new WebInspector.StylePropertiesSection(this,g,k,g.isInherited,d),g._markSelectorMatches());g.expanded=!0;h?(this._computedStylePane.bodyElement.appendChild(g.element),d=!0):(this._sectionsContainer.insertBefore(g.element,e),d=!1);c.push(g)}}return c},_containsInherited:function(a){a=
a.allProperties;for(var b=0;b<a.length;++b){var c=a[b];if(c.isLive&&c.name in WebInspector.CSSMetadata.InheritedProperties)return!0}return!1},_colorFormatSettingChanged:function(a){this._updateColorFormatFilter();for(var b in this.sections){a=this.sections[b];for(var c=0;c<a.length;++c)a[c].update(!0)}},_updateColorFormatFilter:function(){for(var a=0,b=WebInspector.settings.colorFormat.get(),c=this.settingsSelectElement.options,e=0;e<c.length;++e)if(c[e].value===b){a=e;break}this.settingsSelectElement.selectedIndex=
a},_changeSetting:function(a){WebInspector.settings.colorFormat.set(this.settingsSelectElement.options[this.settingsSelectElement.selectedIndex].value)},_createNewRule:function(a){a.consume();this.expand();this.addBlankSection().startEditingSelector()},addBlankSection:function(){var a=new WebInspector.BlankStylePropertiesSection(this,this.node?this.node.appropriateSelectorFor(!0):"");this._sectionsContainer.insertBefore(a.element,this.sections[0][1].element.nextSibling);this.sections[0].splice(2,
0,a);return a},removeSection:function(a){for(var b in this.sections){var c=this.sections[b],e=c.indexOf(a);-1!==e&&(c.splice(e,1),a.element.parentNode&&a.element.parentNode.removeChild(a.element))}},_toggleElementStatePane:function(a){a.consume();this._elementStateButton.hasStyleClass("toggled")?(this._elementStateButton.removeStyleClass("toggled"),this._elementStatePane.removeStyleClass("expanded")):(this.expand(),this._elementStateButton.addStyleClass("toggled"),this._elementStatePane.addStyleClass("expanded"))},
_createElementStatePane:function(){function a(a){var b=this._validateNode();b&&this._setPseudoClassCallback(b.id,a.target.state,a.target.checked)}function b(b){var c=document.createElement("td"),d=document.createElement("label"),k=document.createElement("input");k.type="checkbox";k.state=b;k.addEventListener("click",a.bind(this),!1);e.push(k);d.appendChild(k);d.appendChild(document.createTextNode(":"+b));c.appendChild(d);return c}this._elementStatePane=document.createElement("div");this._elementStatePane.className=
"styles-element-state-pane source-code";var c=document.createElement("table"),e=[];this._elementStatePane.inputs=e;var d=document.createElement("tr");d.appendChild(b.call(this,"active"));d.appendChild(b.call(this,"hover"));c.appendChild(d);d=document.createElement("tr");d.appendChild(b.call(this,"focus"));d.appendChild(b.call(this,"visited"));c.appendChild(d);this._elementStatePane.appendChild(c)},_showUserAgentStylesSettingChanged:function(){this._rebuildUpdate()},willHide:function(){this._spectrumHelper.hide()},
__proto__:WebInspector.SidebarPane.prototype};
WebInspector.ComputedStyleSidebarPane=function(){WebInspector.SidebarPane.call(this,WebInspector.UIString("Computed Style"));var a=new WebInspector.Checkbox(WebInspector.UIString("Show inherited"),"sidebar-pane-subtitle");this.titleElement.appendChild(a.element);WebInspector.settings.showInheritedComputedStyleProperties.get()&&(this.bodyElement.addStyleClass("show-inherited"),a.checked=!0);a.addEventListener(function(b){WebInspector.settings.showInheritedComputedStyleProperties.set(a.checked);WebInspector.settings.showInheritedComputedStyleProperties.get()?
this.bodyElement.addStyleClass("show-inherited"):this.bodyElement.removeStyleClass("show-inherited")}.bind(this))};WebInspector.ComputedStyleSidebarPane.prototype={wasShown:function(){WebInspector.SidebarPane.prototype.wasShown.call(this);this._hasFreshContent||this.prepareContent()},prepareContent:function(a){this._stylesSidebarPane._refreshUpdate(null,!0,function(){this._hasFreshContent=!0;a&&a();delete this._hasFreshContent}.bind(this))},__proto__:WebInspector.SidebarPane.prototype};
WebInspector.StylePropertiesSection=function(a,b,c,e,d){WebInspector.PropertiesSection.call(this,"");this.element.className="styles-section matched-styles monospace"+(d?" first-styles-section":"");if(b.media)for(d=b.media.length-1;0<=d;--d){var f=b.media[d],g=this.titleElement.createChild("div","media"),h;switch(f.source){case WebInspector.CSSMedia.Source.LINKED_SHEET:case WebInspector.CSSMedia.Source.INLINE_SHEET:h='media="'+f.text+'"';break;case WebInspector.CSSMedia.Source.MEDIA_RULE:h="@media "+
f.text;break;case WebInspector.CSSMedia.Source.IMPORT_RULE:h="@import "+f.text}if(f.sourceURL){var k=g.createChild("div","subtitle"),l=0>f.sourceLine?void 0:f.sourceLine,l=WebInspector.linkifyResourceAsNode(f.sourceURL,l,"subtitle",f.sourceURL+(isNaN(l)?"":":"+(l+1)));l.preferredPanel="scripts";l.style.float="right";k.appendChild(l)}g=g.createChild("span");g.textContent=h;g.title=f.text}h=document.createElement("div");this._selectorElement=document.createElement("span");this._selectorElement.textContent=
b.selectorText;h.appendChild(this._selectorElement);d=document.createElement("span");d.textContent=" {";h.appendChild(d);h.addEventListener("mousedown",this._handleEmptySpaceMouseDown.bind(this),!1);h.addEventListener("click",this._handleSelectorContainerClick.bind(this),!1);d=document.createElement("div");d.textContent="}";this.element.appendChild(d);this._selectorElement.addEventListener("click",this._handleSelectorClick.bind(this),!1);this.element.addEventListener("mousedown",this._handleEmptySpaceMouseDown.bind(this),
!1);this.element.addEventListener("click",this._handleEmptySpaceClick.bind(this),!1);this._parentPane=a;this.styleRule=b;this.rule=this.styleRule.rule;this.editable=c;this.isInherited=e;this.rule&&(this.rule.isUserAgent||this.rule.isUser?this.editable=!1:this.rule.id&&(this.navigable=this.rule.isSourceNavigable()),this.titleElement.addStyleClass("styles-selector"));this._usedProperties=b.usedProperties;this._selectorRefElement=document.createElement("div");this._selectorRefElement.className="subtitle";
this._selectorRefElement.appendChild(this._createRuleOriginNode());h.insertBefore(this._selectorRefElement,h.firstChild);this.titleElement.appendChild(h);this._selectorContainer=h;e&&this.element.addStyleClass("show-inherited");this.navigable&&this.element.addStyleClass("navigable");this.editable||this.element.addStyleClass("read-only")};
WebInspector.StylePropertiesSection.prototype={get pane(){return this._parentPane},collapse:function(a){},isPropertyInherited:function(a){return this.isInherited?!(a in WebInspector.CSSMetadata.InheritedProperties):!1},isPropertyOverloaded:function(a,b){if(!this._usedProperties||this.noAffect||this.isInherited&&!(a in WebInspector.CSSMetadata.InheritedProperties))return!1;var c=WebInspector.StylesSidebarPane.canonicalPropertyName(a)in this._usedProperties;if(c||!b)return!c;for(var c=this.styleRule.style.longhandProperties(a),
e=0;e<c.length;++e)if(WebInspector.StylesSidebarPane.canonicalPropertyName(c[e].name)in this._usedProperties)return!1;return!0},nextEditableSibling:function(){var a=this;do a=a.nextSibling;while(a&&!a.editable);if(!a)for(a=this.firstSibling;a&&!a.editable;)a=a.nextSibling;return a&&a.editable?a:null},previousEditableSibling:function(){var a=this;do a=a.previousSibling;while(a&&!a.editable);if(!a)for(a=this.lastSibling;a&&!a.editable;)a=a.previousSibling;return a&&a.editable?a:null},update:function(a){this.styleRule.selectorText&&
(this._selectorElement.textContent=this.styleRule.selectorText);this._markSelectorMatches();if(a)this.propertiesTreeOutline.removeChildren(),this.populated=!1;else for(a=this.propertiesTreeOutline.children[0];a;)a.overloaded=this.isPropertyOverloaded(a.name,a.isShorthand),a=a.traverseNextTreeElement(!1,null,!0);this.afterUpdate()},afterUpdate:function(){this._afterUpdate&&(this._afterUpdate(this),delete this._afterUpdate)},onpopulate:function(){var a=this.styleRule.style,b=a.allProperties;this.uniqueProperties=
[];if(this.editable&&a.range)for(var c=0;c<b.length;++c){var e=b[c];this.uniqueProperties.push(e);if(!e.styleBased){var d=!!WebInspector.CSSMetadata.cssPropertiesMetainfo.longhands(e.name),f=this.isPropertyInherited(e.name),g=e.inactive||this.isPropertyOverloaded(e.name),g=new WebInspector.StylePropertyTreeElement(this._parentPane,this.styleRule,a,e,d,f,g);this.propertiesTreeOutline.appendChild(g)}}else for(var h={},c=0;c<b.length;++c){e=b[c];this.uniqueProperties.push(e);for(var f=(d=!!WebInspector.CSSMetadata.cssPropertiesMetainfo.longhands(e.name))?
null:WebInspector.CSSMetadata.cssPropertiesMetainfo.shorthands(e.name),g=!1,k=0;f&&!g&&k<f.length;++k){var l=f[k];if(l in h)g=!0;else if(a.getLiveProperty(l))g=!0;else if(a.shorthandValue(l)){var m=new WebInspector.CSSProperty(a,a.allProperties.length,l,a.shorthandValue(l),"","style",!0,!0,void 0),g=e.inactive||this.isPropertyOverloaded(e.name,!0),g=new WebInspector.StylePropertyTreeElement(this._parentPane,this.styleRule,a,m,!0,!1,g);this.propertiesTreeOutline.appendChild(g);h[l]=m;g=!0}else g=!1}g||
(f=this.isPropertyInherited(e.name),g=e.inactive||this.isPropertyOverloaded(e.name,d),g=new WebInspector.StylePropertyTreeElement(this._parentPane,this.styleRule,a,e,d,f,g),this.propertiesTreeOutline.appendChild(g))}},findTreeElementWithName:function(a){for(var b=this.propertiesTreeOutline.children[0];b;){if(b.name===a)return b;b=b.traverseNextTreeElement(!0,null,!0)}return null},_markSelectorMatches:function(){var a=this.styleRule.rule;if(a){var b=a.matchingSelectors;if(this.noAffect||b)this._selectorElement.className=
"selector";if(b){for(var a=a.selectors,c=document.createDocumentFragment(),e=0,d=0,f=a.length-1;d<=f;++d){var g,h=document.createTextNode(a[d]);b[e]===d?(++e,g=document.createElement("span"),g.className="selector-matches",g.appendChild(h)):g=h;c.appendChild(g);d!==f&&c.appendChild(document.createTextNode(", "))}this._selectorElement.removeChildren();this._selectorElement.appendChild(c)}}},_checkWillCancelEditing:function(){var a=this._willCauseCancelEditing;delete this._willCauseCancelEditing;return a},
_handleSelectorContainerClick:function(a){!this._checkWillCancelEditing()&&this.editable&&a.target===this._selectorContainer&&this.addNewBlankProperty(0).startEditing()},addNewBlankProperty:function(a){var b=this.styleRule.style;a=b.newBlankProperty(a);b=new WebInspector.StylePropertyTreeElement(this._parentPane,this.styleRule,b,a,!1,!1,!1);a=a.index;this.propertiesTreeOutline.insertChild(b,a);b.listItemElement.textContent="";b._newProperty=!0;b.updateTitle();return b},_createRuleOriginNode:function(){function a(a,
b){var d=WebInspector.linkifyResourceAsNode(a,b,"",a+":"+(b+1));d.preferredPanel="scripts";d.classList.add("webkit-html-resource-link");d.setAttribute("data-uncopyable",d.textContent);d.textContent="";return d}if(this.styleRule.sourceURL)return this._parentPane._linkifier.linkifyCSSRuleLocation(this.rule)||a(this.styleRule.sourceURL,this.rule.sourceLine);if(!this.rule)return document.createTextNode("");if(this.rule.isUserAgent)return document.createTextNode(WebInspector.UIString("user agent stylesheet"));
if(this.rule.isUser)return document.createTextNode(WebInspector.UIString("user stylesheet"));if(this.rule.isViaInspector){var b=document.createElement("span");WebInspector.cssModel.getViaInspectorResourceForRule(this.rule,function(c){c?b.appendChild(a(c.url,this.rule.sourceLine)):b.textContent=WebInspector.UIString("via inspector")}.bind(this));return b}},_handleEmptySpaceMouseDown:function(a){this._willCauseCancelEditing=this._parentPane._isEditingStyle},_handleEmptySpaceClick:function(a){this.editable&&
window.getSelection().isCollapsed&&!this._checkWillCancelEditing()&&(a.target.hasStyleClass("header")||this.element.hasStyleClass("read-only")||a.target.enclosingNodeOrSelfWithClass("media")?a.consume():(this.expand(),this.addNewBlankProperty().startEditing()))},_handleSelectorClick:function(a){this._startEditingOnMouseEvent();a.consume(!0)},_startEditingOnMouseEvent:function(){this.editable&&(this.rule||0!==this.propertiesTreeOutline.children.length?this.rule&&this.startEditingSelector():(this.expand(),
this.addNewBlankProperty().startEditing()))},startEditingSelector:function(){var a=this._selectorElement;if(!WebInspector.isBeingEdited(a)){a.scrollIntoViewIfNeeded(!1);a.textContent=a.textContent;var b=new WebInspector.EditingConfig(this.editingSelectorCommitted.bind(this),this.editingSelectorCancelled.bind(this));WebInspector.startEditing(this._selectorElement,b);window.getSelection().setBaseAndExtent(a,0,a,1)}},_moveEditorFromSelector:function(a){this._markSelectorMatches();if(a)if("forward"===
a){this.expand();for(a=this.propertiesTreeOutline.children[0];a&&a.inherited;)a=a.nextSibling;a?a.startEditing(a.nameElement):this.addNewBlankProperty().startEditing()}else if(a=this.previousEditableSibling())a.expand(),a.addNewBlankProperty().startEditing()},editingSelectorCommitted:function(a,b,c,e,d){function f(a){delete this._parentPane._userOperation;this._moveEditorFromSelector(a)}b&&(b=b.trim());if(b===c)return this._selectorElement.textContent=b,this._moveEditorFromSelector(d);var g=this._parentPane.node;
this._parentPane._userOperation=!0;WebInspector.cssModel.setRuleSelector(this.rule.id,g?g.id:0,b,function(a,b){b?(delete this.noAffect,this.element.removeStyleClass("no-affect")):(this.noAffect=!0,this.element.addStyleClass("no-affect"));this.rule=a;this.styleRule={section:this,style:a.style,selectorText:a.selectorText,media:a.media,sourceURL:a.sourceURL,rule:a};this._parentPane.update(g);f.call(this,d)}.bind(this),f.bind(this,d))},editingSelectorCancelled:function(){this._markSelectorMatches()},
__proto__:WebInspector.PropertiesSection.prototype};
WebInspector.ComputedStylePropertiesSection=function(a,b,c){WebInspector.PropertiesSection.call(this,"");this.headerElement.addStyleClass("hidden");this.element.className="styles-section monospace first-styles-section read-only computed-style";this._stylesPane=a;this.styleRule=b;this._usedProperties=c;this._alwaysShowComputedProperties={display:!0,height:!0,width:!0};this.computedStyle=!0;this._propertyTreeElements={};this._expandedPropertyNames={}};
WebInspector.ComputedStylePropertiesSection.prototype={collapse:function(a){},_isPropertyInherited:function(a){a=WebInspector.StylesSidebarPane.canonicalPropertyName(a);return!(a in this._usedProperties)&&!(a in this._alwaysShowComputedProperties)},update:function(){this._expandedPropertyNames={};for(var a in this._propertyTreeElements)this._propertyTreeElements[a].expanded&&(this._expandedPropertyNames[a]=!0);this._propertyTreeElements={};this.propertiesTreeOutline.removeChildren();this.populated=
!1},onpopulate:function(){function a(a,b){return a.name.compareTo(b.name)}var b=this.styleRule.style;if(b){for(var c=[],e=b.allProperties,d=0;d<e.length;++d)c.push(e[d]);c.sort(a);this._propertyTreeElements={};for(d=0;d<c.length;++d){var e=c[d],f=this._isPropertyInherited(e.name),f=new WebInspector.ComputedStylePropertyTreeElement(this._stylesPane,this.styleRule,b,e,f);this.propertiesTreeOutline.appendChild(f);this._propertyTreeElements[e.name]=f}}},rebuildComputedTrace:function(a){for(var b=0;b<
a.length;++b){var c=a[b];if(!c.computedStyle&&!c.isBlank)for(var e=0;e<c.uniqueProperties.length;++e){var d=c.uniqueProperties[e];if(!d.disabled&&(!c.isInherited||d.name in WebInspector.CSSMetadata.InheritedProperties)){var f=this._propertyTreeElements[d.name];if(f){var g=document.createDocumentFragment(),h=g.createChild("span");h.style.color="gray";h.textContent=c.styleRule.selectorText;g.appendChild(document.createTextNode(" - "+d.value+" "));h=g.createChild("span");h.style.float="right";h.appendChild(c._createRuleOriginNode());
g=new TreeElement(g,null,!1);f.appendChild(g);(d.inactive||c.isPropertyOverloaded(d.name))&&g.listItemElement.addStyleClass("overloaded");d.parsedOk||(g.listItemElement.addStyleClass("not-parsed-ok"),g.listItemElement.insertBefore(WebInspector.StylesSidebarPane.createExclamationMark(d.name),g.listItemElement.firstChild))}}}}for(var k in this._expandedPropertyNames)k in this._propertyTreeElements&&this._propertyTreeElements[k].expand()},__proto__:WebInspector.PropertiesSection.prototype};
WebInspector.BlankStylePropertiesSection=function(a,b){WebInspector.StylePropertiesSection.call(this,a,{selectorText:b,rule:{isViaInspector:!0}},!0,!1,!1);this.element.addStyleClass("blank-section")};
WebInspector.BlankStylePropertiesSection.prototype={get isBlank(){return!this._normal},expand:function(){this.isBlank||WebInspector.StylePropertiesSection.prototype.expand.call(this)},editingSelectorCommitted:function(a,b,c,e,d){function f(a,b){this.makeNormal({section:this,style:a.style,selectorText:a.selectorText,sourceURL:a.sourceURL,rule:a});b||(this.noAffect=!0,this.element.addStyleClass("no-affect"));this._selectorRefElement.removeChildren();this._selectorRefElement.appendChild(this._createRuleOriginNode());
this.expand();this.element.parentElement&&this._moveEditorFromSelector(d);this._markSelectorMatches();delete this._parentPane._userOperation}this.isBlank?(b&&(b=b.trim()),this._parentPane._userOperation=!0,WebInspector.cssModel.addRule(this.pane.node.id,b,f.bind(this),this.editingSelectorCancelled.bind(this))):WebInspector.StylePropertiesSection.prototype.editingSelectorCommitted.call(this,a,b,c,e,d)},editingSelectorCancelled:function(){delete this._parentPane._userOperation;this.isBlank?this.pane.removeSection(this):
WebInspector.StylePropertiesSection.prototype.editingSelectorCancelled.call(this)},makeNormal:function(a){this.element.removeStyleClass("blank-section");this.styleRule=a;this.rule=a.rule;this._normal=!0},__proto__:WebInspector.StylePropertiesSection.prototype};WebInspector.StylePropertyTreeElementBase=function(a,b,c,e,d,f){this._styleRule=a;this.style=b;this.property=c;this._inherited=e;this._overloaded=d;TreeElement.call(this,"",null,f);this.selectable=!1};
WebInspector.StylePropertyTreeElementBase.prototype={node:function(){return null},editablePane:function(){return null},get inherited(){return this._inherited},set inherited(a){a!==this._inherited&&(this._inherited=a,this.updateState())},get overloaded(){return this._overloaded},set overloaded(a){a!==this._overloaded&&(this._overloaded=a,this.updateState())},get disabled(){return this.property.disabled},get name(){if(!this.disabled||!this.property.text)return this.property.name;var a=this.property.text,
b=a.indexOf(":");return 1>b?this.property.name:a.substring(0,b).trim()},get priority(){return this.disabled?"":this.property.priority},get value(){if(!this.disabled||!this.property.text)return this.property.value;var a=this.property.text.match(/(.*);\s*/);if(!a||!a[1])return this.property.value;var a=a[1],b=a.indexOf(":");return 1>b?this.property.value:a.substring(b+1).trim()},get parsedOk(){return this.property.parsedOk},onattach:function(){this.updateTitle()},updateTitle:function(){var a=this.value;
this.updateState();var b=document.createElement("span");b.className="webkit-css-property";b.textContent=this.name;b.title=this.property.propertyText;this.nameElement=b;this._expandElement=document.createElement("span");this._expandElement.className="expand-element";var c=document.createElement("span");c.className="value";this.valueElement=c;var e=WebInspector.Color.Format;if(a){var d=this,f=function(a,b,c,d){var e=document.createDocumentFragment();a=d.replace(a,"\x00$1\x00").split("\x00");for(d=0;d<
a.length;++d)if(0===d%2)c?e.appendChild(c(a[d])):e.appendChild(document.createTextNode(a[d]));else{var f=b(a[d]);f&&e.appendChild(f)}return e},g=f.bind(window,/((?:rgb|hsl)a?\([^)]+\)|#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3}|\b\w+\b(?!-))/g,function(a){function f(a){p=a.data;a=p.toString();r.displayText=a;w.textContent=a;t.setColorString(a);d.applyStyleText(b.textContent+": "+c.textContent,!1,!1,!1)}function g(a){u&&u.removeEventListener("scroll",m,!1);d.applyStyleText(!a.data&&d.originalPropertyText?d.originalPropertyText:
b.textContent+": "+c.textContent,!0,!0,!1);r.removeEventListener(WebInspector.Spectrum.Events.ColorChanged,f);s.removeEventListener(WebInspector.SpectrumPopupHelper.Events.Hidden,g);delete d.editablePane()._isEditingStyle;delete d.originalPropertyText}function m(){s.reposition(t.element)}function n(a){switch(a){case e.Original:return p.simple?e.RGB:e.RGBA;case e.RGB:case e.RGBA:return p.simple?e.HSL:e.HSLA;case e.HSL:case e.HSLA:return p.nickname?e.Nickname:p.simple?p.hasShortHex()?e.ShortHEX:e.HEX:
e.Original;case e.ShortHEX:return e.HEX;case e.HEX:return e.Original;case e.Nickname:return p.simple?p.hasShortHex()?e.ShortHEX:e.HEX:e.Original;default:return null}}var p=WebInspector.Color.parse(a);if(!p)return document.createTextNode(a);var q=function(){var a=WebInspector.settings.colorFormat.get();return a===e.Original?e.Original:a===e.RGB?p.simple?e.RGB:e.RGBA:a===e.HSL?p.simple?e.HSL:e.HSLA:p.simple?p.hasShortHex()?e.ShortHEX:e.HEX:e.RGBA}(),s=d.editablePane()&&d.editablePane()._spectrumHelper,
r=s?s.spectrum():null,t=new WebInspector.ColorSwatch;t.setColorString(a);t.element.addEventListener("click",function(a){if(!s||a.shiftKey){do{q=n(q);var b=p.toString(q||"")}while(q&&b===p.value&&q!==e.Original);q&&(w.textContent=b)}else s.toggle(t.element,p,q)&&(r.displayText=p.toString(q),d.originalPropertyText=d.property.propertyText,d.editablePane()._isEditingStyle=!0,r.addEventListener(WebInspector.Spectrum.Events.ColorChanged,f),s.addEventListener(WebInspector.SpectrumPopupHelper.Events.Hidden,
g),(u=t.element.enclosingNodeOrSelfWithClass("scroll-target"))?u.addEventListener("scroll",m,!1):console.error("Unable to handle color picker scrolling"));a.consume(!0)},!1);var u,w=document.createElement("span");w.textContent=p.toString(q);a=document.createElement("nobr");a.appendChild(t.element);a.appendChild(w);return a},null);c.appendChild(f(/url\(\s*([^)]+)\s*\)/g,function(a){var b=a,c=b.match(/['"]?([^'"]+)/);c&&(b=c[1]);c=document.createDocumentFragment();c.appendChild(document.createTextNode("url("));
d._styleRule.sourceURL?b=WebInspector.ParsedURL.completeURL(d._styleRule.sourceURL,b):d.node()&&(b=d.node().resolveURL(b));var e=!!WebInspector.resourceForURL(b);c.appendChild(WebInspector.linkifyURLAsNode(b,a,void 0,!e));c.appendChild(document.createTextNode(")"));return c}.bind(this),WebInspector.CSSMetadata.isColorAwareProperty(d.name)?g:null,a))}this.listItemElement.removeChildren();b.normalize();c.normalize();this.treeOutline&&(this.listItemElement.appendChild(b),this.listItemElement.appendChild(document.createTextNode(": ")),
this.listItemElement.appendChild(this._expandElement),this.listItemElement.appendChild(c),this.listItemElement.appendChild(document.createTextNode(";")),this.parsedOk||(this.hasChildren=!1,this.listItemElement.addStyleClass("not-parsed-ok"),this.listItemElement.insertBefore(WebInspector.StylesSidebarPane.createExclamationMark(this.property.name),this.listItemElement.firstChild)),this.property.inactive&&this.listItemElement.addStyleClass("inactive"))},updateState:function(){this.listItemElement&&(this.style.isPropertyImplicit(this.name)||
"initial"===this.value?this.listItemElement.addStyleClass("implicit"):this.listItemElement.removeStyleClass("implicit"),this.inherited?this.listItemElement.addStyleClass("inherited"):this.listItemElement.removeStyleClass("inherited"),this.overloaded?this.listItemElement.addStyleClass("overloaded"):this.listItemElement.removeStyleClass("overloaded"),this.disabled?this.listItemElement.addStyleClass("disabled"):this.listItemElement.removeStyleClass("disabled"))},__proto__:TreeElement.prototype};
WebInspector.ComputedStylePropertyTreeElement=function(a,b,c,e,d){WebInspector.StylePropertyTreeElementBase.call(this,b,c,e,d,!1,!1);this._stylesPane=a};WebInspector.ComputedStylePropertyTreeElement.prototype={node:function(){return this._stylesPane.node},editablePane:function(){return null},__proto__:WebInspector.StylePropertyTreeElementBase.prototype};
WebInspector.StylePropertyTreeElement=function(a,b,c,e,d,f,g){WebInspector.StylePropertyTreeElementBase.call(this,b,c,e,f,g,d);this._parentPane=a;this.isShorthand=d};
WebInspector.StylePropertyTreeElement.prototype={node:function(){return this._parentPane.node},editablePane:function(){return this._parentPane},section:function(){return this.treeOutline&&this.treeOutline.section},_updatePane:function(a){var b=this.section();b&&b.pane?b.pane._refreshUpdate(b,!1,a):a&&a()},toggleEnabled:function(a){var b=!a.target.checked;this._parentPane._userOperation=!0;this.property.setDisabled(b,function(a){a&&(a.parentRule=this.style.parentRule,this.style=a,this._styleRule.style=
a,(a=this.section())&&a.pane&&a.pane.dispatchEventToListeners("style property toggled"),this._updatePane(),delete this._parentPane._userOperation)}.bind(this));a.consume()},onpopulate:function(){if(!this.children.length&&this.isShorthand)for(var a=this.style.longhandProperties(this.name),b=0;b<a.length;++b){var c=a[b].name,e=this.section();if(e)var d=e.isPropertyInherited(c),f=e.isPropertyOverloaded(c);if(c=this.style.getLiveProperty(c))c=new WebInspector.StylePropertyTreeElement(this._parentPane,
this._styleRule,this.style,c,!1,d,f),this.appendChild(c)}},restoreNameElement:function(){this.nameElement!==this.listItemElement.querySelector(".webkit-css-property")&&(this.nameElement=document.createElement("span"),this.nameElement.className="webkit-css-property",this.nameElement.textContent="",this.listItemElement.insertBefore(this.nameElement,this.listItemElement.firstChild))},onattach:function(){WebInspector.StylePropertyTreeElementBase.prototype.onattach.call(this);this.listItemElement.addEventListener("mousedown",
this._mouseDown.bind(this));this.listItemElement.addEventListener("mouseup",this._resetMouseDownElement.bind(this));this.listItemElement.addEventListener("click",this._mouseClick.bind(this))},_mouseDown:function(a){this._parentPane&&(this._parentPane._mouseDownTreeElement=this,this._parentPane._mouseDownTreeElementIsName=this._isNameElement(a.target),this._parentPane._mouseDownTreeElementIsValue=this._isValueElement(a.target))},_resetMouseDownElement:function(){this._parentPane&&(delete this._parentPane._mouseDownTreeElement,
delete this._parentPane._mouseDownTreeElementIsName,delete this._parentPane._mouseDownTreeElementIsValue)},updateTitle:function(){WebInspector.StylePropertyTreeElementBase.prototype.updateTitle.call(this);if(this.parsedOk&&this.section()&&this.parent.root){var a=document.createElement("input");a.className="enabled-button";a.type="checkbox";a.checked=!this.disabled;a.addEventListener("click",this.toggleEnabled.bind(this),!1);this.listItemElement.insertBefore(a,this.listItemElement.firstChild)}},_mouseClick:function(a){window.getSelection().isCollapsed&&
(a.consume(!0),a.target===this.listItemElement?(a=this.section())&&a.editable&&(a._checkWillCancelEditing()||a.addNewBlankProperty(this.property.index+1).startEditing()):WebInspector.KeyboardShortcut.eventHasCtrlOrMeta(a)&&this.section().navigable?this._navigateToSource(a.target):this.startEditing(a.target))},_navigateToSource:function(a){console.assert(this.section().navigable);(a=this.property.uiLocation(a===this.nameElement))&&WebInspector.showPanel("scripts").showUISourceCode(a.uiSourceCode,a.lineNumber)},
_isNameElement:function(a){return a.enclosingNodeOrSelfWithClass("webkit-css-property")===this.nameElement},_isValueElement:function(a){return!!a.enclosingNodeOrSelfWithClass("value")},startEditing:function(a){function b(a,b){var c=b.clipboardData.getData("Text");if(c){var d=c.indexOf(":");if(!(0>d)){var e=c.substring(0,d).trim(),c=c.substring(d+1).trim();b.preventDefault();"originalName"in a||(a.originalName=this.nameElement.textContent,a.originalValue=this.valueElement.textContent);this.property.name=
e;this.property.value=c;this.nameElement.textContent=e;this.valueElement.textContent=c;this.nameElement.normalize();this.valueElement.normalize();this.editingCommitted(null,b.target.textContent,a.previousContent,a,"forward")}}}function c(a,b){var c="";this._parentPane._mouseDownTreeElement===this&&(d&&this._parentPane._mouseDownTreeElementIsValue&&(c="forward"),!d&&this._parentPane._mouseDownTreeElementIsName&&(c="backward"));this.editingCommitted(null,b.target.textContent,a.previousContent,a,c)}
if(!this.parent.isShorthand&&a!==this._expandElement){var e=this.section();if(!e||e.editable){a=a?a.enclosingNodeOrSelfWithClass("webkit-css-property")||a.enclosingNodeOrSelfWithClass("value"):this.nameElement;var d=a===this.nameElement;d||(a!==this.valueElement&&(a=this.valueElement),this.valueElement.textContent=this.value);if(!WebInspector.isBeingEdited(a)){e={expanded:this.expanded,hasChildren:this.hasChildren,isEditingName:d,previousContent:a.textContent};this.hasChildren=!1;a.parentElement&&
a.parentElement.addStyleClass("child-editing");a.textContent=a.textContent;delete this.originalPropertyText;this._parentPane._isEditingStyle=!0;a.parentElement&&a.parentElement.scrollIntoViewIfNeeded(!1);var f=d?void 0:this._applyFreeFlowStyleTextEdit.bind(this,!0);this._prompt=new WebInspector.StylesSidebarPane.CSSPropertyPrompt(d?WebInspector.CSSMetadata.cssPropertiesMetainfo:WebInspector.CSSMetadata.keywordsForProperty(this.nameElement.textContent),this,d);f&&(this._prompt.addEventListener(WebInspector.TextPrompt.Events.ItemApplied,
f,this),this._prompt.addEventListener(WebInspector.TextPrompt.Events.ItemAccepted,f,this));f=this._prompt.attachAndStartEditing(a,c.bind(this,e));f.addEventListener("keydown",this.editingNameValueKeyDown.bind(this,e),!1);d&&f.addEventListener("paste",b.bind(this,e));window.getSelection().setBaseAndExtent(a,0,a,1)}}}},editingNameValueKeyDown:function(a,b){if(!b.handled){var c=a.isEditingName,e,d;if(d=b.keyCode===WebInspector.KeyboardShortcut.Keys.Semicolon.code)if(c)d=b.shiftKey;else if(d=!b.shiftKey){d=
b.target.selectionLeftOffset();for(var f="",g=0;g<d;++g){var h=b.target.textContent[g];"\\"===h&&""!==f?++g:f||'"'!==h&&"'"!==h?f===h&&(f=""):f=h}d=!f}isEnterKey(b)||d?(b.preventDefault(),e="forward"):b.keyCode===WebInspector.KeyboardShortcut.Keys.Esc.code||"U+001B"===b.keyIdentifier?e="cancel":!c&&this._newProperty&&b.keyCode===WebInspector.KeyboardShortcut.Keys.Backspace.code?(d=window.getSelection(),d.isCollapsed&&!d.focusOffset&&(b.preventDefault(),e="backward")):"U+0009"===b.keyIdentifier&&(e=
b.shiftKey?"backward":"forward",b.preventDefault());if(e){switch(e){case "cancel":this.editingCancelled(null,a);break;case "forward":case "backward":this.editingCommitted(null,b.target.textContent,a.previousContent,a,e)}b.consume()}else c||this._applyFreeFlowStyleTextEdit(!1)}},_applyFreeFlowStyleTextEdit:function(a){function b(){var a=this.valueElement.textContent;-1===a.indexOf(";")&&this.applyStyleText(this.nameElement.textContent+": "+a,!1,!1,!1)}this._applyFreeFlowStyleTextEditTimer&&clearTimeout(this._applyFreeFlowStyleTextEditTimer);
a?b.call(this):this._applyFreeFlowStyleTextEditTimer=setTimeout(b.bind(this),100)},kickFreeFlowStyleEditForTest:function(){this._applyFreeFlowStyleTextEdit(!0)},editingEnded:function(a){this._resetMouseDownElement();this._applyFreeFlowStyleTextEditTimer&&clearTimeout(this._applyFreeFlowStyleTextEditTimer);this.hasChildren=a.hasChildren;a.expanded&&this.expand();a=a.isEditingName?this.nameElement:this.valueElement;a.parentElement&&a.parentElement.removeStyleClass("child-editing");delete this._parentPane._isEditingStyle},
editingCancelled:function(a,b){this._removePrompt();this._revertStyleUponEditingCanceled(this.originalPropertyText);this.editingEnded(b)},_revertStyleUponEditingCanceled:function(a){"string"===typeof a?(delete this.originalPropertyText,this.applyStyleText(a,!0,!1,!0)):this._newProperty?this.treeOutline.removeChild(this):this.updateTitle()},_findSibling:function(a){var b=this;do b="forward"===a?b.nextSibling:b.previousSibling;while(b&&b.inherited);return b},editingCommitted:function(a,b,c,e,d){function f(a,
b,c){if(d)if(n&&n.parent)n.startEditing(g?n.valueElement:n.nameElement);else{if(n&&!n.parent){var e=c.propertiesTreeOutline.children;"forward"===d&&s&&!g&&--q;if(q>=e.length&&!this._newProperty)h=!0;else{if(e=0<=q?e[q]:null){b=!g||m?e.nameElement:e.valueElement;a&&s&&(b="forward"===d?e.nameElement:e.valueElement);e.startEditing(b);return}a||(k=!0)}}h?a&&!b&&g^"backward"===d||c.addNewBlankProperty().startEditing():p?(a=(n=this._findSibling(d))||"backward"===d?c:c.nextEditableSibling())&&(a.rule?a.startEditingSelector():
a._moveEditorFromSelector(d)):k&&(c.rule?c.startEditingSelector():c._moveEditorFromSelector(d))}}this._removePrompt();this.editingEnded(e);var g=e.isEditingName,h,k,l=(a="originalName"in e)&&(this.nameElement.textContent!==e.originalName||this.valueElement.textContent!==e.originalValue),m=a&&g&&this.valueElement.textContent!==e.originalValue,n=this;e=g^"forward"===d;var p=this._newProperty&&!b&&(e||g);if("forward"===d&&(!g||m)||"backward"===d&&g)(n=n._findSibling(d))||("forward"!==d||this._newProperty&&
!b?"backward"===d&&(k=!0):h=!0);var q=n&&this.treeOutline?this.treeOutline.children.indexOf(n):-1,s=/^\s*$/.test(b);e=this._newProperty&&(m||e||!d&&!g||g&&s);var r=this.section();(b!==c||l)&&!this._newProperty||e?(r._afterUpdate=f.bind(this,this._newProperty,!s,r),b=s||this._newProperty&&/^\s*$/.test(this.valueElement.textContent)?"":g?b+": "+this.valueElement.textContent:this.nameElement.textContent+": "+b,this.applyStyleText(b,!0,!0,!1)):(a||this._newProperty||this.updateTitle(),f.call(this,this._newProperty,
!1,r))},_removePrompt:function(){this._prompt&&(this._prompt.detach(),delete this._prompt)},_hasBeenModifiedIncrementally:function(){return"string"===typeof this.originalPropertyText||!!this.property.propertyText&&this._newProperty},applyStyleText:function(a,b,c,e){function d(a,b){b&&delete a._userOperation}function f(a,c,d){d?(this._newProperty&&(this._newPropertyInStyle=!0),d.parentRule=this.style.parentRule,this.style=d,this.property=d.propertyAt(this.property.index),this._styleRule.style=this.style,
g&&g.pane&&g.pane.dispatchEventToListeners("style edited"),b&&h===this.node()?this._updatePane(a):a()):(b&&this._revertStyleUponEditingCanceled(c),a())}e||b||this._hasBeenModifiedIncrementally()||(this.originalPropertyText=this.property.propertyText);if(this.treeOutline){var g=this.section();a=a.replace(/\s/g," ").trim();if(a.length||!b||e||!this._newProperty||this._hasBeenModifiedIncrementally()){var h=this._parentPane.node;b&&(this._parentPane._userOperation=!0);a.length&&!/;\s*$/.test(a)&&(a+=
";");this.property.setText(a,c,!(this._newProperty&&!this._newPropertyInStyle),f.bind(this,d.bind(null,this._parentPane,b),this.originalPropertyText))}else this.parent.removeChild(this),g.afterUpdate()}},ondblclick:function(){return!0},isEventWithinDisclosureTriangle:function(a){return a.target===this._expandElement},__proto__:WebInspector.StylePropertyTreeElementBase.prototype};
WebInspector.StylesSidebarPane.CSSPropertyPrompt=function(a,b,c){WebInspector.TextPrompt.call(this,this._buildPropertyCompletions.bind(this),WebInspector.StyleValueDelimiters);this.setSuggestBoxEnabled("generic-suggest");this._cssCompletions=a;this._sidebarPane=b;this._isEditingName=c};
WebInspector.StylesSidebarPane.CSSPropertyPrompt.prototype={onKeyDown:function(a){switch(a.keyIdentifier){case "Up":case "Down":case "PageUp":case "PageDown":if(this._handleNameOrValueUpDown(a)){a.preventDefault();return}}WebInspector.TextPrompt.prototype.onKeyDown.call(this,a)},onMouseWheel:function(a){this._handleNameOrValueUpDown(a)?a.consume(!0):WebInspector.TextPrompt.prototype.onMouseWheel.call(this,a)},tabKeyPressed:function(){this.acceptAutoComplete();return!1},_handleNameOrValueUpDown:function(a){function b(a,
b){this._sidebarPane.applyStyleText(this._sidebarPane.nameElement.textContent+": "+this._sidebarPane.valueElement.textContent,!1,!1,!1)}return!this._isEditingName&&WebInspector.handleElementValueModifications(a,this._sidebarPane.valueElement,b.bind(this),this._isValueSuggestion.bind(this))?!0:!1},_isValueSuggestion:function(a){if(!a)return!1;a=a.toLowerCase();return this._cssCompletions.keySet().hasOwnProperty(a)},_buildPropertyCompletions:function(a,b,c,e){if((a=b.toString().toLowerCase())||c)c=
this._cssCompletions.startsWith(a),a=this._cssCompletions.mostUsedOf(c),e(c,a)},__proto__:WebInspector.TextPrompt.prototype};
WebInspector.ElementsPanel=function(){WebInspector.Panel.call(this,"elements");this.registerRequiredCSS("breadcrumbList.css");this.registerRequiredCSS("elementsPanel.css");this.registerRequiredCSS("textPrompt.css");this.setHideOnDetach();this.createSidebarView(this.element,WebInspector.SidebarView.SidebarPosition.End,325,325);this.splitView.setMinimumSidebarWidth(Preferences.minElementsSidebarWidth);this.splitView.setMinimumMainWidthPercent(34);this.splitView.setMinimumSidebarHeight(Preferences.minElementsSidebarHeight);
this.splitView.setMinimumMainHeightPercent(34);this.contentElement=this.splitView.mainElement;this.contentElement.id="elements-content";this.contentElement.addStyleClass("outline-disclosure");this.contentElement.addStyleClass("source-code");WebInspector.settings.domWordWrap.get()||this.contentElement.classList.add("nowrap");WebInspector.settings.domWordWrap.addChangeListener(this._domWordWrapSettingChanged.bind(this));this.contentElement.addEventListener("contextmenu",this._contextMenuEventFired.bind(this),
!0);this.splitView.sidebarElement.addEventListener("contextmenu",this._sidebarContextMenuEventFired.bind(this),!1);this.treeOutline=new WebInspector.ElementsTreeOutline(!0,!0,!1,this._populateContextMenu.bind(this),this._setPseudoClassForNodeId.bind(this));this.treeOutline.wireToDomAgent();this.treeOutline.addEventListener(WebInspector.ElementsTreeOutline.Events.SelectedNodeChanged,this._selectedNodeChanged,this);this.crumbsElement=document.createElement("div");this.crumbsElement.className="crumbs";
this.crumbsElement.addEventListener("mousemove",this._mouseMovedInCrumbs.bind(this),!1);this.crumbsElement.addEventListener("mouseout",this._mouseMovedOutOfCrumbs.bind(this),!1);this.sidebarPanes={};this.sidebarPanes.computedStyle=new WebInspector.ComputedStyleSidebarPane;this.sidebarPanes.styles=new WebInspector.StylesSidebarPane(this.sidebarPanes.computedStyle,this._setPseudoClassForNodeId.bind(this));this.sidebarPanes.metrics=new WebInspector.MetricsSidebarPane;this.sidebarPanes.properties=new WebInspector.PropertiesSidebarPane;
this.sidebarPanes.domBreakpoints=WebInspector.domBreakpointsSidebarPane.createProxy(this);this.sidebarPanes.eventListeners=new WebInspector.EventListenersSidebarPane;this.sidebarPanes.styles.addEventListener(WebInspector.SidebarPane.EventTypes.wasShown,this.updateStyles.bind(this,!1));this.sidebarPanes.metrics.addEventListener(WebInspector.SidebarPane.EventTypes.wasShown,this.updateMetrics.bind(this));this.sidebarPanes.properties.addEventListener(WebInspector.SidebarPane.EventTypes.wasShown,this.updateProperties.bind(this));
this.sidebarPanes.eventListeners.addEventListener(WebInspector.SidebarPane.EventTypes.wasShown,this.updateEventListeners.bind(this));this.sidebarPanes.styles.addEventListener("style edited",this._stylesPaneEdited,this);this.sidebarPanes.styles.addEventListener("style property toggled",this._stylesPaneEdited,this);this.sidebarPanes.metrics.addEventListener("metrics edited",this._metricsPaneEdited,this);WebInspector.dockController.addEventListener(WebInspector.DockController.Events.DockSideChanged,
this._dockSideChanged.bind(this));WebInspector.settings.splitVerticallyWhenDockedToRight.addChangeListener(this._dockSideChanged.bind(this));this._dockSideChanged();this._popoverHelper=new WebInspector.PopoverHelper(this.element,this._getPopoverAnchor.bind(this),this._showPopover.bind(this));this._popoverHelper.setTimeout(0);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.AttrModified,this._updateBreadcrumbIfNeeded,this);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.AttrRemoved,
this._updateBreadcrumbIfNeeded,this);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.NodeRemoved,this._nodeRemoved,this);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.DocumentUpdated,this._documentUpdatedEvent,this);WebInspector.domAgent.addEventListener(WebInspector.DOMAgent.Events.InspectElementRequested,this._inspectElementRequested,this);WebInspector.domAgent.existingDocument()&&this._documentUpdated(WebInspector.domAgent.existingDocument())};
WebInspector.ElementsPanel.prototype={statusBarItems:function(){return[this.crumbsElement]},defaultFocusedElement:function(){return this.treeOutline.element},statusBarResized:function(){this.updateBreadcrumbSizes()},wasShown:function(){this.treeOutline.element.parentElement!==this.contentElement&&this.contentElement.appendChild(this.treeOutline.element);WebInspector.Panel.prototype.wasShown.call(this);this.updateBreadcrumb();this.treeOutline.updateSelection();this.treeOutline.setVisible(!0);this.treeOutline.rootDOMNode||
WebInspector.domAgent.requestDocument()},willHide:function(){WebInspector.domAgent.hideDOMNodeHighlight();this.treeOutline.setVisible(!1);this._popoverHelper.hidePopover();this.contentElement.removeChild(this.treeOutline.element);WebInspector.Panel.prototype.willHide.call(this)},onResize:function(){this.treeOutline.updateSelection();this.updateBreadcrumbSizes()},_setPseudoClassForNodeId:function(a,b,c){if(a=WebInspector.domAgent.nodeForId(a)){var e=a.getUserProperty(WebInspector.ElementsTreeOutline.PseudoStateDecorator.PropertyName);
if(c){e=e||[];if(0<=e.indexOf(b))return;e.push(b);a.setUserProperty(WebInspector.ElementsTreeOutline.PseudoStateDecorator.PropertyName,e)}else{if(!e||0>e.indexOf(b))return;e.remove(b);e.length||a.removeUserProperty(WebInspector.ElementsTreeOutline.PseudoStateDecorator.PropertyName)}this.treeOutline.updateOpenCloseTags(a);WebInspector.cssModel.forcePseudoState(a.id,a.getUserProperty(WebInspector.ElementsTreeOutline.PseudoStateDecorator.PropertyName));this._metricsPaneEdited();this._stylesPaneEdited();
WebInspector.notifications.dispatchEventToListeners(WebInspector.UserMetrics.UserAction,{action:WebInspector.UserMetrics.UserActionNames.ForcedElementState,selector:a.appropriateSelectorFor(!1),enabled:c,state:b})}},_selectedNodeChanged:function(){var a=this.selectedDOMNode();!a&&this._lastValidSelectedNode&&(this._selectedPathOnReset=this._lastValidSelectedNode.path());this.updateBreadcrumb(!1);this._updateSidebars();a&&(ConsoleAgent.addInspectedNode(a.id),this._lastValidSelectedNode=a);WebInspector.notifications.dispatchEventToListeners(WebInspector.ElementsTreeOutline.Events.SelectedNodeChanged)},
_updateSidebars:function(){for(var a in this.sidebarPanes)this.sidebarPanes[a].needsUpdate=!0;this.updateStyles(!0);this.updateMetrics();this.updateProperties();this.updateEventListeners()},_reset:function(){delete this.currentQuery},_documentUpdatedEvent:function(a){this._documentUpdated(a.data)},_documentUpdated:function(a){function b(b){b||(b=a.body||a.documentElement);b&&(this.selectDOMNode(b),this.treeOutline.selectedTreeElement&&this.treeOutline.selectedTreeElement.expand())}function c(a){this.selectedDOMNode()||
(a=a?WebInspector.domAgent.nodeForId(a):null,b.call(this,a))}this._reset();this.searchCanceled();(this.treeOutline.rootDOMNode=a)?(WebInspector.domBreakpointsSidebarPane.restoreBreakpoints(),this._selectedPathOnReset?WebInspector.domAgent.pushNodeByPathToFrontend(this._selectedPathOnReset,c.bind(this)):b.call(this),delete this._selectedPathOnReset):this.isShowing()&&WebInspector.domAgent.requestDocument()},searchCanceled:function(){delete this._searchQuery;this._hideSearchHighlights();WebInspector.searchController.updateSearchMatchesCount(0,
this);delete this._currentSearchResultIndex;delete this._searchResults;WebInspector.domAgent.cancelSearch()},performSearch:function(a){function b(a){WebInspector.searchController.updateSearchMatchesCount(a,this);a&&(this._searchResults=Array(a),this._currentSearchResultIndex=-1,this.jumpToNextSearchResult())}this.searchCanceled();var c=a.trim();c.length&&(this._searchQuery=a,WebInspector.domAgent.performSearch(c,b.bind(this)))},_contextMenuEventFired:function(a){var b=new WebInspector.ContextMenu(a);
this.treeOutline.populateContextMenu(b,a);WebInspector.experimentsSettings.cssRegions.isEnabled()&&(b.appendSeparator(),b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"CSS named flows\u2026":"CSS Named Flows\u2026"),this._showNamedFlowCollections.bind(this)));b.appendSeparator();b.appendCheckboxItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?"Word wrap":"Word Wrap"),function(){WebInspector.settings.domWordWrap.set(!WebInspector.settings.domWordWrap.get())}.bind(this),
WebInspector.settings.domWordWrap.get());b.show()},_showNamedFlowCollections:function(){WebInspector.cssNamedFlowCollectionsView||(WebInspector.cssNamedFlowCollectionsView=new WebInspector.CSSNamedFlowCollectionsView);WebInspector.cssNamedFlowCollectionsView.showInDrawer()},_domWordWrapSettingChanged:function(a){a.data?this.contentElement.removeStyleClass("nowrap"):this.contentElement.addStyleClass("nowrap");(a=this.selectedDOMNode())&&(a=this.treeOutline.findTreeElement(a))&&a.updateSelection()},
switchToAndFocus:function(a){WebInspector.searchController.cancelSearch();WebInspector.inspectorView.setCurrentPanel(this);this.selectDOMNode(a,!0)},_populateContextMenu:function(a,b){a.appendSeparator();WebInspector.domBreakpointsSidebarPane.populateNodeContextMenu(b,a)},_getPopoverAnchor:function(a){if(a=a.enclosingNodeOrSelfWithClass("webkit-html-resource-link")){if(!a.href)return null;var b=WebInspector.resourceTreeModel.resourceForURL(a.href);if(!b||b.type!==WebInspector.resourceTypes.Image)return null;
a.removeAttribute("title")}return a},_loadDimensionsForNode:function(a,b){function c(a){function c(){return{offsetWidth:this.offsetWidth,offsetHeight:this.offsetHeight,naturalWidth:this.naturalWidth,naturalHeight:this.naturalHeight}}a?(a.callFunctionJSON(c,void 0,b),a.release()):b()}if(a.treeOutline!==this.treeOutline)b();else{var e=a.representedObject;e.nodeName()&&"img"===e.nodeName().toLowerCase()?WebInspector.RemoteObject.resolveNode(e,"",c):b()}},_showPopover:function(a,b){function c(c){c&&(b.setCanShrink(!1),
b.show(c,a))}var e=a.enclosingNodeOrSelfWithNodeName("li");e&&e.treeElement?this._loadDimensionsForNode(e.treeElement,WebInspector.DOMPresentationUtils.buildImagePreviewContents.bind(WebInspector.DOMPresentationUtils,a.href,!0,c)):WebInspector.DOMPresentationUtils.buildImagePreviewContents(a.href,!0,c)},jumpToNextSearchResult:function(){this._searchResults&&(this._hideSearchHighlights(),++this._currentSearchResultIndex>=this._searchResults.length&&(this._currentSearchResultIndex=0),this._highlightCurrentSearchResult())},
jumpToPreviousSearchResult:function(){this._searchResults&&(this._hideSearchHighlights(),0>--this._currentSearchResultIndex&&(this._currentSearchResultIndex=this._searchResults.length-1),this._highlightCurrentSearchResult())},_highlightCurrentSearchResult:function(){var a=this._currentSearchResultIndex,b=this._searchResults,c=b[a];if(null===c)WebInspector.searchController.updateCurrentMatchIndex(a,this);else if("undefined"===typeof c)WebInspector.domAgent.searchResult(a,function(c){b[a]=c||null;this._highlightCurrentSearchResult()}.bind(this));
else if(WebInspector.searchController.updateCurrentMatchIndex(a,this),c=this.treeOutline.findTreeElement(c))c.highlightSearchResults(this._searchQuery),c.reveal(),c=c.listItemElement.getElementsByClassName("webkit-search-result"),c.length&&c[0].scrollIntoViewIfNeeded()},_hideSearchHighlights:function(){if(this._searchResults){var a=this._searchResults[this._currentSearchResultIndex];a&&(a=this.treeOutline.findTreeElement(a))&&a.hideSearchHighlights()}},selectedDOMNode:function(){return this.treeOutline.selectedDOMNode()},
selectDOMNode:function(a,b){this.treeOutline.selectDOMNode(a,b)},_nodeRemoved:function(a){if(this.isShowing())for(var b=this.crumbsElement.firstChild;b;b=b.nextSibling)if(b.representedObject===a.data.node){this.updateBreadcrumb(!0);break}},_stylesPaneEdited:function(){this.sidebarPanes.metrics.needsUpdate=!0;this.updateMetrics()},_metricsPaneEdited:function(){this.sidebarPanes.styles.needsUpdate=!0;this.updateStyles(!0)},_mouseMovedInCrumbs:function(a){a=document.elementFromPoint(a.pageX,a.pageY).enclosingNodeOrSelfWithClass("crumb");
WebInspector.domAgent.highlightDOMNode(a?a.representedObject.id:0);"_mouseOutOfCrumbsTimeout"in this&&(clearTimeout(this._mouseOutOfCrumbsTimeout),delete this._mouseOutOfCrumbsTimeout)},_mouseMovedOutOfCrumbs:function(a){a=document.elementFromPoint(a.pageX,a.pageY);a&&a.isDescendant(this.crumbsElement)||(WebInspector.domAgent.hideDOMNodeHighlight(),this._mouseOutOfCrumbsTimeout=setTimeout(this.updateBreadcrumbSizes.bind(this),1E3))},_updateBreadcrumbIfNeeded:function(a){var b=a.data.name;if("class"===
b||"id"===b)for(a=a.data.node,b=this.crumbsElement.firstChild;b;){if(b.representedObject===a){this.updateBreadcrumb(!0);break}b=b.nextSibling}},updateBreadcrumb:function(a){function b(a){var b=a.currentTarget;if(b.hasStyleClass("collapsed")){if(b===f.crumbsElement.firstChild)for(var c=b;c;){var d=c.hasStyleClass("hidden"),e=c.hasStyleClass("collapsed");if(!d&&!e)break;b=c;c=c.nextSibling}f.updateBreadcrumbSizes(b)}else f.selectDOMNode(b.representedObject,!0);a.preventDefault()}if(this.isShowing()){for(var c=
this.crumbsElement,e=!1,d=c.firstChild;d;)d.representedObject===this.selectedDOMNode()?(d.addStyleClass("selected"),e=!0):d.removeStyleClass("selected"),d=d.nextSibling;if(!e||a){c.removeChildren();var f=this;for(a=this.selectedDOMNode();a;a=a.parentNode)if(a.nodeType()!==Node.DOCUMENT_NODE){d=document.createElement("span");d.className="crumb";d.representedObject=a;d.addEventListener("mousedown",b,!1);var g;switch(a.nodeType()){case Node.ELEMENT_NODE:WebInspector.DOMPresentationUtils.decorateNodeLabel(a,
d);break;case Node.TEXT_NODE:g=WebInspector.UIString("(text)");break;case Node.COMMENT_NODE:g="\x3c!--\x3e";break;case Node.DOCUMENT_TYPE_NODE:g="<!DOCTYPE>";break;default:g=a.nodeNameInCorrectCase()}d.childNodes.length||(e=document.createElement("span"),e.textContent=g,d.appendChild(e),d.title=g);a===this.selectedDOMNode()&&d.addStyleClass("selected");c.childNodes.length||d.addStyleClass("end");c.appendChild(d)}c.hasChildNodes()&&c.lastChild.addStyleClass("start")}this.updateBreadcrumbSizes()}},
updateBreadcrumbSizes:function(a){function b(){var a=20,b=document.getElementById("error-warning-count");!WebInspector.drawer.visible&&b&&(a+=b.offsetWidth);return f.totalOffsetLeft()+f.offsetWidth+a<window.innerWidth}function c(c,d,e){function l(a){(a=f.childNodes[a])&&a!==e&&c(a);return b()?!0:!1}e||(e=a||k);if(e===k)var m=g;else if(e===a)m=h;else for(var t=m=0;t<f.childNodes.length;++t)if(f.childNodes[t]===e){m=t;break}if(d)for(t=0<d?0:f.childNodes.length-1;t!==m;){if(l(t))return!0;t+=0<d?1:-1}else{d=
0;for(var u=f.childNodes.length-1;d!=m||u!=m;)if(t=m-d>=u-m?d++:u--,l(t))return!0}return!1}function e(a){a.hasStyleClass("hidden")||a.addStyleClass("compact")}function d(a,b){if(!a.hasStyleClass("hidden")&&(a.addStyleClass("collapsed"),a.removeStyleClass("compact"),!b)){for(var c=f.firstChild,d=!1,e=!1,g=!1;c;){if(c.hasStyleClass("hidden"))d=!0;else{var h=c.hasStyleClass("collapsed");if(d&&h){c.addStyleClass("hidden");c.removeStyleClass("compact");c.removeStyleClass("collapsed");c.hasStyleClass("start")&&
(c.removeStyleClass("start"),e=!0);c.hasStyleClass("end")&&(c.removeStyleClass("end"),g=!0);continue}d=h;g&&(g=!1,c.addStyleClass("end"))}c=c.nextSibling}if(e)for(c=f.lastChild;c;){if(!c.hasStyleClass("hidden")){c.addStyleClass("start");break}c=c.previousSibling}}}if(this.isShowing()&&!(0>=document.body.offsetWidth)){var f=this.crumbsElement;if(f.childNodes.length&&!(0>=f.offsetWidth)){for(var g=0,h=0,k,l=0,m=f.firstChild;m;)!k&&m.hasStyleClass("selected")&&(k=m,g=l),m===a&&(h=l),m!==f.lastChild&&
m.removeStyleClass("start"),m!==f.firstChild&&m.removeStyleClass("end"),m.removeStyleClass("compact"),m.removeStyleClass("collapsed"),m.removeStyleClass("hidden"),m=m.nextSibling,++l;f.firstChild.addStyleClass("end");f.lastChild.addStyleClass("start");b()||!a&&(c(e,1)||c(d,1))||c(e,a?0:-1)||c(d,a?0:-1)||!k||(e(k),b()||d(k,!0))}}},updateStyles:function(a){var b=this.sidebarPanes.styles,c=this.sidebarPanes.computedStyle;(b.isShowing()||c.isShowing())&&b.needsUpdate&&(b.update(this.selectedDOMNode(),
a),b.needsUpdate=!1)},updateMetrics:function(){var a=this.sidebarPanes.metrics;a.isShowing()&&a.needsUpdate&&(a.update(this.selectedDOMNode()),a.needsUpdate=!1)},updateProperties:function(){var a=this.sidebarPanes.properties;a.isShowing()&&a.needsUpdate&&(a.update(this.selectedDOMNode()),a.needsUpdate=!1)},updateEventListeners:function(){var a=this.sidebarPanes.eventListeners;a.isShowing()&&a.needsUpdate&&(a.update(this.selectedDOMNode()),a.needsUpdate=!1)},handleShortcut:function(a){if(!this.treeOutline.editing()){if(WebInspector.KeyboardShortcut.eventHasCtrlOrMeta(a)&&
!a.shiftKey&&"U+005A"===a.keyIdentifier)WebInspector.domAgent.undo(this._updateSidebars.bind(this)),a.handled=!0;else if(WebInspector.isMac()?a.metaKey&&a.shiftKey&&"U+005A"===a.keyIdentifier:a.ctrlKey&&"U+0059"===a.keyIdentifier)DOMAgent.redo(this._updateSidebars.bind(this)),a.handled=!0;if(a.handled)return}this.treeOutline.handleShortcut(a)},handleCopyEvent:function(a){window.getSelection().isCollapsed&&(a.clipboardData.clearData(),a.preventDefault(),this.selectedDOMNode().copyNode())},sidebarResized:function(a){this.treeOutline.updateSelection()},
_inspectElementRequested:function(a){this.revealAndSelectNode(a.data.id)},revealAndSelectNode:function(a){WebInspector.inspectorView.setCurrentPanel(this);var b=WebInspector.domAgent.nodeForId(a);b&&(WebInspector.domAgent.highlightDOMNodeForTwoSeconds(a),this.selectDOMNode(b,!0))},appendApplicableItems:function(a,b,c){function e(a){a&&WebInspector.domAgent.inspectElement(a)}function d(){f.pushNodeToFrontend(e)}if(c instanceof WebInspector.RemoteObject){var f=c;"node"===f.subtype&&b.appendItem(WebInspector.UIString(WebInspector.useLowerCaseMenuTitles()?
"Reveal in Elements panel":"Reveal in Elements Panel"),d.bind(this))}},_sidebarContextMenuEventFired:function(a){(new WebInspector.ContextMenu(a)).show()},_dockSideChanged:function(){var a=WebInspector.dockController.dockSide()===WebInspector.DockController.State.DockedToRight&&WebInspector.settings.splitVerticallyWhenDockedToRight.get();this._splitVertically(a)},_splitVertically:function(a){if(!this.sidebarPaneView||a!==!this.splitView.isVertical()){this.sidebarPaneView&&this.sidebarPaneView.detach();
this.splitView.setVertical(!a);if(a){this.sidebarPaneView=new WebInspector.SidebarTabbedPane;a=new WebInspector.SidebarPane(this.sidebarPanes.styles.title());a.element.addStyleClass("composite");a.element.addStyleClass("fill");var b=a.expand.bind(a),c=new WebInspector.SplitView(!0,"StylesPaneSplitRatio",0.5);c.show(a.bodyElement);this.sidebarPanes.styles.show(c.firstElement());c.firstElement().appendChild(this.sidebarPanes.styles.titleElement);this.sidebarPanes.styles.setExpandCallback(b);this.sidebarPanes.metrics.show(c.secondElement());
this.sidebarPanes.metrics.setExpandCallback(b);c.secondElement().appendChild(this.sidebarPanes.computedStyle.titleElement);c.secondElement().addStyleClass("metrics-and-computed");this.sidebarPanes.computedStyle.show(c.secondElement());this.sidebarPanes.computedStyle.setExpandCallback(b);this.sidebarPaneView.addPane(a);this.sidebarPaneView.addPane(this.sidebarPanes.properties);this.sidebarPaneView.addPane(this.sidebarPanes.domBreakpoints);this.sidebarPaneView.addPane(this.sidebarPanes.eventListeners)}else for(b in this.sidebarPaneView=
new WebInspector.SidebarPaneStack,this.sidebarPanes)this.sidebarPaneView.addPane(this.sidebarPanes[b]);this.sidebarPaneView.show(this.splitView.sidebarElement);this.sidebarPanes.styles.expand()}},addExtensionSidebarPane:function(a,b){this.sidebarPanes[a]=b;this.sidebarPaneView.addPane(b)},__proto__:WebInspector.Panel.prototype};
